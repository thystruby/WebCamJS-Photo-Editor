function Sketchpad(t){for(var e in this.constructor.prototype)this[e]=this[e].bind(this);if(!t.hasOwnProperty("element"))return void console.error("SKETCHPAD ERROR: No element selected");"string"==typeof t.element?this.element=$(t.element):this.element=t.element,this._width=t.width||this.element.attr("data-width")||0,this._height=t.height||this.element.attr("data-height")||0,this.color=t.color||this.element.attr("data-color")||"#000000",this.penSize=t.penSize||this.element.attr("data-penSize")||5,this.readOnly=t.readOnly||this.element.attr("data-readOnly")||!1,this.readOnly||this.element.css({cursor:"crosshair"}),this.strokes=t.strokes||[],this._currentStroke={color:null,size:null,lines:[]},this.undoHistory=t.undoHistory||[],this.animateIds=[],this._sketching=!1,this.reset()}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Cropper=e()}(this,function(){"use strict";function t(t){return at.call(t).slice(8,-1).toLowerCase()}function e(t){return"number"==typeof t&&!isNaN(t)}function n(t){return void 0===t}function i(t){return"object"===(void 0===t?"undefined":U(t))&&null!==t}function r(t){if(!i(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&st.call(n,"isPrototypeOf")}catch(t){return!1}}function o(e){return"function"===t(e)}function a(e){return Array.isArray?Array.isArray(e):"array"===t(e)}function s(t){return"string"==typeof t&&(t=t.trim?t.trim():t.replace(et,"$1")),t}function c(t,n){if(t&&o(n)){var r=void 0;if(a(t)||e(t.length)){var s=t.length;for(r=0;r<s&&!1!==n.call(t,t[r],r,t);r++);}else i(t)&&Object.keys(t).forEach(function(e){n.call(t,t[e],e,t)})}return t}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(i(t)&&n.length>0){if(Object.assign)return Object.assign.apply(Object,[t].concat(n));n.forEach(function(e){i(e)&&Object.keys(e).forEach(function(n){t[n]=e[n]})})}return t}function u(t,e){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.apply(e,i.concat(r))}}function h(t,n){var i=t.style;c(n,function(t,n){tt.test(n)&&e(t)&&(t+="px"),i[n]=t})}function d(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function p(t,n){if(n){if(e(t.length))return void c(t,function(t){p(t,n)});if(t.classList)return void t.classList.add(n);var i=s(t.className);i?i.indexOf(n)<0&&(t.className=i+" "+n):t.className=n}}function f(t,n){if(n)return e(t.length)?void c(t,function(t){f(t,n)}):t.classList?void t.classList.remove(n):void(t.className.indexOf(n)>=0&&(t.className=t.className.replace(n,"")))}function g(t,n,i){if(n)return e(t.length)?void c(t,function(t){g(t,n,i)}):void(i?p(t,n):f(t,n))}function m(t){return t.replace(V,"$1-$2").toLowerCase()}function v(t,e){return i(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-"+m(e))}function y(t,e,n){i(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-"+m(e),n)}function b(t,e){if(i(t[e]))delete t[e];else if(t.dataset)try{delete t.dataset[e]}catch(n){t.dataset[e]=null}else t.removeAttribute("data-"+m(e))}function x(t,e,n){var i=s(e).split(Z);if(i.length>1)return void c(i,function(e){x(t,e,n)});t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)}function w(t,e,n,i){var r=s(e).split(Z),o=n;if(r.length>1)return void c(r,function(e){w(t,e,n)});i&&(n=function(){for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];return x(t,e,n),o.apply(t,r)}),t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function D(t,e,i){if(t.dispatchEvent){var r=void 0;return o(Event)&&o(CustomEvent)?r=n(i)?new Event(e,{bubbles:!0,cancelable:!0}):new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):n(i)?(r=document.createEvent("Event"),r.initEvent(e,!0,!0)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(e,!0,!0,i)),t.dispatchEvent(r)}return!t.fireEvent||t.fireEvent("on"+e)}function k(t){var n=t||window.event;if(n.target||(n.target=n.srcElement||document),!e(n.pageX)&&e(n.clientX)){var i=t.target.ownerDocument||document,r=i.documentElement,o=i.body;n.pageX=n.clientX+((r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0)),n.pageY=n.clientY+((r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0))}return n}function C(t){var e=document.documentElement,n=t.getBoundingClientRect();return{left:n.left+((window.scrollX||e&&e.scrollLeft||0)-(e&&e.clientLeft||0)),top:n.top+((window.scrollY||e&&e.scrollTop||0)-(e&&e.clientTop||0))}}function T(t,e){return t.getElementsByTagName(e)}function S(t,e){return t.getElementsByClassName?t.getElementsByClassName(e):t.querySelectorAll("."+e)}function M(t){return document.createElement(t)}function N(t,e){t.appendChild(e)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function L(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function B(t){var e=t.match(Q);return e&&(e[1]!==location.protocol||e[2]!==location.hostname||e[3]!==location.port)}function A(t){var e="timestamp="+(new Date).getTime();return t+(-1===t.indexOf("?")?"?":"&")+e}function R(t,e){if(t.naturalWidth&&!rt)return void e(t.naturalWidth,t.naturalHeight);var n=M("img");n.onload=function(){e(this.width,this.height)},n.src=t.src}function H(t){var n=[],i=t.translateX,r=t.translateY,o=t.rotate,a=t.scaleX,s=t.scaleY;e(i)&&0!==i&&n.push("translateX("+i+"px)"),e(r)&&0!==r&&n.push("translateY("+r+"px)"),e(o)&&0!==o&&n.push("rotate("+o+"deg)"),e(a)&&1!==a&&n.push("scaleX("+a+")"),e(s)&&1!==s&&n.push("scaleY("+s+")");var c=n.length?n.join(" "):"none";return{WebkitTransform:c,msTransform:c,transform:c}}function j(t,e){var n=Math.abs(t.degree)%180,i=(n>90?180-n:n)*Math.PI/180,r=Math.sin(i),o=Math.cos(i),a=t.width,s=t.height,c=t.aspectRatio,l=void 0,u=void 0;return e?(l=a/(o+r/c),u=l/c):(l=a*o+s*r,u=a*r+s*o),{width:l,height:u}}function P(t,n){var i=M("canvas"),r=i.getContext("2d"),o=0,a=0,s=n.naturalWidth,c=n.naturalHeight,l=n.rotate,u=n.scaleX,h=n.scaleY,d=e(u)&&e(h)&&(1!==u||1!==h),p=e(l)&&0!==l,f=p||d,g=s*Math.abs(u||1),m=c*Math.abs(h||1),v=void 0,y=void 0,b=void 0;return d&&(v=g/2,y=m/2),p&&(b=j({width:g,height:m,degree:l}),g=b.width,m=b.height,v=g/2,y=m/2),i.width=g,i.height=m,f&&(o=-s/2,a=-c/2,r.save(),r.translate(v,y)),p&&r.rotate(l*Math.PI/180),d&&r.scale(u,h),r.drawImage(t,Math.floor(o),Math.floor(a),Math.floor(s),Math.floor(c)),f&&r.restore(),i}function O(t,e,n){var i="",r=e;for(n+=e;r<n;r++)i+=ct(t.getUint8(r));return i}function I(t){var e=new DataView(t),n=e.byteLength,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=void 0,h=void 0,d=void 0;if(255===e.getUint8(0)&&216===e.getUint8(1))for(h=2;h<n;){if(255===e.getUint8(h)&&225===e.getUint8(h+1)){l=h;break}h++}if(l&&(r=l+4,o=l+10,"Exif"===O(e,r,4)&&(c=e.getUint16(o),((s=18761===c)||19789===c)&&42===e.getUint16(o+2,s)&&(a=e.getUint32(o+4,s))>=8&&(u=o+a))),u)for(n=e.getUint16(u,s),d=0;d<n;d++)if(h=u+12*d+2,274===e.getUint16(h,s)){h+=8,i=e.getUint16(h,s),rt&&e.setUint16(h,1,s);break}return i}function F(t){var e=t.replace(K,""),n=atob(e),i=n.length,r=new ArrayBuffer(i),o=new Uint8Array(r),a=void 0;for(a=0;a<i;a++)o[a]=n.charCodeAt(a);return r}function _(t){var e=new Uint8Array(t),n=e.length,i="",r=void 0;for(r=0;r<n;r++)i+=ct(e[r]);return"data:image/jpeg;base64,"+btoa(i)}function z(t,e){var n=t.pageX,i=t.pageY,r={endX:n,endY:i};return e?r:l({startX:n,startY:i},r)}function W(t){var e=l({},t),n=[];return c(t,function(t,i){delete e[i],c(e,function(e){var i=Math.abs(t.startX-e.startX),r=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),a=Math.abs(t.endY-e.endY),s=Math.sqrt(i*i+r*r),c=Math.sqrt(o*o+a*a),l=(c-s)/s;n.push(l)})}),n.sort(function(t,e){return Math.abs(t)<Math.abs(e)}),n[0]}function q(t){var e=0,n=0,i=0;return c(t,function(t){var r=t.startX,o=t.startY;e+=r,n+=o,i+=1}),e/=i,n/=i,{pageX:e,pageY:n}}var X={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},$='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>',U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},J=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),G=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},K=/^data:.*,/,V=/([a-z\d])([A-Z])/g,Q=/^(https?:)\/\/([^:\/?#]+):?(\d*)/i,Z=/\s+/,tt=/^(width|height|left|top|marginLeft|marginTop)$/,et=/^\s+(.*)\s+$/,nt=/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i,it="undefined"!=typeof window?window.navigator:null,rt=it&&nt.test(it.userAgent),ot=Object.prototype,at=ot.toString,st=ot.hasOwnProperty,ct=(Array.prototype.slice,String.fromCharCode),lt={render:function(){var t=this;t.initContainer(),t.initCanvas(),t.initCropBox(),t.renderCanvas(),t.cropped&&t.renderCropBox()},initContainer:function(){var t=this,e=t.options,n=t.element,i=t.container,r=t.cropper,o="cropper-hidden",a=void 0;p(r,o),f(n,o),t.containerData=a={width:Math.max(i.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(e.minContainerHeight)||100)},h(r,{width:a.width,height:a.height}),p(n,o),f(r,o)},initCanvas:function(){var t=this,e=t.options.viewMode,n=t.containerData,i=t.imageData,r=90===Math.abs(i.rotate),o=r?i.naturalHeight:i.naturalWidth,a=r?i.naturalWidth:i.naturalHeight,s=o/a,c=n.width,u=n.height;n.height*s>n.width?3===e?c=n.height*s:u=n.width/s:3===e?u=n.width/s:c=n.height*s;var h={naturalWidth:o,naturalHeight:a,aspectRatio:s,width:c,height:u};h.oldLeft=h.left=(n.width-c)/2,h.oldTop=h.top=(n.height-u)/2,t.canvasData=h,t.limited=1===e||2===e,t.limitCanvas(!0,!0),t.initialImageData=l({},i),t.initialCanvasData=l({},h)},limitCanvas:function(t,e){var n=this,i=n.options,r=i.viewMode,o=n.containerData,a=n.canvasData,s=a.aspectRatio,c=n.cropBoxData,l=n.cropped&&c;if(t){var u=Number(i.minCanvasWidth)||0,h=Number(i.minCanvasHeight)||0;r>1?(u=Math.max(u,o.width),h=Math.max(h,o.height),3===r&&(h*s>u?u=h*s:h=u/s)):r>0&&(u?u=Math.max(u,l?c.width:0):h?h=Math.max(h,l?c.height:0):l&&(u=c.width,h=c.height,h*s>u?u=h*s:h=u/s)),u&&h?h*s>u?h=u/s:u=h*s:u?h=u/s:h&&(u=h*s),a.minWidth=u,a.minHeight=h,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(r){var d=o.width-a.width,p=o.height-a.height;a.minLeft=Math.min(0,d),a.minTop=Math.min(0,p),a.maxLeft=Math.max(0,d),a.maxTop=Math.max(0,p),l&&n.limited&&(a.minLeft=Math.min(c.left,c.left+(c.width-a.width)),a.minTop=Math.min(c.top,c.top+(c.height-a.height)),a.maxLeft=c.left,a.maxTop=c.top,2===r&&(a.width>=o.width&&(a.minLeft=Math.min(0,d),a.maxLeft=Math.max(0,d)),a.height>=o.height&&(a.minTop=Math.min(0,p),a.maxTop=Math.max(0,p))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=o.width,a.maxTop=o.height},renderCanvas:function(t){var e=this,n=e.canvasData,i=e.imageData,r=i.rotate;if(e.rotated){e.rotated=!1;var o=j({width:i.width,height:i.height,degree:r}),a=o.width/o.height,s=1===i.aspectRatio;if(s||a!==n.aspectRatio){if(n.left-=(o.width-n.width)/2,n.top-=(o.height-n.height)/2,n.width=o.width,n.height=o.height,n.aspectRatio=a,n.naturalWidth=i.naturalWidth,n.naturalHeight=i.naturalHeight,s&&r%90||r%180){var c=j({width:i.naturalWidth,height:i.naturalHeight,degree:r});n.naturalWidth=c.width,n.naturalHeight=c.height}e.limitCanvas(!0,!1)}}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),e.limitCanvas(!1,!0),n.oldLeft=n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.oldTop=n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),h(e.canvas,l({width:n.width,height:n.height},H({translateX:n.left,translateY:n.top}))),e.renderImage(),e.cropped&&e.limited&&e.limitCropBox(!0,!0),t&&e.output()},renderImage:function(t){var e=this,n=e.canvasData,i=e.imageData,r=void 0,o=void 0,a=void 0,s=void 0;i.rotate&&(o=j({width:n.width,height:n.height,degree:i.rotate,aspectRatio:i.aspectRatio},!0),a=o.width,s=o.height,r={width:a,height:s,left:(n.width-a)/2,top:(n.height-s)/2}),l(i,r||{width:n.width,height:n.height,left:0,top:0}),h(e.image,l({width:i.width,height:i.height},H(l({translateX:i.left,translateY:i.top},i)))),t&&e.output()},initCropBox:function(){var t=this,e=t.options,n=e.aspectRatio,i=Number(e.autoCropArea)||.8,r=t.canvasData,o={width:r.width,height:r.height};n&&(r.height*n>r.width?o.height=o.width/n:o.width=o.height*n),t.cropBoxData=o,t.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*i),o.height=Math.max(o.minHeight,o.height*i),o.oldLeft=o.left=r.left+(r.width-o.width)/2,o.oldTop=o.top=r.top+(r.height-o.height)/2,t.initialCropBoxData=l({},o)},limitCropBox:function(t,e){var n=this,i=n.options,r=i.aspectRatio,o=n.containerData,a=n.canvasData,s=n.cropBoxData,c=n.limited;if(t){var l=Number(i.minCropBoxWidth)||0,u=Number(i.minCropBoxHeight)||0,h=Math.min(o.width,c?a.width:o.width),d=Math.min(o.height,c?a.height:o.height);l=Math.min(l,o.width),u=Math.min(u,o.height),r&&(l&&u?u*r>l?u=l/r:l=u*r:l?u=l/r:u&&(l=u*r),d*r>h?d=h/r:h=d*r),s.minWidth=Math.min(l,h),s.minHeight=Math.min(u,d),s.maxWidth=h,s.maxHeight=d}e&&(c?(s.minLeft=Math.max(0,a.left),s.minTop=Math.max(0,a.top),s.maxLeft=Math.min(o.width,a.left+a.width)-s.width,s.maxTop=Math.min(o.height,a.top+a.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=o.width-s.width,s.maxTop=o.height-s.height))},renderCropBox:function(){var t=this,e=t.options,n=t.containerData,i=t.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),t.limitCropBox(!1,!0),i.oldLeft=i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),e.movable&&e.cropBoxMovable&&y(t.face,"action",i.width===n.width&&i.height===n.height?"move":"all"),h(t.cropBox,l({width:i.width,height:i.height},H({translateX:i.left,translateY:i.top}))),t.cropped&&t.limited&&t.limitCanvas(!0,!0),t.disabled||t.output()},output:function(){var t=this;t.preview(),t.complete&&D(t.element,"crop",t.getData())}},ut="preview",ht={initPreview:function(){var t=this,e=t.options.preview,n=M("img"),i=t.crossOrigin,r=i?t.crossOriginUrl:t.url;if(i&&(n.crossOrigin=i),n.src=r,N(t.viewBox,n),t.image2=n,e){var o=e.querySelector?[e]:document.querySelectorAll(e);t.previews=o,c(o,function(t){var e=M("img");y(t,ut,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),i&&(e.crossOrigin=i),e.src=r,e.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',L(t),N(t,e)})}},resetPreview:function(){c(this.previews,function(t){var e=v(t,ut);h(t,{width:e.width,height:e.height}),t.innerHTML=e.html,b(t,ut)})},preview:function(){var t=this,e=t.imageData,n=t.canvasData,i=t.cropBoxData,r=i.width,o=i.height,a=e.width,s=e.height,u=i.left-n.left-e.left,d=i.top-n.top-e.top;t.cropped&&!t.disabled&&(h(t.image2,l({width:a,height:s},H(l({translateX:-u,translateY:-d},e)))),c(t.previews,function(t){var n=v(t,ut),i=n.width,c=n.height,p=i,f=c,g=1;r&&(g=i/r,f=o*g),o&&f>c&&(g=c/o,p=r*g,f=c),h(t,{width:p,height:f}),h(T(t,"img")[0],l({width:a*g,height:s*g},H(l({translateX:-u*g,translateY:-d*g},e))))}))}},dt="undefined"!=typeof window?window.PointerEvent:null,pt=dt?"pointerdown":"touchstart mousedown",ft=dt?"pointermove":"touchmove mousemove",gt=dt?" pointerup pointercancel":"touchend touchcancel mouseup",mt="wheel mousewheel DOMMouseScroll",vt="dblclick",yt="resize",bt="cropstart",xt="cropmove",wt="cropend",Dt="crop",kt="zoom",Ct={bind:function(){var t=this,e=t.options,n=t.element,i=t.cropper;o(e.cropstart)&&w(n,bt,e.cropstart),o(e.cropmove)&&w(n,xt,e.cropmove),o(e.cropend)&&w(n,wt,e.cropend),o(e.crop)&&w(n,Dt,e.crop),o(e.zoom)&&w(n,kt,e.zoom),w(i,pt,t.onCropStart=u(t.cropStart,t)),e.zoomable&&e.zoomOnWheel&&w(i,mt,t.onWheel=u(t.wheel,t)),e.toggleDragModeOnDblclick&&w(i,vt,t.onDblclick=u(t.dblclick,t)),w(document,ft,t.onCropMove=u(t.cropMove,t)),w(document,gt,t.onCropEnd=u(t.cropEnd,t)),e.responsive&&w(window,yt,t.onResize=u(t.resize,t))},unbind:function(){var t=this,e=t.options,n=t.element,i=t.cropper;o(e.cropstart)&&x(n,bt,e.cropstart),o(e.cropmove)&&x(n,xt,e.cropmove),o(e.cropend)&&x(n,wt,e.cropend),o(e.crop)&&x(n,Dt,e.crop),o(e.zoom)&&x(n,kt,e.zoom),x(i,pt,t.onCropStart),e.zoomable&&e.zoomOnWheel&&x(i,mt,t.onWheel),e.toggleDragModeOnDblclick&&x(i,vt,t.onDblclick),x(document,ft,t.onCropMove),x(document,gt,t.onCropEnd),e.responsive&&x(window,yt,t.onResize)}},Tt=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,St={resize:function(){var t=this,e=t.options,n=t.container,i=t.containerData,r=Number(e.minContainerWidth)||200,o=Number(e.minContainerHeight)||100;if(!t.disabled&&i.width!==r&&i.height!==o){var a=n.offsetWidth/i.width;1===a&&n.offsetHeight===i.height||function(){var n=void 0,i=void 0;e.restore&&(n=t.getCanvasData(),i=t.getCropBoxData()),t.render(),e.restore&&(t.setCanvasData(c(n,function(t,e){n[e]=t*a})),t.setCropBoxData(c(i,function(t,e){i[e]=t*a})))}()}},dblclick:function(){var t=this;t.disabled||"none"===t.options.dragMode||t.setDragMode(d(t.dragBox,"cropper-crop")?"move":"crop")},wheel:function(t){var e=this,n=k(t),i=Number(e.options.wheelZoomRatio)||.1,r=1;e.disabled||(n.preventDefault(),e.wheeling||(e.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),n.deltaY?r=n.deltaY>0?1:-1:n.wheelDelta?r=-n.wheelDelta/120:n.detail&&(r=n.detail>0?1:-1),e.zoom(-r*i,n)))},cropStart:function(t){var e=this;if(!e.disabled){var n=e.options,i=e.pointers,r=k(t),o=void 0;r.changedTouches?c(r.changedTouches,function(t){i[t.identifier]=z(t)}):i[r.pointerId||0]=z(r),o=Object.keys(i).length>1&&n.zoomable&&n.zoomOnTouch?"zoom":v(r.target,"action"),Tt.test(o)&&!1!==D(e.element,"cropstart",{originalEvent:r,action:o})&&(r.preventDefault(),e.action=o,e.cropping=!1,"crop"===o&&(e.cropping=!0,p(e.dragBox,"cropper-modal")))}},cropMove:function(t){var e=this,n=e.action;if(!e.disabled&&n){var i=e.pointers,r=k(t);r.preventDefault(),!1!==D(e.element,"cropmove",{originalEvent:r,action:n})&&(r.changedTouches?c(r.changedTouches,function(t){l(i[t.identifier],z(t,!0))}):l(i[r.pointerId||0],z(r,!0)),e.change(r))}},cropEnd:function(t){var e=this;if(!e.disabled){var n=e.action,i=e.pointers,r=k(t);r.changedTouches?c(r.changedTouches,function(t){delete i[t.identifier]}):delete i[r.pointerId||0],n&&(r.preventDefault(),Object.keys(i).length||(e.action=""),e.cropping&&(e.cropping=!1,g(e.dragBox,"cropper-modal",e.cropped&&this.options.modal)),D(e.element,"cropend",{originalEvent:r,action:n}))}}},Mt="e",Nt="w",Et="s",Lt="n",Bt="se",At="sw",Rt="ne",Ht="nw",jt={change:function(t){var e=this,n=e.options,i=e.containerData,r=e.canvasData,o=e.cropBoxData,a=n.aspectRatio,s=e.action,l=o.width,u=o.height,h=o.left,d=o.top,p=h+l,g=d+u,m=0,v=0,y=i.width,b=i.height,x=!0,w=void 0;!a&&t.shiftKey&&(a=l&&u?l/u:1),e.limited&&(m=o.minLeft,v=o.minTop,y=m+Math.min(i.width,r.width,r.left+r.width),b=v+Math.min(i.height,r.height,r.top+r.height));var D=e.pointers,k=D[Object.keys(D)[0]],T={x:k.endX-k.startX,y:k.endY-k.startY};switch(a&&(T.X=T.y*a,T.Y=T.x/a),s){case"all":h+=T.x,d+=T.y;break;case Mt:if(T.x>=0&&(p>=y||a&&(d<=v||g>=b))){x=!1;break}l+=T.x,a&&(u=l/a,d-=T.Y/2),l<0&&(s=Nt,l=0);break;case Lt:if(T.y<=0&&(d<=v||a&&(h<=m||p>=y))){x=!1;break}u-=T.y,d+=T.y,a&&(l=u*a,h+=T.X/2),u<0&&(s=Et,u=0);break;case Nt:if(T.x<=0&&(h<=m||a&&(d<=v||g>=b))){x=!1;break}l-=T.x,h+=T.x,a&&(u=l/a,d+=T.Y/2),l<0&&(s=Mt,l=0);break;case Et:if(T.y>=0&&(g>=b||a&&(h<=m||p>=y))){x=!1;break}u+=T.y,a&&(l=u*a,h-=T.X/2),u<0&&(s=Lt,u=0);break;case Rt:if(a){if(T.y<=0&&(d<=v||p>=y)){x=!1;break}u-=T.y,d+=T.y,l=u*a}else T.x>=0?p<y?l+=T.x:T.y<=0&&d<=v&&(x=!1):l+=T.x,T.y<=0?d>v&&(u-=T.y,d+=T.y):(u-=T.y,d+=T.y);l<0&&u<0?(s=At,u=0,l=0):l<0?(s=Ht,l=0):u<0&&(s=Bt,u=0);break;case Ht:if(a){if(T.y<=0&&(d<=v||h<=m)){x=!1;break}u-=T.y,d+=T.y,l=u*a,h+=T.X}else T.x<=0?h>m?(l-=T.x,h+=T.x):T.y<=0&&d<=v&&(x=!1):(l-=T.x,h+=T.x),T.y<=0?d>v&&(u-=T.y,d+=T.y):(u-=T.y,d+=T.y);l<0&&u<0?(s=Bt,u=0,l=0):l<0?(s=Rt,l=0):u<0&&(s=At,u=0);break;case At:if(a){if(T.x<=0&&(h<=m||g>=b)){x=!1;break}l-=T.x,h+=T.x,u=l/a}else T.x<=0?h>m?(l-=T.x,h+=T.x):T.y>=0&&g>=b&&(x=!1):(l-=T.x,h+=T.x),T.y>=0?g<b&&(u+=T.y):u+=T.y;l<0&&u<0?(s=Rt,u=0,l=0):l<0?(s=Bt,l=0):u<0&&(s=Ht,u=0);break;case Bt:if(a){if(T.x>=0&&(p>=y||g>=b)){x=!1;break}l+=T.x,u=l/a}else T.x>=0?p<y?l+=T.x:T.y>=0&&g>=b&&(x=!1):l+=T.x,T.y>=0?g<b&&(u+=T.y):u+=T.y;l<0&&u<0?(s=Ht,u=0,l=0):l<0?(s=At,l=0):u<0&&(s=Rt,u=0);break;case"move":e.move(T.x,T.y),x=!1;break;case"zoom":e.zoom(W(D),t),x=!1;break;case"crop":if(!T.x||!T.y){x=!1;break}w=C(e.cropper),h=k.startX-w.left,d=k.startY-w.top,l=o.minWidth,u=o.minHeight,T.x>0?s=T.y>0?Bt:Rt:T.x<0&&(h-=l,s=T.y>0?At:Ht),T.y<0&&(d-=u),e.cropped||(f(e.cropBox,"cropper-hidden"),e.cropped=!0,e.limited&&e.limitCropBox(!0,!0))}x&&(o.width=l,o.height=u,o.left=h,o.top=d,e.action=s,e.renderCropBox()),c(D,function(t){t.startX=t.endX,t.startY=t.endY})}},Pt={crop:function(){var t=this;return t.ready&&!t.disabled&&(t.cropped||(t.cropped=!0,t.limitCropBox(!0,!0),t.options.modal&&p(t.dragBox,"cropper-modal"),f(t.cropBox,"cropper-hidden")),t.setCropBoxData(t.initialCropBoxData)),t},reset:function(){var t=this;return t.ready&&!t.disabled&&(t.imageData=l({},t.initialImageData),t.canvasData=l({},t.initialCanvasData),t.cropBoxData=l({},t.initialCropBoxData),t.renderCanvas(),t.cropped&&t.renderCropBox()),t},clear:function(){var t=this;return t.cropped&&!t.disabled&&(l(t.cropBoxData,{left:0,top:0,width:0,height:0}),t.cropped=!1,t.renderCropBox(),t.limitCanvas(),t.renderCanvas(),f(t.dragBox,"cropper-modal"),p(t.cropBox,"cropper-hidden")),t},replace:function(t,e){var n=this;return!n.disabled&&t&&(n.isImg&&(n.element.src=t),e?(n.url=t,n.image.src=t,n.ready&&(n.image2.src=t,c(n.previews,function(e){T(e,"img")[0].src=t}))):(n.isImg&&(n.replaced=!0),n.options.data=null,n.load(t))),n},enable:function(){var t=this;return t.ready&&(t.disabled=!1,f(t.cropper,"cropper-disabled")),t},disable:function(){var t=this;return t.ready&&(t.disabled=!0,p(t.cropper,"cropper-disabled")),t},destroy:function(){var t=this,e=t.element,n=t.image;return t.loaded?(t.isImg&&t.replaced&&(e.src=t.originalUrl),t.unbuild(),f(e,"cropper-hidden")):t.isImg?x(e,"load",t.onStart):n&&E(n),b(e,"cropper"),t},move:function(t,e){var i=this,r=i.canvasData;return i.moveTo(n(t)?t:r.left+Number(t),n(e)?e:r.top+Number(e))},moveTo:function(t,i){var r=this,o=r.canvasData,a=!1;return n(i)&&(i=t),t=Number(t),i=Number(i),r.ready&&!r.disabled&&r.options.movable&&(e(t)&&(o.left=t,a=!0),e(i)&&(o.top=i,a=!0),a&&r.renderCanvas(!0)),r},zoom:function(t,e){var n=this,i=n.canvasData;return t=Number(t),t=t<0?1/(1-t):1+t,n.zoomTo(i.width*t/i.naturalWidth,e)},zoomTo:function(t,e){var n=this,i=n.options,r=n.canvasData,o=r.width,a=r.height,s=r.naturalWidth,c=r.naturalHeight;if((t=Number(t))>=0&&n.ready&&!n.disabled&&i.zoomable){var l=s*t,u=c*t;if(!1===D(n.element,"zoom",{originalEvent:e,oldRatio:o/s,ratio:l/s}))return n;if(e){var h=n.pointers,d=C(n.cropper),p=h&&Object.keys(h).length?q(h):{pageX:e.pageX,pageY:e.pageY};r.left-=(l-o)*((p.pageX-d.left-r.left)/o),r.top-=(u-a)*((p.pageY-d.top-r.top)/a)}else r.left-=(l-o)/2,r.top-=(u-a)/2;r.width=l,r.height=u,n.renderCanvas(!0)}return n},rotate:function(t){var e=this;return e.rotateTo((e.imageData.rotate||0)+Number(t))},rotateTo:function(t){var n=this;return t=Number(t),e(t)&&n.ready&&!n.disabled&&n.options.rotatable&&(n.imageData.rotate=t%360,n.rotated=!0,n.renderCanvas(!0)),n},scale:function(t,i){var r=this,o=r.imageData,a=!1;return n(i)&&(i=t),t=Number(t),i=Number(i),r.ready&&!r.disabled&&r.options.scalable&&(e(t)&&(o.scaleX=t,a=!0),e(i)&&(o.scaleY=i,a=!0),a&&r.renderImage(!0)),r},scaleX:function(t){var n=this,i=n.imageData.scaleY;return n.scale(t,e(i)?i:1)},scaleY:function(t){var n=this,i=n.imageData.scaleX;return n.scale(e(i)?i:1,t)},getData:function(t){var e=this,n=e.options,i=e.imageData,r=e.canvasData,o=e.cropBoxData,a=void 0,s=void 0;return e.ready&&e.cropped?(s={x:o.left-r.left,y:o.top-r.top,width:o.width,height:o.height},a=i.width/i.naturalWidth,c(s,function(e,n){e/=a,s[n]=t?Math.round(e):e})):s={x:0,y:0,width:0,height:0},n.rotatable&&(s.rotate=i.rotate||0),n.scalable&&(s.scaleX=i.scaleX||1,s.scaleY=i.scaleY||1),s},setData:function(t){var n=this,i=n.options,a=n.imageData,s=n.canvasData,c={},l=void 0,u=void 0,h=void 0;return o(t)&&(t=t.call(n.element)),n.ready&&!n.disabled&&r(t)&&(i.rotatable&&e(t.rotate)&&t.rotate!==a.rotate&&(a.rotate=t.rotate,n.rotated=l=!0),i.scalable&&(e(t.scaleX)&&t.scaleX!==a.scaleX&&(a.scaleX=t.scaleX,u=!0),e(t.scaleY)&&t.scaleY!==a.scaleY&&(a.scaleY=t.scaleY,u=!0)),l?n.renderCanvas():u&&n.renderImage(),h=a.width/a.naturalWidth,e(t.x)&&(c.left=t.x*h+s.left),e(t.y)&&(c.top=t.y*h+s.top),e(t.width)&&(c.width=t.width*h),e(t.height)&&(c.height=t.height*h),n.setCropBoxData(c)),n},getContainerData:function(){var t=this;return t.ready?t.containerData:{}},getImageData:function(){var t=this;return t.loaded?t.imageData:{}},getCanvasData:function(){var t=this,e=t.canvasData,n={};return t.ready&&c(["left","top","width","height","naturalWidth","naturalHeight"],function(t){n[t]=e[t]}),n},setCanvasData:function(t){var n=this,i=n.canvasData,a=i.aspectRatio;return o(t)&&(t=t.call(n.element)),n.ready&&!n.disabled&&r(t)&&(e(t.left)&&(i.left=t.left),e(t.top)&&(i.top=t.top),e(t.width)?(i.width=t.width,i.height=t.width/a):e(t.height)&&(i.height=t.height,i.width=t.height*a),n.renderCanvas(!0)),n},getCropBoxData:function(){var t=this,e=t.cropBoxData,n=void 0;return t.ready&&t.cropped&&(n={left:e.left,top:e.top,width:e.width,height:e.height}),n||{}},setCropBoxData:function(t){var n=this,i=n.cropBoxData,a=n.options.aspectRatio,s=void 0,c=void 0;return o(t)&&(t=t.call(n.element)),n.ready&&n.cropped&&!n.disabled&&r(t)&&(e(t.left)&&(i.left=t.left),e(t.top)&&(i.top=t.top),e(t.width)&&t.width!==i.width&&(s=!0,i.width=t.width),e(t.height)&&t.height!==i.height&&(c=!0,i.height=t.height),a&&(s?i.height=i.width/a:c&&(i.width=i.height*a)),n.renderCropBox()),n},getCroppedCanvas:function(t){var e=this;if(!e.ready||!window.HTMLCanvasElement)return null;if(!e.cropped)return P(e.image,e.imageData);r(t)||(t={});var n=e.getData(),i=n.width,o=n.height,a=i/o,s=void 0,c=void 0,l=void 0;r(t)&&(s=t.width,c=t.height,s?(c=s/a,l=s/i):c&&(s=c*a,l=c/o));var u=Math.floor(s||i),h=Math.floor(c||o),d=M("canvas"),p=d.getContext("2d");d.width=u,d.height=h,t.fillColor&&(p.fillStyle=t.fillColor,p.fillRect(0,0,u,h));var f=function(){var t=P(e.image,e.imageData),r=t.width,a=t.height,s=e.canvasData,c=[t],u=n.x+s.naturalWidth*(Math.abs(n.scaleX||1)-1)/2,h=n.y+s.naturalHeight*(Math.abs(n.scaleY||1)-1)/2,d=void 0,p=void 0,f=void 0,g=void 0,m=void 0,v=void 0;return u<=-i||u>r?u=d=f=m=0:u<=0?(f=-u,u=0,d=m=Math.min(r,i+u)):u<=r&&(f=0,d=m=Math.min(i,r-u)),d<=0||h<=-o||h>a?h=p=g=v=0:h<=0?(g=-h,h=0,p=v=Math.min(a,o+h)):h<=a&&(g=0,p=v=Math.min(o,a-h)),c.push(Math.floor(u),Math.floor(h),Math.floor(d),Math.floor(p)),l&&(f*=l,g*=l,m*=l,v*=l),m>0&&v>0&&c.push(Math.floor(f),Math.floor(g),Math.floor(m),Math.floor(v)),c}();return p.drawImage.apply(p,G(f)),d},setAspectRatio:function(t){var e=this,i=e.options;return e.disabled||n(t)||(i.aspectRatio=Math.max(0,t)||NaN,e.ready&&(e.initCropBox(),e.cropped&&e.renderCropBox())),e},setDragMode:function(t){var e=this,n=e.options,i=e.dragBox,r=e.face,o=void 0,a=void 0;return e.loaded&&!e.disabled&&(o="crop"===t,a=n.movable&&"move"===t,t=o||a?t:"none",y(i,"action",t),g(i,"cropper-crop",o),g(i,"cropper-move",a),n.cropBoxMovable||(y(r,"action",t),g(r,"cropper-crop",o),g(r,"cropper-move",a))),e}},Ot="cropper",It=Ot+"-hidden",Ft="error",_t="load",zt="ready",Wt="crop",qt=/^data:/,Xt=/^data:image\/jpeg;base64,/,$t=void 0,Ut=function(){function t(e,n){Y(this,t);var i=this;i.element=e,i.options=l({},X,r(n)&&n),i.loaded=!1,i.ready=!1,i.complete=!1,i.rotated=!1,i.cropped=!1,i.disabled=!1,i.replaced=!1,i.limited=!1,i.wheeling=!1,i.isImg=!1,i.originalUrl="",i.canvasData=null,i.cropBoxData=null,i.previews=null,i.pointers={},i.init()}return J(t,[{key:"init",value:function(){var t=this,e=t.element,n=e.tagName.toLowerCase(),i=void 0;if(!v(e,Ot)){if(y(e,Ot,t),"img"===n){if(t.isImg=!0,t.originalUrl=i=e.getAttribute("src"),!i)return;i=e.src}else"canvas"===n&&window.HTMLCanvasElement&&(i=e.toDataURL());t.load(i)}}},{key:"load",value:function(t){var e=this,n=e.options,i=e.element;if(t){if(e.url=t,e.imageData={},!n.checkOrientation||!window.ArrayBuffer)return void e.clone();if(qt.test(t))return void(Xt?e.read(F(t)):e.clone());var r=new XMLHttpRequest;r.onerror=r.onabort=function(){e.clone()},r.onload=function(){e.read(r.response)},n.checkCrossOrigin&&B(t)&&i.crossOrigin&&(t=A(t)),r.open("get",t),r.responseType="arraybuffer",r.withCredentials="use-credentials"===i.crossOrigin,r.send()}}},{key:"read",value:function(t){var e=this,n=e.options,i=I(t),r=e.imageData,o=0,a=1,s=1;if(i>1)switch(e.url=_(t),i){case 2:a=-1;break;case 3:o=-180;break;case 4:s=-1;break;case 5:o=90,s=-1;break;case 6:o=90;break;case 7:o=90,a=-1;break;case 8:o=-90}n.rotatable&&(r.rotate=o),n.scalable&&(r.scaleX=a,r.scaleY=s),e.clone()}},{key:"clone",value:function(){var t=this,e=t.element,n=t.url,i=void 0,r=void 0,o=void 0,a=void 0;t.options.checkCrossOrigin&&B(n)&&(i=e.crossOrigin,i?r=n:(i="anonymous",r=A(n))),t.crossOrigin=i,t.crossOriginUrl=r;var s=M("img");i&&(s.crossOrigin=i),s.src=r||n,t.image=s,t.onStart=o=u(t.start,t),t.onStop=a=u(t.stop,t),t.isImg?e.complete?t.start():w(e,_t,o):(w(s,_t,o),w(s,Ft,a),p(s,"cropper-hide"),e.parentNode.insertBefore(s,e.nextSibling))}},{key:"start",value:function(t){var e=this,n=e.isImg?e.element:e.image;t&&(x(n,_t,e.onStart),x(n,Ft,e.onStop)),R(n,function(t,n){l(e.imageData,{naturalWidth:t,naturalHeight:n,aspectRatio:t/n}),e.loaded=!0,e.build()})}},{key:"stop",value:function(){var t=this,e=t.image;x(e,_t,t.onStart),x(e,Ft,t.onStop),E(e),t.image=null}},{key:"build",value:function(){var t=this,e=t.options,n=t.element,i=t.image,r=void 0,a=void 0,s=void 0,c=void 0,l=void 0,u=void 0;if(t.loaded){t.ready&&t.unbuild();var h=M("div");h.innerHTML=$,t.container=r=n.parentNode,t.cropper=a=S(h,"cropper-container")[0],t.canvas=s=S(a,"cropper-canvas")[0],t.dragBox=c=S(a,"cropper-drag-box")[0],t.cropBox=l=S(a,"cropper-crop-box")[0],t.viewBox=S(a,"cropper-view-box")[0],t.face=u=S(l,"cropper-face")[0],N(s,i),p(n,It),r.insertBefore(a,n.nextSibling),t.isImg||f(i,"cropper-hide"),t.initPreview(),t.bind(),e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,t.cropped=e.autoCrop,e.autoCrop?e.modal&&p(c,"cropper-modal"):p(l,It),e.guides||p(S(l,"cropper-dashed"),It),e.center||p(S(l,"cropper-center"),It),e.background&&p(a,"cropper-bg"),e.highlight||p(u,"cropper-invisible"),e.cropBoxMovable&&(p(u,"cropper-move"),y(u,"action","all")),e.cropBoxResizable||(p(S(l,"cropper-line"),It),p(S(l,"cropper-point"),It)),t.setDragMode(e.dragMode),t.render(),t.ready=!0,t.setData(e.data),t.completing=setTimeout(function(){o(e.ready)&&w(n,zt,e.ready,!0),D(n,zt),D(n,Wt,t.getData()),t.complete=!0},0)}}},{key:"unbuild",value:function(){var t=this;t.ready&&(t.complete||clearTimeout(t.completing),t.ready=!1,t.complete=!1,t.initialImageData=null,t.initialCanvasData=null,t.initialCropBoxData=null,t.containerData=null,t.canvasData=null,t.cropBoxData=null,t.unbind(),t.resetPreview(),t.previews=null,t.viewBox=null,t.cropBox=null,t.dragBox=null,t.canvas=null,t.container=null,E(t.cropper),t.cropper=null)}}],[{key:"noConflict",value:function(){return window.Cropper=$t,t}},{key:"setDefaults",value:function(t){l(X,r(t)&&t)}}]),t}();return l(Ut.prototype,lt),l(Ut.prototype,ht),l(Ut.prototype,Ct),l(Ut.prototype,St),l(Ut.prototype,jt),l(Ut.prototype,Pt),"undefined"!=typeof window&&($t=window.Cropper,window.Cropper=Ut),Ut}),function(t,e){function n(t){var e=ft[t]={};return Q.each(t.split(et),function(t,n){e[n]=!0}),e}function i(t,n,i){if(i===e&&1===t.nodeType){var r="data-"+n.replace(mt,"-$1").toLowerCase();if("string"==typeof(i=t.getAttribute(r))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:gt.test(i)?Q.parseJSON(i):i)}catch(t){}Q.data(t,n,i)}else i=e}return i}function r(t){var e;for(e in t)if(("data"!==e||!Q.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function o(){return!1}function a(){return!0}function s(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function c(t,e){do{t=t[e]}while(t&&1!==t.nodeType);return t}function l(t,e,n){if(e=e||0,Q.isFunction(e))return Q.grep(t,function(t,i){return!!e.call(t,i,t)===n});if(e.nodeType)return Q.grep(t,function(t,i){return t===e===n});if("string"==typeof e){var i=Q.grep(t,function(t){return 1===t.nodeType});if(Pt.test(e))return Q.filter(e,i,!n);e=Q.filter(e,i)}return Q.grep(t,function(t,i){return Q.inArray(t,e)>=0===n})}function u(t){var e=Ft.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function h(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function d(t,e){if(1===e.nodeType&&Q.hasData(t)){var n,i,r,o=Q._data(t),a=Q._data(e,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;i<r;i++)Q.event.add(e,n,s[n][i])}a.data&&(a.data=Q.extend({},a.data))}}function p(t,e){var n;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),n=e.nodeName.toLowerCase(),"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),Q.support.html5Clone&&t.innerHTML&&!Q.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Gt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.selected=t.defaultSelected:"input"===n||"textarea"===n?e.defaultValue=t.defaultValue:"script"===n&&e.text!==t.text&&(e.text=t.text),e.removeAttribute(Q.expando))}function f(t){return void 0!==t.getElementsByTagName?t.getElementsByTagName("*"):void 0!==t.querySelectorAll?t.querySelectorAll("*"):[]}function g(t){Gt.test(t.type)&&(t.defaultChecked=t.checked)}function m(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=ve.length;r--;)if((e=ve[r]+n)in t)return e;return i}function v(t,e){return t=e||t,"none"===Q.css(t,"display")||!Q.contains(t.ownerDocument,t)}function y(t,e){for(var n,i,r=[],o=0,a=t.length;o<a;o++)n=t[o],n.style&&(r[o]=Q._data(n,"olddisplay"),e?(!r[o]&&"none"===n.style.display&&(n.style.display=""),""===n.style.display&&v(n)&&(r[o]=Q._data(n,"olddisplay",D(n.nodeName)))):(i=ne(n,"display"),!r[o]&&"none"!==i&&Q._data(n,"olddisplay",i)));for(o=0;o<a;o++)n=t[o],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[o]||"":"none"));return t}function b(t,e,n){var i=ue.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function x(t,e,n,i){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,o=0;r<4;r+=2)"margin"===n&&(o+=Q.css(t,n+me[r],!0)),i?("content"===n&&(o-=parseFloat(ne(t,"padding"+me[r]))||0),"margin"!==n&&(o-=parseFloat(ne(t,"border"+me[r]+"Width"))||0)):(o+=parseFloat(ne(t,"padding"+me[r]))||0,"padding"!==n&&(o+=parseFloat(ne(t,"border"+me[r]+"Width"))||0));return o}function w(t,e,n){var i="width"===e?t.offsetWidth:t.offsetHeight,r=!0,o=Q.support.boxSizing&&"border-box"===Q.css(t,"boxSizing");if(i<=0||null==i){if(i=ne(t,e),(i<0||null==i)&&(i=t.style[e]),he.test(i))return i;r=o&&(Q.support.boxSizingReliable||i===t.style[e]),i=parseFloat(i)||0}return i+x(t,e,n||(o?"border":"content"),r)+"px"}function D(t){if(pe[t])return pe[t];var e=Q("<"+t+">").appendTo(z.body),n=e.css("display");return e.remove(),"none"!==n&&""!==n||(ie=z.body.appendChild(ie||Q.extend(z.createElement("iframe"),{frameBorder:0,width:0,height:0})),re&&ie.createElement||(re=(ie.contentWindow||ie.contentDocument).document,re.write("<!doctype html><html><body>"),re.close()),e=re.body.appendChild(re.createElement(t)),n=ne(e,"display"),z.body.removeChild(ie)),pe[t]=n,n}function k(t,e,n,i){var r;if(Q.isArray(e))Q.each(e,function(e,r){n||xe.test(t)?i(t,r):k(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==Q.type(e))i(t,e);else for(r in e)k(t+"["+r+"]",e[r],n,i)}function C(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r,o,a=e.toLowerCase().split(et),s=0,c=a.length;if(Q.isFunction(n))for(;s<c;s++)i=a[s],o=/^\+/.test(i),o&&(i=i.substr(1)||"*"),r=t[i]=t[i]||[],r[o?"unshift":"push"](n)}}function T(t,n,i,r,o,a){o=o||n.dataTypes[0],a=a||{},a[o]=!0;for(var s,c=t[o],l=0,u=c?c.length:0,h=t===Pe;l<u&&(h||!s);l++)"string"==typeof(s=c[l](n,i,r))&&(!h||a[s]?s=e:(n.dataTypes.unshift(s),s=T(t,n,i,r,s,a)));return(h||!s)&&!a["*"]&&(s=T(t,n,i,r,"*",a)),s}function S(t,n){var i,r,o=Q.ajaxSettings.flatOptions||{};for(i in n)n[i]!==e&&((o[i]?t:r||(r={}))[i]=n[i]);r&&Q.extend(!0,t,r)}function M(t,n,i){var r,o,a,s,c=t.contents,l=t.dataTypes,u=t.responseFields;for(o in u)o in i&&(n[u[o]]=i[o]);for(;"*"===l[0];)l.shift(),r===e&&(r=t.mimeType||n.getResponseHeader("content-type"));if(r)for(o in c)if(c[o]&&c[o].test(r)){l.unshift(o);break}if(l[0]in i)a=l[0];else{for(o in i){if(!l[0]||t.converters[o+" "+l[0]]){a=o;break}s||(s=o)}a=a||s}if(a)return a!==l[0]&&l.unshift(a),i[a]}function N(t,e){var n,i,r,o,a=t.dataTypes.slice(),s=a[0],c={},l=0;if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),a[1])for(n in t.converters)c[n.toLowerCase()]=t.converters[n];for(;r=a[++l];)if("*"!==r){if("*"!==s&&s!==r){if(!(n=c[s+" "+r]||c["* "+r]))for(i in c)if(o=i.split(" "),o[1]===r&&(n=c[s+" "+o[0]]||c["* "+o[0]])){!0===n?n=c[i]:!0!==c[i]&&(r=o[0],a.splice(l--,0,r));break}if(!0!==n)if(n&&t.throws)e=n(e);else try{e=n(e)}catch(t){return{state:"parsererror",error:n?t:"No conversion from "+s+" to "+r}}}s=r}return{state:"success",data:e}}function E(){try{return new t.XMLHttpRequest}catch(t){}}function L(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function B(){return setTimeout(function(){Ue=e},0),Ue=Q.now()}function A(t,e){Q.each(e,function(e,n){for(var i=(Qe[e]||[]).concat(Qe["*"]),r=0,o=i.length;r<o;r++)if(i[r].call(t,e,n))return})}function R(t,e,n){var i,r=0,o=Ve.length,a=Q.Deferred().always(function(){delete s.elem}),s=function(){for(var e=Ue||B(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,r=1-i,o=0,s=c.tweens.length;o<s;o++)c.tweens[o].run(r);return a.notifyWith(t,[c,r,n]),r<1&&s?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:Q.extend({},e),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Ue||B(),duration:n.duration,tweens:[],createTween:function(e,n,i){var r=Q.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){for(var n=0,i=e?c.tweens.length:0;n<i;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),l=c.props;for(H(l,c.opts.specialEasing);r<o;r++)if(i=Ve[r].call(c,t,l,c.opts))return i;return A(c,l),Q.isFunction(c.opts.start)&&c.opts.start.call(t,c),Q.fx.timer(Q.extend(s,{anim:c,queue:c.opts.queue,elem:t})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function H(t,e){var n,i,r,o,a;for(n in t)if(i=Q.camelCase(n),r=e[i],o=t[n],Q.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=Q.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function j(t,e,n){var i,r,o,a,s,c,l,u,h,d=this,p=t.style,f={},g=[],m=t.nodeType&&v(t);n.queue||(u=Q._queueHooks(t,"fx"),null==u.unqueued&&(u.unqueued=0,h=u.empty.fire,u.empty.fire=function(){u.unqueued||h()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,Q.queue(t,"fx").length||u.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===Q.css(t,"display")&&"none"===Q.css(t,"float")&&(Q.support.inlineBlockNeedsLayout&&"inline"!==D(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",Q.support.shrinkWrapBlocks||d.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],Je.exec(o)){if(delete e[i],c=c||"toggle"===o,o===(m?"hide":"show"))continue;g.push(i)}if(a=g.length){s=Q._data(t,"fxshow")||Q._data(t,"fxshow",{}),"hidden"in s&&(m=s.hidden),c&&(s.hidden=!m),m?Q(t).show():d.done(function(){Q(t).hide()}),d.done(function(){var e;Q.removeData(t,"fxshow",!0);for(e in f)Q.style(t,e,f[e])});for(i=0;i<a;i++)r=g[i],l=d.createTween(r,m?s[r]:0),f[r]=s[r]||Q.style(t,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function P(t,e,n,i,r){return new P.prototype.init(t,e,n,i,r)}function O(t,e){var n,i={height:t},r=0;for(e=e?1:0;r<4;r+=2-e)n=me[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function I(t){return Q.isWindow(t)?t:9===t.nodeType&&(t.defaultView||t.parentWindow)}var F,_,z=t.document,W=t.location,q=t.navigator,X=t.jQuery,$=t.$,U=Array.prototype.push,Y=Array.prototype.slice,J=Array.prototype.indexOf,G=Object.prototype.toString,K=Object.prototype.hasOwnProperty,V=String.prototype.trim,Q=function(t,e){return new Q.fn.init(t,e,F)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,tt=/\S/,et=/\s+/,nt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,it=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ot=/^[\],:{}\s]*$/,at=/(?:^|:|,)(?:\s*\[)+/g,st=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ct=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,lt=/^-ms-/,ut=/-([\da-z])/gi,ht=function(t,e){return(e+"").toUpperCase()},dt=function(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",dt,!1),Q.ready()):"complete"===z.readyState&&(z.detachEvent("onreadystatechange",dt),Q.ready())},pt={};Q.fn=Q.prototype={constructor:Q,init:function(t,n,i){var r,o,a;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("string"==typeof t){if((r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:it.exec(t))&&(r[1]||!n)){if(r[1])return n=n instanceof Q?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:z,t=Q.parseHTML(r[1],a,!0),rt.test(r[1])&&Q.isPlainObject(n)&&this.attr.call(t,n,!0),Q.merge(this,t);if((o=z.getElementById(r[2]))&&o.parentNode){if(o.id!==r[2])return i.find(t);this.length=1,this[0]=o}return this.context=z,this.selector=t,this}return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t)}return Q.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),Q.makeArray(t,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return Y.call(this)},get:function(t){return null==t?this.toArray():t<0?this[this.length+t]:this[t]},pushStack:function(t,e,n){var i=Q.merge(this.constructor(),t);return i.prevObject=this,i.context=this.context,"find"===e?i.selector=this.selector+(this.selector?" ":"")+n:e&&(i.selector=this.selector+"."+e+"("+n+")"),i},each:function(t,e){return Q.each(this,t,e)},ready:function(t){return Q.ready.promise().done(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Y.apply(this,arguments),"slice",Y.call(arguments).join(","))},map:function(t){return this.pushStack(Q.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:U,sort:[].sort,splice:[].splice},Q.fn.init.prototype=Q.fn,Q.extend=Q.fn.extend=function(){var t,n,i,r,o,a,s=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},c=2),"object"!=typeof s&&!Q.isFunction(s)&&(s={}),l===c&&(s=this,--c);c<l;c++)if(null!=(t=arguments[c]))for(n in t)i=s[n],r=t[n],s!==r&&(u&&r&&(Q.isPlainObject(r)||(o=Q.isArray(r)))?(o?(o=!1,a=i&&Q.isArray(i)?i:[]):a=i&&Q.isPlainObject(i)?i:{},s[n]=Q.extend(u,a,r)):r!==e&&(s[n]=r));return s},Q.extend({noConflict:function(e){return t.$===Q&&(t.$=$),e&&t.jQuery===Q&&(t.jQuery=X),Q},isReady:!1,readyWait:1,holdReady:function(t){t?Q.readyWait++:Q.ready(!0)},ready:function(t){if(!0===t?!--Q.readyWait:!Q.isReady){if(!z.body)return setTimeout(Q.ready,1);Q.isReady=!0,!0!==t&&--Q.readyWait>0||(_.resolveWith(z,[Q]),Q.fn.trigger&&Q(z).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===Q.type(t)},isArray:Array.isArray||function(t){return"array"===Q.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):pt[G.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==Q.type(t)||t.nodeType||Q.isWindow(t))return!1;try{if(t.constructor&&!K.call(t,"constructor")&&!K.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;for(n in t);return n===e||K.call(t,n)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){var i;return t&&"string"==typeof t?("boolean"==typeof e&&(n=e,e=0),e=e||z,(i=rt.exec(t))?[e.createElement(i[1])]:(i=Q.buildFragment([t],e,n?null:[]),Q.merge([],(i.cacheable?Q.clone(i.fragment):i.fragment).childNodes))):null},parseJSON:function(e){return e&&"string"==typeof e?(e=Q.trim(e),t.JSON&&t.JSON.parse?t.JSON.parse(e):ot.test(e.replace(st,"@").replace(ct,"]").replace(at,""))?new Function("return "+e)():void Q.error("Invalid JSON: "+e)):null},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(t){i=e}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&tt.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(lt,"ms-").replace(ut,ht)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,n,i){var r,o=0,a=t.length,s=a===e||Q.isFunction(t);if(i)if(s){for(r in t)if(!1===n.apply(t[r],i))break}else for(;o<a&&!1!==n.apply(t[o++],i););else if(s){for(r in t)if(!1===n.call(t[r],r,t[r]))break}else for(;o<a&&!1!==n.call(t[o],o,t[o++]););return t},trim:V&&!V.call("\ufeffÂ ")?function(t){return null==t?"":V.call(t)}:function(t){return null==t?"":(t+"").replace(nt,"")},makeArray:function(t,e){var n,i=e||[];return null!=t&&(n=Q.type(t),null==t.length||"string"===n||"function"===n||"regexp"===n||Q.isWindow(t)?U.call(i,t):Q.merge(i,t)),i},inArray:function(t,e,n){var i;if(e){if(J)return J.call(e,t,n);for(i=e.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,r=t.length,o=0;if("number"==typeof i)for(;o<i;o++)t[r++]=n[o];else for(;n[o]!==e;)t[r++]=n[o++];return t.length=r,t},grep:function(t,e,n){var i,r=[],o=0,a=t.length;for(n=!!n;o<a;o++)i=!!e(t[o],o),n!==i&&r.push(t[o]);return r},map:function(t,n,i){var r,o,a=[],s=0,c=t.length;if(t instanceof Q||c!==e&&"number"==typeof c&&(c>0&&t[0]&&t[c-1]||0===c||Q.isArray(t)))for(;s<c;s++)null!=(r=n(t[s],s,i))&&(a[a.length]=r);else for(o in t)null!=(r=n(t[o],o,i))&&(a[a.length]=r);return a.concat.apply([],a)},guid:1,proxy:function(t,n){var i,r,o;return"string"==typeof n&&(i=t[n],n=t,t=i),Q.isFunction(t)?(r=Y.call(arguments,2),o=function(){return t.apply(n,r.concat(Y.call(arguments)))},o.guid=t.guid=t.guid||Q.guid++,o):e},access:function(t,n,i,r,o,a,s){var c,l=null==i,u=0,h=t.length;if(i&&"object"==typeof i){for(u in i)Q.access(t,n,u,i[u],1,a,r);o=1}else if(r!==e){if(c=s===e&&Q.isFunction(r),l&&(c?(c=n,n=function(t,e,n){return c.call(Q(t),n)}):(n.call(t,r),n=null)),n)for(;u<h;u++)n(t[u],i,c?r.call(t[u],u,n(t[u],i)):r,s);o=1}return o?t:l?n.call(t):h?n(t[0],i):a},now:function(){return(new Date).getTime()}}),Q.ready.promise=function(e){if(!_)if(_=Q.Deferred(),"complete"===z.readyState)setTimeout(Q.ready,1);else if(z.addEventListener)z.addEventListener("DOMContentLoaded",dt,!1),t.addEventListener("load",Q.ready,!1);else{z.attachEvent("onreadystatechange",dt),t.attachEvent("onload",Q.ready);var n=!1;try{n=null==t.frameElement&&z.documentElement}catch(t){}n&&n.doScroll&&function t(){if(!Q.isReady){try{n.doScroll("left")}catch(e){return setTimeout(t,50)}Q.ready()}}()}return _.promise(e)},Q.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){pt["[object "+e+"]"]=e.toLowerCase()}),F=Q(z);var ft={};Q.Callbacks=function(t){t="string"==typeof t?ft[t]||n(t):Q.extend({},t);var i,r,o,a,s,c,l=[],u=!t.once&&[],h=function(e){for(i=t.memory&&e,r=!0,c=a||0,a=0,s=l.length,o=!0;l&&c<s;c++)if(!1===l[c].apply(e[0],e[1])&&t.stopOnFalse){i=!1;break}o=!1,l&&(u?u.length&&h(u.shift()):i?l=[]:d.disable())},d={add:function(){if(l){var e=l.length;(function e(n){Q.each(n,function(n,i){var r=Q.type(i);"function"===r?(!t.unique||!d.has(i))&&l.push(i):i&&i.length&&"string"!==r&&e(i)})})(arguments),o?s=l.length:i&&(a=e,h(i))}return this},remove:function(){return l&&Q.each(arguments,function(t,e){for(var n;(n=Q.inArray(e,l,n))>-1;)l.splice(n,1),o&&(n<=s&&s--,n<=c&&c--)}),this},has:function(t){return Q.inArray(t,l)>-1},empty:function(){return l=[],this},disable:function(){return l=u=i=e,this},disabled:function(){return!l},lock:function(){return u=e,i||d.disable(),this},locked:function(){return!u},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],l&&(!r||u)&&(o?u.push(e):h(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},Q.extend({Deferred:function(t){var e=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Q.Deferred(function(n){Q.each(e,function(e,i){var o=i[0],a=t[e];r[i[1]](Q.isFunction(a)?function(){var t=a.apply(this,arguments);t&&Q.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n:this,[t])}:n[o])}),t=null}).promise()},promise:function(t){return null!=t?Q.extend(t,i):i}},r={};return i.pipe=i.then,Q.each(e,function(t,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[o[0]]=a.fire,r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=Y.call(arguments),a=o.length,s=1!==a||t&&Q.isFunction(t.promise)?a:0,c=1===s?t:Q.Deferred(),l=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?Y.call(arguments):r,i===e?c.notifyWith(n,i):--s||c.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);r<a;r++)o[r]&&Q.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(c.reject).progress(l(r,n,e)):--s;return s||c.resolveWith(i,o),c.promise()}}),Q.support=function(){var e,n,i,r,o,a,s,c,l,u,h,d=z.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),i=d.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=z.createElement("select"),o=r.appendChild(z.createElement("option")),a=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===a.value,optSelected:o.selected,getSetAttribute:"t"!==d.className,enctype:!!z.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===z.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,e.noCloneChecked=a.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!o.disabled;try{delete d.test}catch(t){e.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",h=function(){e.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick"),d.detachEvent("onclick",h)),a=z.createElement("input"),a.value="t",a.setAttribute("type","radio"),e.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),d.appendChild(a),s=z.createDocumentFragment(),s.appendChild(d.lastChild),e.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=a.checked,s.removeChild(a),s.appendChild(d),d.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})c="on"+l,u=c in d,u||(d.setAttribute(c,"return;"),u="function"==typeof d[c]),e[l+"Bubbles"]=u;return Q(function(){var n,i,r,o,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",s=z.getElementsByTagName("body")[0];s&&(n=z.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",s.insertBefore(n,s.firstChild),i=z.createElement("div"),n.appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=i.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",e.reliableHiddenOffsets=u&&0===r[0].offsetHeight,i.innerHTML="",i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===i.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(i,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width,o=z.createElement("div"),o.style.cssText=i.style.cssText=a,o.style.marginRight=o.style.width="0",i.style.width="1px",i.appendChild(o),e.reliableMarginRight=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight)),void 0!==i.style.zoom&&(i.innerHTML="",i.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===i.offsetWidth,i.style.display="block",i.style.overflow="visible",i.innerHTML="<div></div>",i.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==i.offsetWidth,n.style.zoom=1),s.removeChild(n),n=i=r=o=null)}),s.removeChild(d),n=i=r=o=a=s=d=null,e}();var gt=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,mt=/([A-Z])/g;Q.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Q.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return!!(t=t.nodeType?Q.cache[t[Q.expando]]:t[Q.expando])&&!r(t)},data:function(t,n,i,r){if(Q.acceptData(t)){var o,a,s=Q.expando,c="string"==typeof n,l=t.nodeType,u=l?Q.cache:t,h=l?t[s]:t[s]&&s;if(h&&u[h]&&(r||u[h].data)||!c||i!==e)return h||(l?t[s]=h=Q.deletedIds.pop()||Q.guid++:h=s),u[h]||(u[h]={},l||(u[h].toJSON=Q.noop)),"object"!=typeof n&&"function"!=typeof n||(r?u[h]=Q.extend(u[h],n):u[h].data=Q.extend(u[h].data,n)),o=u[h],r||(o.data||(o.data={}),o=o.data),i!==e&&(o[Q.camelCase(n)]=i),c?null==(a=o[n])&&(a=o[Q.camelCase(n)]):a=o,a}},removeData:function(t,e,n){if(Q.acceptData(t)){var i,o,a,s=t.nodeType,c=s?Q.cache:t,l=s?t[Q.expando]:Q.expando;if(c[l]){if(e&&(i=n?c[l]:c[l].data)){Q.isArray(e)||(e in i?e=[e]:(e=Q.camelCase(e),e=e in i?[e]:e.split(" ")));for(o=0,a=e.length;o<a;o++)delete i[e[o]];if(!(n?r:Q.isEmptyObject)(i))return}(n||(delete c[l].data,r(c[l])))&&(s?Q.cleanData([t],!0):Q.support.deleteExpando||c!=c.window?delete c[l]:c[l]=null)}}},_data:function(t,e,n){return Q.data(t,e,n,!0)},acceptData:function(t){var e=t.nodeName&&Q.noData[t.nodeName.toLowerCase()];return!e||!0!==e&&t.getAttribute("classid")===e}}),Q.fn.extend({data:function(t,n){var r,o,a,s,c,l=this[0],u=0,h=null;if(t===e){if(this.length&&(h=Q.data(l),1===l.nodeType&&!Q._data(l,"parsedAttrs"))){for(a=l.attributes,c=a.length;u<c;u++)s=a[u].name,s.indexOf("data-")||(s=Q.camelCase(s.substring(5)),i(l,s,h[s]));Q._data(l,"parsedAttrs",!0)}return h}return"object"==typeof t?this.each(function(){Q.data(this,t)}):(r=t.split(".",2),r[1]=r[1]?"."+r[1]:"",o=r[1]+"!",Q.access(this,function(n){if(n===e)return h=this.triggerHandler("getData"+o,[r[0]]),h===e&&l&&(h=Q.data(l,t),h=i(l,t,h)),h===e&&r[1]?this.data(r[0]):h;r[1]=n,this.each(function(){var e=Q(this);e.triggerHandler("setData"+o,r),Q.data(this,t,n),e.triggerHandler("changeData"+o,r)})},null,n,arguments.length>1,null,!1))},removeData:function(t){return this.each(function(){Q.removeData(this,t)})}}),Q.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Q._data(t,e),n&&(!i||Q.isArray(n)?i=Q._data(t,e,Q.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=Q.queue(t,e),i=n.length,r=n.shift(),o=Q._queueHooks(t,e),a=function(){Q.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q._data(t,n)||Q._data(t,n,{empty:Q.Callbacks("once memory").add(function(){Q.removeData(t,e+"queue",!0),Q.removeData(t,n,!0)})})}}),Q.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),arguments.length<i?Q.queue(this[0],t):n===e?this:this.each(function(){var e=Q.queue(this,t,n);Q._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&Q.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Q.dequeue(this,t)})},delay:function(t,e){return t=Q.fx?Q.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,o=Q.Deferred(),a=this,s=this.length,c=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";s--;)(i=Q._data(a[s],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(c));return c(),o.promise(n)}});var vt,yt,bt,xt=/[\t\r\n]/g,wt=/\r/g,Dt=/^(?:button|input)$/i,kt=/^(?:button|input|object|select|textarea)$/i,Ct=/^a(?:rea|)$/i,Tt=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,St=Q.support.getSetAttribute;Q.fn.extend({attr:function(t,e){return Q.access(this,Q.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Q.removeAttr(this,t)})},prop:function(t,e){return Q.access(this,Q.prop,t,e,arguments.length>1)},removeProp:function(t){return t=Q.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(t){}})},addClass:function(t){var e,n,i,r,o,a,s;if(Q.isFunction(t))return this.each(function(e){Q(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(et),n=0,i=this.length;n<i;n++)if(r=this[n],1===r.nodeType)if(r.className||1!==e.length){for(o=" "+r.className+" ",a=0,s=e.length;a<s;a++)o.indexOf(" "+e[a]+" ")<0&&(o+=e[a]+" ");r.className=Q.trim(o)}else r.className=t;return this},removeClass:function(t){var n,i,r,o,a,s,c;if(Q.isFunction(t))return this.each(function(e){Q(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(n=(t||"").split(et),s=0,c=this.length;s<c;s++)if(r=this[s],1===r.nodeType&&r.className){for(i=(" "+r.className+" ").replace(xt," "),o=0,a=n.length;o<a;o++)for(;i.indexOf(" "+n[o]+" ")>=0;)i=i.replace(" "+n[o]+" "," ");r.className=t?Q.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return Q.isFunction(t)?this.each(function(n){Q(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var r,o=0,a=Q(this),s=e,c=t.split(et);r=c[o++];)s=i?s:!a.hasClass(r),a[s?"addClass":"removeClass"](r);else"undefined"!==n&&"boolean"!==n||(this.className&&Q._data(this,"__className__",this.className),this.className=this.className||!1===t?"":Q._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(xt," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,o=this[0];{if(arguments.length)return r=Q.isFunction(t),this.each(function(i){var o,a=Q(this);1===this.nodeType&&(o=r?t.call(this,i,a.val()):t,null==o?o="":"number"==typeof o?o+="":Q.isArray(o)&&(o=Q.map(o,function(t){return null==t?"":t+""})),n=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,o,"value")!==e||(this.value=o))});if(o)return n=Q.valHooks[o.type]||Q.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(o,"value"))!==e?i:(i=o.value,"string"==typeof i?i.replace(wt,""):null==i?"":i)}}}),Q.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||r<0,a=o?null:[],s=o?r+1:i.length,c=r<0?s:o?r:0;c<s;c++)if(n=i[c],(n.selected||c===r)&&(Q.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!Q.nodeName(n.parentNode,"optgroup"))){if(e=Q(n).val(),o)return e;a.push(e)}return a},set:function(t,e){var n=Q.makeArray(e);return Q(t).find("option").each(function(){this.selected=Q.inArray(Q(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attrFn:{},attr:function(t,n,i,r){var o,a,s,c=t.nodeType;if(t&&3!==c&&8!==c&&2!==c)return r&&Q.isFunction(Q.fn[n])?Q(t)[n](i):void 0===t.getAttribute?Q.prop(t,n,i):((s=1!==c||!Q.isXMLDoc(t))&&(n=n.toLowerCase(),a=Q.attrHooks[n]||(Tt.test(n)?yt:vt)),i!==e?null===i?void Q.removeAttr(t,n):a&&"set"in a&&s&&(o=a.set(t,i,n))!==e?o:(t.setAttribute(n,i+""),i):a&&"get"in a&&s&&null!==(o=a.get(t,n))?o:(o=t.getAttribute(n),null===o?e:o))},removeAttr:function(t,e){var n,i,r,o,a=0;if(e&&1===t.nodeType)for(i=e.split(et);a<i.length;a++)(r=i[a])&&(n=Q.propFix[r]||r,o=Tt.test(r),o||Q.attr(t,r,""),t.removeAttribute(St?r:n),o&&n in t&&(t[n]=!1))},attrHooks:{type:{set:function(t,e){if(Dt.test(t.nodeName)&&t.parentNode)Q.error("type property can't be changed");else if(!Q.support.radioValue&&"radio"===e&&Q.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}},value:{get:function(t,e){return vt&&Q.nodeName(t,"button")?vt.get(t,e):e in t?t.value:null},set:function(t,e,n){if(vt&&Q.nodeName(t,"button"))return vt.set(t,e,n);t.value=e}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,i){var r,o,a,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return a=1!==s||!Q.isXMLDoc(t),a&&(n=Q.propFix[n]||n,o=Q.propHooks[n]),i!==e?o&&"set"in o&&(r=o.set(t,i,n))!==e?r:t[n]=i:o&&"get"in o&&null!==(r=o.get(t,n))?r:t[n]},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):kt.test(t.nodeName)||Ct.test(t.nodeName)&&t.href?0:e}}}}),yt={get:function(t,n){var i,r=Q.prop(t,n);return!0===r||"boolean"!=typeof r&&(i=t.getAttributeNode(n))&&!1!==i.nodeValue?n.toLowerCase():e},set:function(t,e,n){var i;return!1===e?Q.removeAttr(t,n):(i=Q.propFix[n]||n,i in t&&(t[i]=!0),t.setAttribute(n,n.toLowerCase())),n}},St||(bt={name:!0,id:!0,coords:!0},vt=Q.valHooks.button={get:function(t,n){var i;return i=t.getAttributeNode(n),i&&(bt[n]?""!==i.value:i.specified)?i.value:e},set:function(t,e,n){var i=t.getAttributeNode(n);return i||(i=z.createAttribute(n),t.setAttributeNode(i)),i.value=e+""}},Q.each(["width","height"],function(t,e){Q.attrHooks[e]=Q.extend(Q.attrHooks[e],{set:function(t,n){if(""===n)return t.setAttribute(e,"auto"),n}})}),Q.attrHooks.contenteditable={get:vt.get,set:function(t,e,n){""===e&&(e="false"),vt.set(t,e,n)}}),Q.support.hrefNormalized||Q.each(["href","src","width","height"],function(t,n){Q.attrHooks[n]=Q.extend(Q.attrHooks[n],{get:function(t){var i=t.getAttribute(n,2);return null===i?e:i}})}),Q.support.style||(Q.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=e+""}}),Q.support.optSelected||(Q.propHooks.selected=Q.extend(Q.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),Q.support.enctype||(Q.propFix.enctype="encoding"),Q.support.checkOn||Q.each(["radio","checkbox"],function(){Q.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]=Q.extend(Q.valHooks[this],{set:function(t,e){if(Q.isArray(e))return t.checked=Q.inArray(Q(t).val(),e)>=0}})});var Mt=/^(?:textarea|input|select)$/i,Nt=/^([^\.]*|)(?:\.(.+)|)$/,Et=/(?:^|\s)hover(\.\S+|)\b/,Lt=/^key/,Bt=/^(?:mouse|contextmenu)|click/,At=/^(?:focusinfocus|focusoutblur)$/,Rt=function(t){return Q.event.special.hover?t:t.replace(Et,"mouseenter$1 mouseleave$1")};Q.event={add:function(t,n,i,r,o){var a,s,c,l,u,h,d,p,f,g,m;if(3!==t.nodeType&&8!==t.nodeType&&n&&i&&(a=Q._data(t))){for(i.handler&&(f=i,i=f.handler,o=f.selector),i.guid||(i.guid=Q.guid++),c=a.events,c||(a.events=c={}),s=a.handle,s||(a.handle=s=function(t){return void 0===Q||t&&Q.event.triggered===t.type?e:Q.event.dispatch.apply(s.elem,arguments)},s.elem=t),n=Q.trim(Rt(n)).split(" "),l=0;l<n.length;l++)u=Nt.exec(n[l])||[],h=u[1],d=(u[2]||"").split(".").sort(),m=Q.event.special[h]||{},h=(o?m.delegateType:m.bindType)||h,m=Q.event.special[h]||{},p=Q.extend({type:h,origType:u[1],data:r,handler:i,guid:i.guid,selector:o,needsContext:o&&Q.expr.match.needsContext.test(o),namespace:d.join(".")},f),g=c[h],g||(g=c[h]=[],g.delegateCount=0,m.setup&&!1!==m.setup.call(t,r,d,s)||(t.addEventListener?t.addEventListener(h,s,!1):t.attachEvent&&t.attachEvent("on"+h,s))),m.add&&(m.add.call(t,p),p.handler.guid||(p.handler.guid=i.guid)),o?g.splice(g.delegateCount++,0,p):g.push(p),Q.event.global[h]=!0;t=null}},global:{},remove:function(t,e,n,i,r){var o,a,s,c,l,u,h,d,p,f,g,m=Q.hasData(t)&&Q._data(t);if(m&&(d=m.events)){for(e=Q.trim(Rt(e||"")).split(" "),o=0;o<e.length;o++)if(a=Nt.exec(e[o])||[],s=c=a[1],l=a[2],s){for(p=Q.event.special[s]||{},s=(i?p.delegateType:p.bindType)||s,f=d[s]||[],u=f.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=0;h<f.length;h++)g=f[h],(r||c===g.origType)&&(!n||n.guid===g.guid)&&(!l||l.test(g.namespace))&&(!i||i===g.selector||"**"===i&&g.selector)&&(f.splice(h--,1),g.selector&&f.delegateCount--,p.remove&&p.remove.call(t,g));0===f.length&&u!==f.length&&((!p.teardown||!1===p.teardown.call(t,l,m.handle))&&Q.removeEvent(t,s,m.handle),delete d[s])}else for(s in d)Q.event.remove(t,s+e[o],n,i,!0);Q.isEmptyObject(d)&&(delete m.handle,Q.removeData(t,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,r,o){if(!r||3!==r.nodeType&&8!==r.nodeType){var a,s,c,l,u,h,d,p,f,g,m=n.type||n,v=[];if(At.test(m+Q.event.triggered))return;if(m.indexOf("!")>=0&&(m=m.slice(0,-1),s=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),(!r||Q.event.customEvent[m])&&!Q.event.global[m])return;if(n="object"==typeof n?n[Q.expando]?n:new Q.Event(m,n):new Q.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=s,n.namespace=v.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=m.indexOf(":")<0?"on"+m:"",!r){a=Q.cache;for(c in a)a[c].events&&a[c].events[m]&&Q.event.trigger(n,i,a[c].handle.elem,!0);return}if(n.result=e,n.target||(n.target=r),i=null!=i?Q.makeArray(i):[],i.unshift(n),d=Q.event.special[m]||{},d.trigger&&!1===d.trigger.apply(r,i))return;if(f=[[r,d.bindType||m]],!o&&!d.noBubble&&!Q.isWindow(r)){for(g=d.delegateType||m,l=At.test(g+m)?r:r.parentNode,u=r;l;l=l.parentNode)f.push([l,g]),u=l;u===(r.ownerDocument||z)&&f.push([u.defaultView||u.parentWindow||t,g])}for(c=0;c<f.length&&!n.isPropagationStopped();c++)l=f[c][0],n.type=f[c][1],p=(Q._data(l,"events")||{})[n.type]&&Q._data(l,"handle"),p&&p.apply(l,i),(p=h&&l[h])&&Q.acceptData(l)&&p.apply&&!1===p.apply(l,i)&&n.preventDefault();return n.type=m,!o&&!n.isDefaultPrevented()&&(!d._default||!1===d._default.apply(r.ownerDocument,i))&&("click"!==m||!Q.nodeName(r,"a"))&&Q.acceptData(r)&&h&&r[m]&&("focus"!==m&&"blur"!==m||0!==n.target.offsetWidth)&&!Q.isWindow(r)&&(u=r[h],u&&(r[h]=null),Q.event.triggered=m,r[m](),Q.event.triggered=e,u&&(r[h]=u)),n.result}},dispatch:function(n){n=Q.event.fix(n||t.event);var i,r,o,a,s,c,l,u,h,d=(Q._data(this,"events")||{})[n.type]||[],p=d.delegateCount,f=Y.call(arguments),g=!n.exclusive&&!n.namespace,m=Q.event.special[n.type]||{},v=[];if(f[0]=n,n.delegateTarget=this,!m.preDispatch||!1!==m.preDispatch.call(this,n)){if(p&&(!n.button||"click"!==n.type))for(o=n.target;o!=this;o=o.parentNode||this)if(!0!==o.disabled||"click"!==n.type){for(s={},l=[],i=0;i<p;i++)u=d[i],h=u.selector,s[h]===e&&(s[h]=u.needsContext?Q(h,this).index(o)>=0:Q.find(h,this,null,[o]).length),s[h]&&l.push(u);l.length&&v.push({elem:o,matches:l})}for(d.length>p&&v.push({elem:this,matches:d.slice(p)}),i=0;i<v.length&&!n.isPropagationStopped();i++)for(c=v[i],n.currentTarget=c.elem,r=0;r<c.matches.length&&!n.isImmediatePropagationStopped();r++)u=c.matches[r],(g||!n.namespace&&!u.namespace||n.namespace_re&&n.namespace_re.test(u.namespace))&&(n.data=u.data,n.handleObj=u,(a=((Q.event.special[u.origType]||{}).handle||u.handler).apply(c.elem,f))!==e&&(n.result=a,!1===a&&(n.preventDefault(),n.stopPropagation())));return m.postDispatch&&m.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,o,a=n.button,s=n.fromElement;return null==t.pageX&&null!=n.clientX&&(i=t.target.ownerDocument||z,r=i.documentElement,o=i.body,t.pageX=n.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),t.pageY=n.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?n.toElement:s),!t.which&&a!==e&&(t.which=1&a?1:2&a?3:4&a?2:0),t}},fix:function(t){if(t[Q.expando])return t;var e,n,i=t,r=Q.event.fixHooks[t.type]||{},o=r.props?this.props.concat(r.props):this.props;for(t=Q.Event(i),e=o.length;e;)n=o[--e],t[n]=i[n];return t.target||(t.target=i.srcElement||z),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,r.filter?r.filter(t,i):t},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,n){Q.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,n,i){var r=Q.extend(new Q.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?Q.event.trigger(r,null,e):Q.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},Q.event.handle=Q.event.dispatch,Q.removeEvent=z.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(void 0===t[i]&&(t[i]=null),t.detachEvent(i,n))},Q.Event=function(t,e){if(!(this instanceof Q.Event))return new Q.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||!1===t.returnValue||t.getPreventDefault&&t.getPreventDefault()?a:o):this.type=t,e&&Q.extend(this,e),this.timeStamp=t&&t.timeStamp||Q.now(),this[Q.expando]=!0},Q.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var t=this.originalEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var t=this.originalEvent;t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},Q.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){Q.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;o.selector;return r&&(r===i||Q.contains(i,r))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),Q.support.submitBubbles||(Q.event.special.submit={setup:function(){if(Q.nodeName(this,"form"))return!1;Q.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=Q.nodeName(n,"input")||Q.nodeName(n,"button")?n.form:e;i&&!Q._data(i,"_submit_attached")&&(Q.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),Q._data(i,"_submit_attached",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&Q.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){if(Q.nodeName(this,"form"))return!1;Q.event.remove(this,"._submit")}}),Q.support.changeBubbles||(Q.event.special.change={setup:function(){if(Mt.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(Q.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),Q.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),Q.event.simulate("change",this,t,!0)})),!1;Q.event.add(this,"beforeactivate._change",function(t){var e=t.target;Mt.test(e.nodeName)&&!Q._data(e,"_change_attached")&&(Q.event.add(e,"change._change",function(t){this.parentNode&&!t.isSimulated&&!t.isTrigger&&Q.event.simulate("change",this.parentNode,t,!0)}),Q._data(e,"_change_attached",!0))})},handle:function(t){var e=t.target;if(this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type)return t.handleObj.handler.apply(this,arguments)},teardown:function(){return Q.event.remove(this,"._change"),!Mt.test(this.nodeName)}}),Q.support.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){Q.event.simulate(e,t.target,Q.event.fix(t),!0)};Q.event.special[e]={setup:function(){0==n++&&z.addEventListener(t,i,!0)},teardown:function(){0==--n&&z.removeEventListener(t,i,!0)}}}),Q.fn.extend({on:function(t,n,i,r,a){var s,c;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(c in t)this.on(c,n,i,t[c],a);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),!1===r)r=o;else if(!r)return this;return 1===a&&(s=r,r=function(t){return Q().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=Q.guid++)),this.each(function(){Q.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,a;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,Q(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(a in t)this.off(a,n,t[a]);return this}return!1!==n&&"function"!=typeof n||(i=n,n=e),!1===i&&(i=o),this.each(function(){Q.event.remove(this,t,i,n)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,n){return Q(this.context).on(t,this.selector,e,n),this},die:function(t,e){return Q(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},trigger:function(t,e){return this.each(function(){Q.event.trigger(t,e,this)})},triggerHandler:function(t,e){if(this[0])return Q.event.trigger(t,e,this[0],!0)},toggle:function(t){var e=arguments,n=t.guid||Q.guid++,i=0,r=function(n){var r=(Q._data(this,"lastToggle"+t.guid)||0)%i;return Q._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),e[r].apply(this,arguments)||!1};for(r.guid=n;i<e.length;)e[i++].guid=n;return this.click(r)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Q.fn[e]=function(t,n){return null==n&&(n=t,t=null),arguments.length>0?this.on(e,null,t,n):this.trigger(e)},Lt.test(e)&&(Q.event.fixHooks[e]=Q.event.keyHooks),Bt.test(e)&&(Q.event.fixHooks[e]=Q.event.mouseHooks)}),function(t,e){function n(t,e,n,i){n=n||[],e=e||B;var r,o,a,s,c=e.nodeType;if(!t||"string"!=typeof t)return n;if(1!==c&&9!==c)return[];if(!(a=w(e))&&!i&&(r=nt.exec(t)))if(s=r[1]){if(9===c){if(!(o=e.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&D(e,o)&&o.id===s)return n.push(o),n}else{if(r[2])return P.apply(n,O.call(e.getElementsByTagName(t),0)),n;if((s=r[3])&&dt&&e.getElementsByClassName)return P.apply(n,O.call(e.getElementsByClassName(s),0)),n}return g(t.replace(V,"$1"),e,n,i,a)}function i(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function r(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function o(t){return F(function(e){return e=+e,F(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function a(t,e,n){if(t===e)return n;for(var i=t.nextSibling;i;){if(i===e)return-1;i=i.nextSibling}return 1}function s(t,e){var i,r,o,a,s,c,l,u=W[E][t+" "];if(u)return e?0:u.slice(0);for(s=t,c=[],l=b.preFilter;s;){i&&!(r=Z.exec(s))||(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),i=!1,(r=tt.exec(s))&&(o.push(i=new L(r.shift())),s=s.slice(i.length),i.type=r[0].replace(V," "));for(a in b.filter)(r=st[a].exec(s))&&(!l[a]||(r=l[a](r)))&&(o.push(i=new L(r.shift())),s=s.slice(i.length),i.type=a,i.matches=r);if(!i)break}return e?s.length:s?n.error(t):W(t,c).slice(0)}function c(t,e,n){var i=e.dir,r=n&&"parentNode"===e.dir,o=H++;return e.first?function(e,n,o){for(;e=e[i];)if(r||1===e.nodeType)return t(e,n,o)}:function(e,n,a){if(a){for(;e=e[i];)if((r||1===e.nodeType)&&t(e,n,a))return e}else for(var s,c=R+" "+o+" ",l=c+v;e=e[i];)if(r||1===e.nodeType){if((s=e[E])===l)return e.sizset;if("string"==typeof s&&0===s.indexOf(c)){if(e.sizset)return e}else{if(e[E]=l,t(e,n,a))return e.sizset=!0,e;e.sizset=!1}}}}function l(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function u(t,e,n,i,r){for(var o,a=[],s=0,c=t.length,l=null!=e;s<c;s++)(o=t[s])&&(n&&!n(o,i,r)||(a.push(o),l&&e.push(s)));return a}function h(t,e,n,i,r,o){return i&&!i[E]&&(i=h(i)),r&&!r[E]&&(r=h(r,o)),F(function(o,a,s,c){var l,h,d,p=[],g=[],m=a.length,v=o||f(e||"*",s.nodeType?[s]:s,[]),y=!t||!o&&e?v:u(v,p,t,s,c),b=n?r||(o?t:m||i)?[]:a:y;if(n&&n(y,b,s,c),i)for(l=u(b,g),i(l,[],s,c),h=l.length;h--;)(d=l[h])&&(b[g[h]]=!(y[g[h]]=d));if(o){if(r||t){if(r){for(l=[],h=b.length;h--;)(d=b[h])&&l.push(y[h]=d);r(null,b=[],l,c)}for(h=b.length;h--;)(d=b[h])&&(l=r?I.call(o,d):p[h])>-1&&(o[l]=!(a[l]=d))}}else b=u(b===a?b.splice(m,b.length):b),r?r(null,a,b,c):P.apply(a,b)})}function d(t){for(var e,n,i,r=t.length,o=b.relative[t[0].type],a=o||b.relative[" "],s=o?1:0,u=c(function(t){return t===e},a,!0),p=c(function(t){return I.call(e,t)>-1},a,!0),f=[function(t,n,i){return!o&&(i||n!==S)||((e=n).nodeType?u(t,n,i):p(t,n,i))}];s<r;s++)if(n=b.relative[t[s].type])f=[c(l(f),n)];else{if(n=b.filter[t[s].type].apply(null,t[s].matches),n[E]){for(i=++s;i<r&&!b.relative[t[i].type];i++);return h(s>1&&l(f),s>1&&t.slice(0,s-1).join("").replace(V,"$1"),n,s<i&&d(t.slice(s,i)),i<r&&d(t=t.slice(i)),i<r&&t.join(""))}f.push(n)}return l(f)}function p(t,e){var i=e.length>0,r=t.length>0,o=function(a,s,c,l,h){var d,p,f,g=[],m=0,y="0",x=a&&[],w=null!=h,D=S,k=a||r&&b.find.TAG("*",h&&s.parentNode||s),C=R+=null==D?1:Math.E;for(w&&(S=s!==B&&s,v=o.el);null!=(d=k[y]);y++){if(r&&d){for(p=0;f=t[p];p++)if(f(d,s,c)){l.push(d);break}w&&(R=C,v=++o.el)}i&&((d=!f&&d)&&m--,a&&x.push(d))}if(m+=y,i&&y!==m){for(p=0;f=e[p];p++)f(x,g,s,c);if(a){if(m>0)for(;y--;)!x[y]&&!g[y]&&(g[y]=j.call(l));g=u(g)}P.apply(l,g),w&&!a&&g.length>0&&m+e.length>1&&n.uniqueSort(l)}return w&&(R=C,S=D),x};return o.el=0,i?F(o):o}function f(t,e,i){for(var r=0,o=e.length;r<o;r++)n(t,e[r],i);return i}function g(t,e,n,i,r){var o,a,c,l,u,h=s(t);h.length;if(!i&&1===h.length){if(a=h[0]=h[0].slice(0),a.length>2&&"ID"===(c=a[0]).type&&9===e.nodeType&&!r&&b.relative[a[1].type]){if(!(e=b.find.ID(c.matches[0].replace(at,""),e,r)[0]))return n;t=t.slice(a.shift().length)}for(o=st.POS.test(t)?-1:a.length-1;o>=0&&(c=a[o],!b.relative[l=c.type]);o--)if((u=b.find[l])&&(i=u(c.matches[0].replace(at,""),it.test(a[0].type)&&e.parentNode||e,r))){if(a.splice(o,1),!(t=i.length&&a.join("")))return P.apply(n,O.call(i,0)),n;break}}return k(t,h)(i,e,r,n,it.test(t)),n}function m(){}var v,y,b,x,w,D,k,C,T,S,M=!0,N="undefined",E=("sizcache"+Math.random()).replace(".",""),L=String,B=t.document,A=B.documentElement,R=0,H=0,j=[].pop,P=[].push,O=[].slice,I=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1},F=function(t,e){return t[E]=null==e||e,t},_=function(){var t={},e=[];return F(function(n,i){return e.push(n)>b.cacheLength&&delete t[e.shift()],t[n+" "]=i},t)},z=_(),W=_(),q=_(),X="[\\x20\\t\\r\\n\\f]",$="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",U=$.replace("w","w#"),Y="([*^$|!~]?=)",J="\\["+X+"*("+$+")"+X+"*(?:"+Y+X+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+U+")|)|)"+X+"*\\]",G=":("+$+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+J+")|[^:]|\\\\.)*|.*))\\)|)",K=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+X+"*((?:-\\d)?\\d*)"+X+"*\\)|)(?=[^-]|$)",V=new RegExp("^"+X+"+|((?:^|[^\\\\])(?:\\\\.)*)"+X+"+$","g"),Z=new RegExp("^"+X+"*,"+X+"*"),tt=new RegExp("^"+X+"*([\\x20\\t\\r\\n\\f>+~])"+X+"*"),et=new RegExp(G),nt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,it=/[\x20\t\r\n\f]*[+~]/,rt=/h\d/i,ot=/input|select|textarea|button/i,at=/\\(?!\\)/g,st={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),NAME:new RegExp("^\\[name=['\"]?("+$+")['\"]?\\]"),TAG:new RegExp("^("+$.replace("w","w*")+")"),ATTR:new RegExp("^"+J),PSEUDO:new RegExp("^"+G),POS:new RegExp(K,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+X+"*(even|odd|(([+-]|)(\\d*)n|)"+X+"*(?:([+-]|)"+X+"*(\\d+)|))"+X+"*\\)|)","i"),needsContext:new RegExp("^"+X+"*[>+~]|"+K,"i")},ct=function(t){var e=B.createElement("div");try{return t(e)}catch(t){return!1}finally{e=null}},lt=ct(function(t){return t.appendChild(B.createComment("")),!t.getElementsByTagName("*").length}),ut=ct(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==N&&"#"===t.firstChild.getAttribute("href")}),ht=ct(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),dt=ct(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!t.getElementsByClassName||!t.getElementsByClassName("e").length)&&(t.lastChild.className="e",2===t.getElementsByClassName("e").length)}),pt=ct(function(t){t.id=E+0,t.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>",A.insertBefore(t,A.firstChild);var e=B.getElementsByName&&B.getElementsByName(E).length===2+B.getElementsByName(E+0).length;return y=!B.getElementById(E),A.removeChild(t),e});try{O.call(A.childNodes,0)[0].nodeType}catch(t){O=function(t){for(var e,n=[];e=this[t];t++)n.push(e);return n}}n.matches=function(t,e){return n(t,null,null,e)},n.matchesSelector=function(t,e){return n(e,null,null,[t]).length>0},x=n.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=x(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=x(e);return n},w=n.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},D=n.contains=A.contains?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:A.compareDocumentPosition?function(t,e){return e&&!!(16&t.compareDocumentPosition(e))}:function(t,e){for(;e=e.parentNode;)if(e===t)return!0;return!1},n.attr=function(t,e){var n,i=w(t);return i||(e=e.toLowerCase()),(n=b.attrHandle[e])?n(t):i||ht?t.getAttribute(e):(n=t.getAttributeNode(e),n?"boolean"==typeof t[e]?t[e]?e:null:n.specified?n.value:null:null)},b=n.selectors={cacheLength:50,createPseudo:F,match:st,attrHandle:ut?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},find:{ID:y?function(t,e,n){if(typeof e.getElementById!==N&&!n){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}}:function(t,n,i){if(typeof n.getElementById!==N&&!i){var r=n.getElementById(t);return r?r.id===t||typeof r.getAttributeNode!==N&&r.getAttributeNode("id").value===t?[r]:e:[]}},TAG:lt?function(t,e){if(typeof e.getElementsByTagName!==N)return e.getElementsByTagName(t)}:function(t,e){var n=e.getElementsByTagName(t);if("*"===t){for(var i,r=[],o=0;i=n[o];o++)1===i.nodeType&&r.push(i);return r}return n},NAME:pt&&function(t,e){if(typeof e.getElementsByName!==N)return e.getElementsByName(name)},CLASS:dt&&function(t,e,n){if(typeof e.getElementsByClassName!==N&&!n)return e.getElementsByClassName(t)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(at,""),t[3]=(t[4]||t[5]||"").replace(at,""),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1]?(t[2]||n.error(t[0]),t[3]=+(t[3]?t[4]+(t[5]||1):2*("even"===t[2]||"odd"===t[2])),t[4]=+(t[6]+t[7]||"odd"===t[2])):t[2]&&n.error(t[0]),t},PSEUDO:function(t){var e,n;return st.CHILD.test(t[0])?null:(t[3]?t[2]=t[3]:(e=t[4])&&(et.test(e)&&(n=s(e,!0))&&(n=e.indexOf(")",e.length-n)-e.length)&&(e=e.slice(0,n),t[0]=t[0].slice(0,n)),t[2]=e),t.slice(0,3))}},filter:{ID:y?function(t){return t=t.replace(at,""),function(e){return e.getAttribute("id")===t}}:function(t){return t=t.replace(at,""),function(e){var n=typeof e.getAttributeNode!==N&&e.getAttributeNode("id");return n&&n.value===t}},TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(at,"").toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=z[E][t+" "];return e||(e=new RegExp("(^|"+X+")"+t+"("+X+"|$)"))&&z(t,function(t){return e.test(t.className||typeof t.getAttribute!==N&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(r,o){var a=n.attr(r,t);return null==a?"!="===e:!e||(a+="","="===e?a===i:"!="===e?a!==i:"^="===e?i&&0===a.indexOf(i):"*="===e?i&&a.indexOf(i)>-1:"$="===e?i&&a.substr(a.length-i.length)===i:"~="===e?(" "+a+" ").indexOf(i)>-1:"|="===e&&(a===i||a.substr(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i){return"nth"===t?function(t){var e,r,o=t.parentNode;if(1===n&&0===i)return!0;if(o)for(r=0,e=o.firstChild;e&&(1!==e.nodeType||(r++,t!==e));e=e.nextSibling);return(r-=i)===n||r%n==0&&r/n>=0}:function(e){var n=e;switch(t){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===t)return!0;n=e;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(t,e){var i,r=b.pseudos[t]||b.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return r[E]?r(e):r.length>1?(i=[t,t,"",e],b.setFilters.hasOwnProperty(t.toLowerCase())?F(function(t,n){for(var i,o=r(t,e),a=o.length;a--;)i=I.call(t,o[a]),t[i]=!(n[i]=o[a])}):function(t){return r(t,0,i)}):r}},pseudos:{not:F(function(t){var e=[],n=[],i=k(t.replace(V,"$1"));return i[E]?F(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),!n.pop()}}),has:F(function(t){return function(e){return n(t,e).length>0}}),contains:F(function(t){return function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},parent:function(t){return!b.pseudos.empty(t)},empty:function(t){var e;for(t=t.firstChild;t;){if(t.nodeName>"@"||3===(e=t.nodeType)||4===e)return!1;t=t.nextSibling}return!0},header:function(t){return rt.test(t.nodeName)},text:function(t){var e,n;return"input"===t.nodeName.toLowerCase()&&"text"===(e=t.type)&&(null==(n=t.getAttribute("type"))||n.toLowerCase()===e)},radio:i("radio"),checkbox:i("checkbox"),file:i("file"),password:i("password"),image:i("image"),submit:r("submit"),reset:r("reset"),button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return ot.test(t.nodeName)},focus:function(t){var e=t.ownerDocument;return t===e.activeElement&&(!e.hasFocus||e.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},active:function(t){return t===t.ownerDocument.activeElement},first:o(function(){return[0]}),last:o(function(t,e){return[e-1]}),eq:o(function(t,e,n){return[n<0?n+e:n]}),even:o(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:o(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:o(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:o(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},C=A.compareDocumentPosition?function(t,e){return t===e?(T=!0,0):(t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e):t.compareDocumentPosition)?-1:1}:function(t,e){if(t===e)return T=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var n,i,r=[],o=[],s=t.parentNode,c=e.parentNode,l=s;if(s===c)return a(t,e);if(!s)return-1;if(!c)return 1;for(;l;)r.unshift(l),l=l.parentNode;for(l=c;l;)o.unshift(l),l=l.parentNode;n=r.length,i=o.length;for(var u=0;u<n&&u<i;u++)if(r[u]!==o[u])return a(r[u],o[u]);return u===n?a(t,o[u],-1):a(r[u],e,1)},[0,0].sort(C),M=!T,n.uniqueSort=function(t){var e,n=[],i=1,r=0;if(T=M,t.sort(C),T){for(;e=t[i];i++)e===t[i-1]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},n.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},k=n.compile=function(t,e){var n,i=[],r=[],o=q[E][t+" "];if(!o){for(e||(e=s(t)),n=e.length;n--;)o=d(e[n]),o[E]?i.push(o):r.push(o);o=q(t,p(r,i))}return o},B.querySelectorAll&&function(){var t,e=g,i=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,o=[":focus"],a=[":active"],c=A.matchesSelector||A.mozMatchesSelector||A.webkitMatchesSelector||A.oMatchesSelector||A.msMatchesSelector;ct(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||o.push("\\["+X+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||o.push(":checked")}),ct(function(t){t.innerHTML="<p test=''></p>",t.querySelectorAll("[test^='']").length&&o.push("[*^$]="+X+"*(?:\"\"|'')"),t.innerHTML="<input type='hidden'/>",t.querySelectorAll(":enabled").length||o.push(":enabled",":disabled")}),o=new RegExp(o.join("|")),g=function(t,n,r,a,c){if(!a&&!c&&!o.test(t)){var l,u,h=!0,d=E,p=n,f=9===n.nodeType&&t;if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){for(l=s(t),(h=n.getAttribute("id"))?d=h.replace(i,"\\$&"):n.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+l[u].join("");p=it.test(t)&&n.parentNode||n,f=l.join(",")}if(f)try{return P.apply(r,O.call(p.querySelectorAll(f),0)),r}catch(t){}finally{h||n.removeAttribute("id")}}return e(t,n,r,a,c)},c&&(ct(function(e){t=c.call(e,"div");try{c.call(e,"[test!='']:sizzle"),a.push("!=",G)}catch(t){}}),a=new RegExp(a.join("|")),n.matchesSelector=function(e,i){if(i=i.replace(r,"='$1']"),!w(e)&&!a.test(i)&&!o.test(i))try{var s=c.call(e,i);if(s||t||e.document&&11!==e.document.nodeType)return s}catch(t){}return n(i,null,null,[e]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=m.prototype=b.pseudos,b.setFilters=new m,n.attr=Q.attr,Q.find=n,Q.expr=n.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=n.uniqueSort,Q.text=n.getText,Q.isXMLDoc=n.isXML,Q.contains=n.contains}(t);var Ht=/Until$/,jt=/^(?:parents|prev(?:Until|All))/,Pt=/^.[^:#\[\.,]*$/,Ot=Q.expr.match.needsContext,It={children:!0,contents:!0,next:!0,prev:!0};Q.fn.extend({find:function(t){var e,n,i,r,o,a,s=this;if("string"!=typeof t)return Q(t).filter(function(){for(e=0,n=s.length;e<n;e++)if(Q.contains(s[e],this))return!0});for(a=this.pushStack("","find",t),e=0,n=this.length;e<n;e++)if(i=a.length,Q.find(t,this[e],a),e>0)for(r=i;r<a.length;r++)for(o=0;o<i;o++)if(a[o]===a[r]){a.splice(r--,1);break}return a},has:function(t){var e,n=Q(t,this),i=n.length;return this.filter(function(){for(e=0;e<i;e++)if(Q.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(l(this,t,!1),"not",t)},filter:function(t){return this.pushStack(l(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?Ot.test(t)?Q(t,this.context).index(this[0])>=0:Q.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=Ot.test(t)||"string"!=typeof t?Q(t,e||this.context):0;i<r;i++)for(n=this[i];n&&n.ownerDocument&&n!==e&&11!==n.nodeType;){if(a?a.index(n)>-1:Q.find.matchesSelector(n,t)){o.push(n);break}n=n.parentNode}return o=o.length>1?Q.unique(o):o,this.pushStack(o,"closest",t)},index:function(t){return t?"string"==typeof t?Q.inArray(this[0],Q(t)):Q.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var n="string"==typeof t?Q(t,e):Q.makeArray(t&&t.nodeType?[t]:t),i=Q.merge(this.get(),n);return this.pushStack(s(n[0])||s(i[0])?i:Q.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Q.fn.andSelf=Q.fn.addBack,Q.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Q.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Q.dir(t,"parentNode",n)},next:function(t){return c(t,"nextSibling")},prev:function(t){return c(t,"previousSibling")},nextAll:function(t){return Q.dir(t,"nextSibling")},prevAll:function(t){return Q.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Q.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Q.dir(t,"previousSibling",n)},siblings:function(t){return Q.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Q.sibling(t.firstChild)},contents:function(t){return Q.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:Q.merge([],t.childNodes)}},function(t,e){Q.fn[t]=function(n,i){var r=Q.map(this,e,n);return Ht.test(t)||(i=n),i&&"string"==typeof i&&(r=Q.filter(i,r)),r=this.length>1&&!It[t]?Q.unique(r):r,this.length>1&&jt.test(t)&&(r=r.reverse()),this.pushStack(r,t,Y.call(arguments).join(","))}}),Q.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?Q.find.matchesSelector(e[0],t)?[e[0]]:[]:Q.find.matches(t,e)},dir:function(t,n,i){for(var r=[],o=t[n];o&&9!==o.nodeType&&(i===e||1!==o.nodeType||!Q(o).is(i));)1===o.nodeType&&r.push(o),o=o[n];return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var Ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",_t=/ jQuery\d+="(?:null|\d+)"/g,zt=/^\s+/,Wt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qt=/<([\w:]+)/,Xt=/<tbody/i,$t=/<|&#?\w+;/,Ut=/<(?:script|style|link)/i,Yt=/<(?:script|object|embed|option|style)/i,Jt=new RegExp("<(?:"+Ft+")[\\s/>]","i"),Gt=/^(?:checkbox|radio)$/,Kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/\/(java|ecma)script/i,Qt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},te=u(z),ee=te.appendChild(z.createElement("div"));Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,Q.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),Q.fn.extend({text:function(t){return Q.access(this,function(t){return t===e?Q.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(Q.isFunction(t))return this.each(function(e){Q(this).wrapAll(t.call(this,e))});if(this[0]){var e=Q(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return Q.isFunction(t)?this.each(function(e){Q(this).wrapInner(t.call(this,e))}):this.each(function(){var e=Q(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Q.isFunction(t);return this.each(function(n){Q(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)});if(arguments.length){var t=Q.clean(arguments);return this.pushStack(Q.merge(t,this),"before",this.selector)}},after:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=Q.clean(arguments);return this.pushStack(Q.merge(this,t),"after",this.selector)}},remove:function(t,e){for(var n,i=0;null!=(n=this[i]);i++)t&&!Q.filter(t,[n]).length||(!e&&1===n.nodeType&&(Q.cleanData(n.getElementsByTagName("*")),Q.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)for(1===t.nodeType&&Q.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return Q.clone(this,t,e)})},html:function(t){return Q.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(_t,""):e;if("string"==typeof t&&!Ut.test(t)&&(Q.support.htmlSerialize||!Jt.test(t))&&(Q.support.leadingWhitespace||!zt.test(t))&&!Zt[(qt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Wt,"<$1></$2>");try{for(;i<r;i++)n=this[i]||{},1===n.nodeType&&(Q.cleanData(n.getElementsByTagName("*")),n.innerHTML=t);n=0}catch(t){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){return s(this[0])?this.length?this.pushStack(Q(Q.isFunction(t)?t():t),"replaceWith",t):this:Q.isFunction(t)?this.each(function(e){var n=Q(this),i=n.html();n.replaceWith(t.call(this,e,i))}):("string"!=typeof t&&(t=Q(t).detach()),this.each(function(){var e=this.nextSibling,n=this.parentNode;Q(this).remove(),e?Q(e).before(t):Q(n).append(t)}))},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,i){t=[].concat.apply([],t);var r,o,a,s,c=0,l=t[0],u=[],d=this.length;if(!Q.support.checkClone&&d>1&&"string"==typeof l&&Kt.test(l))return this.each(function(){Q(this).domManip(t,n,i)});if(Q.isFunction(l))return this.each(function(r){var o=Q(this);t[0]=l.call(this,r,n?o.html():e),o.domManip(t,n,i)});if(this[0]){if(r=Q.buildFragment(t,this,u),a=r.fragment,o=a.firstChild,1===a.childNodes.length&&(a=o),o)for(n=n&&Q.nodeName(o,"tr"),s=r.cacheable||d-1;c<d;c++)i.call(n&&Q.nodeName(this[c],"table")?h(this[c],"tbody"):this[c],c===s?a:Q.clone(a,!0,!0));a=o=null,u.length&&Q.each(u,function(t,e){e.src?Q.ajax?Q.ajax({url:e.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):Q.error("no ajax"):Q.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Qt,"")),e.parentNode&&e.parentNode.removeChild(e)})}return this}}),Q.buildFragment=function(t,n,i){var r,o,a,s=t[0];return n=n||z,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,1===t.length&&"string"==typeof s&&s.length<512&&n===z&&"<"===s.charAt(0)&&!Yt.test(s)&&(Q.support.checkClone||!Kt.test(s))&&(Q.support.html5Clone||!Jt.test(s))&&(o=!0,r=Q.fragments[s],a=r!==e),r||(r=n.createDocumentFragment(),Q.clean(t,n,r,i),o&&(Q.fragments[s]=a&&r)),{fragment:r,cacheable:o}},Q.fragments={},Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Q.fn[t]=function(n){var i,r=0,o=[],a=Q(n),s=a.length,c=1===this.length&&this[0].parentNode;if((null==c||c&&11===c.nodeType&&1===c.childNodes.length)&&1===s)return a[e](this[0]),this;for(;r<s;r++)i=(r>0?this.clone(!0):this).get(),Q(a[r])[e](i),o=o.concat(i);return this.pushStack(o,t,a.selector)}}),Q.extend({clone:function(t,e,n){var i,r,o,a;if(Q.support.html5Clone||Q.isXMLDoc(t)||!Jt.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(ee.innerHTML=t.outerHTML,ee.removeChild(a=ee.firstChild)),!(Q.support.noCloneEvent&&Q.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Q.isXMLDoc(t)))for(p(t,a),i=f(t),r=f(a),o=0;i[o];++o)r[o]&&p(i[o],r[o]);if(e&&(d(t,a),n))for(i=f(t),r=f(a),o=0;i[o];++o)d(i[o],r[o]);return i=r=null,a},clean:function(t,e,n,i){var r,o,a,s,c,l,h,d,p,f,m,v=e===z&&te,y=[];for(e&&void 0!==e.createDocumentFragment||(e=z),r=0;null!=(a=t[r]);r++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if($t.test(a)){for(v=v||u(e),h=e.createElement("div"),v.appendChild(h),a=a.replace(Wt,"<$1></$2>"),s=(qt.exec(a)||["",""])[1].toLowerCase(),c=Zt[s]||Zt._default,l=c[0],h.innerHTML=c[1]+a+c[2];l--;)h=h.lastChild;if(!Q.support.tbody)for(d=Xt.test(a),p="table"!==s||d?"<table>"!==c[1]||d?[]:h.childNodes:h.firstChild&&h.firstChild.childNodes,o=p.length-1;o>=0;--o)Q.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o]);!Q.support.leadingWhitespace&&zt.test(a)&&h.insertBefore(e.createTextNode(zt.exec(a)[0]),h.firstChild),a=h.childNodes,h.parentNode.removeChild(h)}else a=e.createTextNode(a);a.nodeType?y.push(a):Q.merge(y,a)}if(h&&(a=h=v=null),!Q.support.appendChecked)for(r=0;null!=(a=y[r]);r++)Q.nodeName(a,"input")?g(a):void 0!==a.getElementsByTagName&&Q.grep(a.getElementsByTagName("input"),g);if(n)for(f=function(t){if(!t.type||Vt.test(t.type))return i?i.push(t.parentNode?t.parentNode.removeChild(t):t):n.appendChild(t)},r=0;null!=(a=y[r]);r++)Q.nodeName(a,"script")&&f(a)||(n.appendChild(a),void 0!==a.getElementsByTagName&&(m=Q.grep(Q.merge([],a.getElementsByTagName("script")),f),y.splice.apply(y,[r+1,0].concat(m)),r+=m.length));return y},cleanData:function(t,e){for(var n,i,r,o,a=0,s=Q.expando,c=Q.cache,l=Q.support.deleteExpando,u=Q.event.special;null!=(r=t[a]);a++)if((e||Q.acceptData(r))&&(i=r[s],n=i&&c[i])){if(n.events)for(o in n.events)u[o]?Q.event.remove(r,o):Q.removeEvent(r,o,n.handle);c[i]&&(delete c[i],l?delete r[s]:r.removeAttribute?r.removeAttribute(s):r[s]=null,Q.deletedIds.push(i))}}}),function(){var t,e;Q.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t=Q.uaMatch(q.userAgent),e={},t.browser&&(e[t.browser]=!0,e.version=t.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),Q.browser=e,Q.sub=function(){function t(e,n){return new t.fn.init(e,n)}Q.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(n,i){return i&&i instanceof Q&&!(i instanceof t)&&(i=t(i)),Q.fn.init.call(this,n,i,e)},t.fn.init.prototype=t.fn;var e=t(z);return t}}();var ne,ie,re,oe=/alpha\([^)]*\)/i,ae=/opacity=([^)]*)/,se=/^(top|right|bottom|left)$/,ce=/^(none|table(?!-c[ea]).+)/,le=/^margin/,ue=new RegExp("^("+Z+")(.*)$","i"),he=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),de=new RegExp("^([-+])=("+Z+")","i"),pe={BODY:"block"},fe={position:"absolute",visibility:"hidden",display:"block"},ge={letterSpacing:0,fontWeight:400},me=["Top","Right","Bottom","Left"],ve=["Webkit","O","Moz","ms"],ye=Q.fn.toggle;Q.fn.extend({css:function(t,n){return Q.access(this,function(t,n,i){return i!==e?Q.style(t,n,i):Q.css(t,n)},t,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(t,e){var n="boolean"==typeof t;return Q.isFunction(t)&&Q.isFunction(e)?ye.apply(this,arguments):this.each(function(){(n?t:v(this))?Q(this).show():Q(this).hide()})}}),Q.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ne(t,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:Q.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,s,c=Q.camelCase(n),l=t.style;if(n=Q.cssProps[c]||(Q.cssProps[c]=m(l,c)),s=Q.cssHooks[n]||Q.cssHooks[c],i===e)return s&&"get"in s&&(o=s.get(t,!1,r))!==e?o:l[n];if("string"===(a=typeof i)&&(o=de.exec(i))&&(i=(o[1]+1)*o[2]+parseFloat(Q.css(t,n)),a="number"),!(null==i||"number"===a&&isNaN(i)||("number"===a&&!Q.cssNumber[c]&&(i+="px"),s&&"set"in s&&(i=s.set(t,i,r))===e)))try{l[n]=i}catch(t){}}},css:function(t,n,i,r){var o,a,s,c=Q.camelCase(n);return n=Q.cssProps[c]||(Q.cssProps[c]=m(t.style,c)),s=Q.cssHooks[n]||Q.cssHooks[c],s&&"get"in s&&(o=s.get(t,!0,r)),o===e&&(o=ne(t,n)),"normal"===o&&n in ge&&(o=ge[n]),i||r!==e?(a=parseFloat(o),i||Q.isNumeric(a)?a||0:o):o},swap:function(t,e,n){var i,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];i=n.call(t);for(r in e)t.style[r]=o[r];return i}}),t.getComputedStyle?ne=function(e,n){var i,r,o,a,s=t.getComputedStyle(e,null),c=e.style;return s&&(i=s.getPropertyValue(n)||s[n],""===i&&!Q.contains(e.ownerDocument,e)&&(i=Q.style(e,n)),he.test(i)&&le.test(n)&&(r=c.width,o=c.minWidth,a=c.maxWidth,c.minWidth=c.maxWidth=c.width=i,i=s.width,c.width=r,c.minWidth=o,c.maxWidth=a)),i}:z.documentElement.currentStyle&&(ne=function(t,e){var n,i,r=t.currentStyle&&t.currentStyle[e],o=t.style;return null==r&&o&&o[e]&&(r=o[e]),he.test(r)&&!se.test(e)&&(n=o.left,i=t.runtimeStyle&&t.runtimeStyle.left,i&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":r,r=o.pixelLeft+"px",o.left=n,i&&(t.runtimeStyle.left=i)),""===r?"auto":r}),Q.each(["height","width"],function(t,e){Q.cssHooks[e]={get:function(t,n,i){if(n)return 0===t.offsetWidth&&ce.test(ne(t,"display"))?Q.swap(t,fe,function(){return w(t,e,i)}):w(t,e,i)},set:function(t,n,i){return b(t,n,i?x(t,e,i,Q.support.boxSizing&&"border-box"===Q.css(t,"boxSizing")):0)}}}),Q.support.opacity||(Q.cssHooks.opacity={get:function(t,e){return ae.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=Q.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,e>=1&&""===Q.trim(o.replace(oe,""))&&n.removeAttribute&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=oe.test(o)?o.replace(oe,r):o+" "+r)}}),Q(function(){Q.support.reliableMarginRight||(Q.cssHooks.marginRight={get:function(t,e){return Q.swap(t,{display:"inline-block"},function(){if(e)return ne(t,"marginRight")})}}),!Q.support.pixelPosition&&Q.fn.position&&Q.each(["top","left"],function(t,e){Q.cssHooks[e]={get:function(t,n){if(n){var i=ne(t,e);return he.test(i)?Q(t).position()[e]+"px":i}}}})}),Q.expr&&Q.expr.filters&&(Q.expr.filters.hidden=function(t){return 0===t.offsetWidth&&0===t.offsetHeight||!Q.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ne(t,"display"))},Q.expr.filters.visible=function(t){return!Q.expr.filters.hidden(t)}),Q.each({margin:"",padding:"",border:"Width"},function(t,e){Q.cssHooks[t+e]={expand:function(n){var i,r="string"==typeof n?n.split(" "):[n],o={};for(i=0;i<4;i++)o[t+me[i]+e]=r[i]||r[i-2]||r[0];return o}},le.test(t)||(Q.cssHooks[t+e].set=b)});var be=/%20/g,xe=/\[\]$/,we=/\r?\n/g,De=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ke=/^(?:select|textarea)/i;Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Q.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ke.test(this.nodeName)||De.test(this.type))}).map(function(t,e){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(t,n){return{name:e.name,value:t.replace(we,"\r\n")}}):{name:e.name,value:n.replace(we,"\r\n")}}).get()}}),Q.param=function(t,n){var i,r=[],o=function(t,e){e=Q.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(t)||t.jquery&&!Q.isPlainObject(t))Q.each(t,function(){o(this.name,this.value)});else for(i in t)k(i,t[i],n,o);return r.join("&").replace(be,"+")};var Ce,Te,Se=/#.*$/,Me=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ne=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ee=/^(?:GET|HEAD)$/,Le=/^\/\//,Be=/\?/,Ae=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Re=/([?&])_=[^&]*/,He=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,je=Q.fn.load,Pe={},Oe={},Ie=["*/"]+["*"];try{Te=W.href}catch(t){Te=z.createElement("a"),Te.href="",Te=Te.href}Ce=He.exec(Te.toLowerCase())||[],Q.fn.load=function(t,n,i){if("string"!=typeof t&&je)return je.apply(this,arguments);if(!this.length)return this;var r,o,a,s=this,c=t.indexOf(" ");return c>=0&&(r=t.slice(c,t.length),t=t.slice(0,c)),Q.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(o="POST"),Q.ajax({url:t,type:o,dataType:"html",data:n,complete:function(t,e){i&&s.each(i,a||[t.responseText,e,t])}}).done(function(t){a=arguments,s.html(r?Q("<div>").append(t.replace(Ae,"")).find(r):t)}),this},Q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){Q.fn[e]=function(t){return this.on(e,t)}}),Q.each(["get","post"],function(t,n){Q[n]=function(t,i,r,o){return Q.isFunction(i)&&(o=o||r,r=i,i=e),Q.ajax({type:n,url:t,data:i,success:r,dataType:o})}}),Q.extend({getScript:function(t,n){return Q.get(t,e,n,"script")},getJSON:function(t,e,n){return Q.get(t,e,n,"json")},ajaxSetup:function(t,e){return e?S(t,Q.ajaxSettings):(e=t,t=Q.ajaxSettings),S(t,e),t},ajaxSettings:{url:Te,isLocal:Ne.test(Ce[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ie},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:C(Pe),ajaxTransport:C(Oe),ajax:function(t,n){function i(t,n,i,a){var l,h,y,b,w,k=n;2!==x&&(x=2,c&&clearTimeout(c),s=e,o=a||"",D.readyState=t>0?4:0,i&&(b=M(d,D,i)),t>=200&&t<300||304===t?(d.ifModified&&(w=D.getResponseHeader("Last-Modified"),w&&(Q.lastModified[r]=w),(w=D.getResponseHeader("Etag"))&&(Q.etag[r]=w)),304===t?(k="notmodified",l=!0):(l=N(d,b),k=l.state,h=l.data,y=l.error,l=!y)):(y=k,k&&!t||(k="error",t<0&&(t=0))),D.status=t,D.statusText=(n||k)+"",l?g.resolveWith(p,[h,k,D]):g.rejectWith(p,[D,k,y]),D.statusCode(v),v=e,u&&f.trigger("ajax"+(l?"Success":"Error"),[D,d,l?h:y]),m.fireWith(p,[D,k]),u&&(f.trigger("ajaxComplete",[D,d]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,o,a,s,c,l,u,h,d=Q.ajaxSetup({},n),p=d.context||d,f=p!==d&&(p.nodeType||p instanceof Q)?Q(p):Q.event,g=Q.Deferred(),m=Q.Callbacks("once memory"),v=d.statusCode||{},y={},b={},x=0,w="canceled",D={readyState:0,setRequestHeader:function(t,e){if(!x){var n=t.toLowerCase();t=b[n]=b[n]||t,y[t]=e}return this},getAllResponseHeaders:function(){return 2===x?o:null},getResponseHeader:function(t){var n;if(2===x){if(!a)for(a={};n=Me.exec(o);)a[n[1].toLowerCase()]=n[2];n=a[t.toLowerCase()]}return n===e?null:n},overrideMimeType:function(t){return x||(d.mimeType=t),this},abort:function(t){return t=t||w,s&&s.abort(t),i(0,t),this}};if(g.promise(D),D.success=D.done,D.error=D.fail,D.complete=m.add,D.statusCode=function(t){if(t){var e;if(x<2)for(e in t)v[e]=[v[e],t[e]];else e=t[D.status],D.always(e)}return this},d.url=((t||d.url)+"").replace(Se,"").replace(Le,Ce[1]+"//"),d.dataTypes=Q.trim(d.dataType||"*").toLowerCase().split(et),null==d.crossDomain&&(l=He.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===Ce[1]&&l[2]===Ce[2]&&(l[3]||("http:"===l[1]?80:443))==(Ce[3]||("http:"===Ce[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Q.param(d.data,d.traditional)),T(Pe,d,n,D),2===x)return D;if(u=d.global,d.type=d.type.toUpperCase(),d.hasContent=!Ee.test(d.type),u&&0==Q.active++&&Q.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Be.test(d.url)?"&":"?")+d.data,delete d.data),r=d.url,!1===d.cache)){var k=Q.now(),C=d.url.replace(Re,"$1_="+k);d.url=C+(C===d.url?(Be.test(d.url)?"&":"?")+"_="+k:"")}(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&D.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(r=r||d.url,Q.lastModified[r]&&D.setRequestHeader("If-Modified-Since",Q.lastModified[r]),Q.etag[r]&&D.setRequestHeader("If-None-Match",Q.etag[r])),D.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Ie+"; q=0.01":""):d.accepts["*"]);for(h in d.headers)D.setRequestHeader(h,d.headers[h]);if(!d.beforeSend||!1!==d.beforeSend.call(p,D,d)&&2!==x){w="abort";for(h in{success:1,error:1,complete:1})D[h](d[h]);if(s=T(Oe,d,n,D)){D.readyState=1,u&&f.trigger("ajaxSend",[D,d]),d.async&&d.timeout>0&&(c=setTimeout(function(){D.abort("timeout")},d.timeout));try{x=1,s.send(y,i)}catch(t){if(!(x<2))throw t;i(-1,t)}}else i(-1,"No Transport");return D}return D.abort()},active:0,lastModified:{},etag:{}});var Fe=[],_e=/\?/,ze=/(=)\?(?=&|$)|\?\?/,We=Q.now();Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Fe.pop()||Q.expando+"_"+We++;return this[t]=!0,t}}),Q.ajaxPrefilter("json jsonp",function(n,i,r){var o,a,s,c=n.data,l=n.url,u=!1!==n.jsonp,h=u&&ze.test(l),d=u&&!h&&"string"==typeof c&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(c);if("jsonp"===n.dataTypes[0]||h||d)return o=n.jsonpCallback=Q.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a=t[o],h?n.url=l.replace(ze,"$1"+o):d?n.data=c.replace(ze,"$1"+o):u&&(n.url+=(_e.test(l)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||Q.error(o+" was not called"),s[0]},n.dataTypes[0]="json",t[o]=function(){s=arguments},r.always(function(){t[o]=a,n[o]&&(n.jsonpCallback=i.jsonpCallback,Fe.push(o)),s&&Q.isFunction(a)&&a(s[0]),s=a=e}),"script"}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return Q.globalEval(t),t}}}),Q.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),Q.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=z.head||z.getElementsByTagName("head")[0]||z.documentElement;return{send:function(r,o){n=z.createElement("script"),n.async="async",t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=e,r||o(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var qe,Xe=!!t.ActiveXObject&&function(){for(var t in qe)qe[t](0,1)},$e=0;Q.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&E()||L()}:E,function(t){Q.extend(Q.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(Q.ajaxSettings.xhr()),Q.support.ajax&&Q.ajaxTransport(function(n){if(!n.crossDomain||Q.support.cors){var i;return{send:function(r,o){var a,s,c=n.xhr();if(n.username?c.open(n.type,n.url,n.async,n.username,n.password):c.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)c[s]=n.xhrFields[s];n.mimeType&&c.overrideMimeType&&c.overrideMimeType(n.mimeType),!n.crossDomain&&!r["X-Requested-With"]&&(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)c.setRequestHeader(s,r[s])}catch(t){}c.send(n.hasContent&&n.data||null),i=function(t,r){var s,l,u,h,d;try{if(i&&(r||4===c.readyState))if(i=e,a&&(c.onreadystatechange=Q.noop,Xe&&delete qe[a]),r)4!==c.readyState&&c.abort();else{s=c.status,u=c.getAllResponseHeaders(),h={},(d=c.responseXML)&&d.documentElement&&(h.xml=d);try{h.text=c.responseText}catch(t){}try{l=c.statusText}catch(t){l=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=h.text?200:404}}catch(t){r||o(-1,t)}h&&o(s,l,h,u)},n.async?4===c.readyState?setTimeout(i,0):(a=++$e,Xe&&(qe||(qe={},Q(t).unload(Xe)),qe[a]=i),c.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var Ue,Ye,Je=/^(?:toggle|show|hide)$/,Ge=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Ke=/queueHooks$/,Ve=[j],Qe={"*":[function(t,e){var n,i,r=this.createTween(t,e),o=Ge.exec(e),a=r.cur(),s=+a||0,c=1,l=20;if(o){if(n=+o[2],"px"!==(i=o[3]||(Q.cssNumber[t]?"":"px"))&&s){s=Q.css(r.elem,t,!0)||n||1;do{c=c||".5",s/=c,Q.style(r.elem,t,s+i)}while(c!==(c=r.cur()/a)&&1!==c&&--l)}r.unit=i,r.start=s,r.end=o[1]?s+(o[1]+1)*n:n}return r}]};Q.Animation=Q.extend(R,{tweener:function(t,e){Q.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;i<r;i++)n=t[i],Qe[n]=Qe[n]||[],Qe[n].unshift(e)},prefilter:function(t,e){e?Ve.unshift(t):Ve.push(t)}}),Q.Tween=P,P.prototype={constructor:P,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Q.cssNumber[n]?"":"px")},cur:function(){var t=P.propHooks[this.prop];return t&&t.get?t.get(this):P.propHooks._default.get(this)},run:function(t){var e,n=P.propHooks[this.prop];return this.options.duration?this.pos=e=Q.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Q.css(t.elem,t.prop,!1,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Q.fx.step[t.prop]?Q.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Q.cssProps[t.prop]]||Q.cssHooks[t.prop])?Q.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Q.each(["toggle","show","hide"],function(t,e){var n=Q.fn[e];Q.fn[e]=function(i,r,o){return null==i||"boolean"==typeof i||!t&&Q.isFunction(i)&&Q.isFunction(r)?n.apply(this,arguments):this.animate(O(e,!0),i,r,o)}}),Q.fn.extend({fadeTo:function(t,e,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=Q.isEmptyObject(t),o=Q.speed(e,n,i),a=function(){var e=R(this,Q.extend({},t),o);r&&e.stop(!0)};return r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",o=Q.timers,a=Q._data(this);if(n)a[n]&&a[n].stop&&r(a[n]);else for(n in a)a[n]&&a[n].stop&&Ke.test(n)&&r(a[n]);for(n=o.length;n--;)o[n].elem===this&&(null==t||o[n].queue===t)&&(o[n].anim.stop(i),e=!1,o.splice(n,1));(e||!i)&&Q.dequeue(this,t)})}}),Q.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Q.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),Q.speed=function(t,e,n){var i=t&&"object"==typeof t?Q.extend({},t):{complete:n||!n&&e||Q.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Q.isFunction(e)&&e};return i.duration=Q.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Q.fx.speeds?Q.fx.speeds[i.duration]:Q.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){Q.isFunction(i.old)&&i.old.call(this),i.queue&&Q.dequeue(this,i.queue)},i},Q.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Q.timers=[],Q.fx=P.prototype.init,Q.fx.tick=function(){var t,n=Q.timers,i=0;for(Ue=Q.now();i<n.length;i++)!(t=n[i])()&&n[i]===t&&n.splice(i--,1);n.length||Q.fx.stop(),Ue=e},Q.fx.timer=function(t){t()&&Q.timers.push(t)&&!Ye&&(Ye=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.interval=13,Q.fx.stop=function(){clearInterval(Ye),Ye=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fx.step={},Q.expr&&Q.expr.filters&&(Q.expr.filters.animated=function(t){return Q.grep(Q.timers,function(e){return t===e.elem}).length});var Ze=/^(?:body|html)$/i;Q.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){Q.offset.setOffset(this,t,e)});var n,i,r,o,a,s,c,l={top:0,left:0},u=this[0],h=u&&u.ownerDocument;if(h)return(i=h.body)===u?Q.offset.bodyOffset(u):(n=h.documentElement,Q.contains(n,u)?(void 0!==u.getBoundingClientRect&&(l=u.getBoundingClientRect()),r=I(h),o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=r.pageYOffset||n.scrollTop,c=r.pageXOffset||n.scrollLeft,{top:l.top+s-o,left:l.left+c-a}):l)},Q.offset={bodyOffset:function(t){var e=t.offsetTop,n=t.offsetLeft;return Q.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(Q.css(t,"marginTop"))||0,n+=parseFloat(Q.css(t,"marginLeft"))||0),{top:e,left:n}},setOffset:function(t,e,n){var i=Q.css(t,"position");"static"===i&&(t.style.position="relative");var r,o,a=Q(t),s=a.offset(),c=Q.css(t,"top"),l=Q.css(t,"left"),u=("absolute"===i||"fixed"===i)&&Q.inArray("auto",[c,l])>-1,h={},d={};u?(d=a.position(),r=d.top,o=d.left):(r=parseFloat(c)||0,o=parseFloat(l)||0),Q.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(h.top=e.top-s.top+r),null!=e.left&&(h.left=e.left-s.left+o),"using"in e?e.using.call(t,h):a.css(h)}},Q.fn.extend({position:function(){if(this[0]){var t=this[0],e=this.offsetParent(),n=this.offset(),i=Ze.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(Q.css(t,"marginTop"))||0,n.left-=parseFloat(Q.css(t,"marginLeft"))||0,i.top+=parseFloat(Q.css(e[0],"borderTopWidth"))||0,i.left+=parseFloat(Q.css(e[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||z.body;t&&!Ze.test(t.nodeName)&&"static"===Q.css(t,"position");)t=t.offsetParent;return t||z.body})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);Q.fn[t]=function(r){return Q.access(this,function(t,r,o){var a=I(t);if(o===e)return a?n in a?a[n]:a.document.documentElement[r]:t[r];a?a.scrollTo(i?Q(a).scrollLeft():o,i?o:Q(a).scrollTop()):t[r]=o},t,r,arguments.length,null)}}),Q.each({Height:"height",Width:"width"},function(t,n){Q.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){Q.fn[r]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),s=i||(!0===r||!0===o?"margin":"border");return Q.access(this,function(n,i,r){var o;return Q.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+t],o["scroll"+t],n.body["offset"+t],o["offset"+t],o["client"+t])):r===e?Q.css(n,i,r,s):Q.style(n,i,r,s)},n,a?r:e,a,null)}})}),t.jQuery=t.$=Q,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Q})}(window);var saveAs=saveAs||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l="application/octet-stream",u=4e4,h=function(t){var e=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,u)},d=function(t,e,n){e=[].concat(e);for(var i=e.length;i--;){var r=t["on"+e[i]];if("function"==typeof r)try{r.call(t,n||t)}catch(t){c(t)}}},p=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},f=function(e,c,u){u||(e=p(e));var f,g=this,m=e.type,v=m===l,y=function(){d(g,"writestart progress write writeend".split(" "))},b=function(){if((s||v&&a)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=s?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,g.readyState=g.DONE,y()},i.readAsDataURL(e),void(g.readyState=g.INIT)}if(f||(f=n().createObjectURL(e)),v)t.location.href=f;else{t.open(f,"_blank")||(t.location.href=f)}g.readyState=g.DONE,y(),h(f)};if(g.readyState=g.INIT,r)return f=n().createObjectURL(e),void setTimeout(function(){i.href=f,i.download=c,o(i),y(),h(f),g.readyState=g.DONE});b()},g=f.prototype,m=function(t,e,n){return new f(t,e||t.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=p(t)),navigator.msSaveOrOpenBlob(t,e)}:(g.abort=function(){},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,m)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),function(){var t,e,n,i,r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,x,w,D,k,C,T={}.hasOwnProperty,S=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},M=[].slice;k=Array.prototype.slice,t=function(t,e){return null==e&&(e=document),"object"==typeof t||"undefined"!=typeof exports&&null!==exports?t:e.querySelector(t)},w=function(){function t(){}return t.uniqid=function(){var t;return t=0,{get:function(){return t++}}}(),t.extend=function(t){var e,n,i,r,o,a;for(n=t,r=k.call(arguments,1),o=0,a=r.length;o<a;o++){e=r[o];for(i in e)T.call(e,i)&&(n[i]=e[i])}return n},t.clampRGB=function(t){return t<0?0:t>255?255:t},t.copyAttributes=function(t,e,n){var i,r,o,a,s,c;for(null==n&&(n={}),a=t.attributes,c=[],r=0,o=a.length;r<o;r++)i=a[r],null!=n.except&&(s=i.nodeName,S.call(n.except,s)>=0)||c.push(e.setAttribute(i.nodeName,i.nodeValue));return c},t.dataArray=function(t){return null==t&&(t=0),r.NodeJS||null!=window.Uint8Array?new Uint8Array(t):new Array(t)},t}(),"undefined"!=typeof exports&&null!==exports?(b=exports,a=require("canvas"),d=a.Image,l=require("fibers"),D=require("fs")):b=window,b.Caman=r=function(){function n(){var t,i,r,o=this;if(0===arguments.length)throw"Invalid arguments";return this instanceof n?(this.finishInit=this.finishInit.bind(this),this.imageLoaded=this.imageLoaded.bind(this),t=arguments[0],n.NodeJS||(r=parseInt(n.getAttrId(t[0]),10),i="function"==typeof t[1]?t[1]:"function"==typeof t[2]?t[2]:function(){},isNaN(r)||!x.has(r))?(this.id=w.uniqid.get(),this.initializedPixelData=this.originalPixelData=null,this.cropCoordinates={x:0,y:0},this.cropped=!1,this.resized=!1,this.pixelStack=[],this.layerStack=[],this.canvasQueue=[],this.currentLayer=null,this.scaled=!1,this.analyze=new e(this),this.renderer=new y(this),this.domIsLoaded(function(){return o.parseArguments(t),o.setup()}),this):x.execute(r,i)):new n(arguments)}return n.version={release:"4.1.1",date:"4/8/2013"},n.DEBUG=!1,n.NodeJS="undefined"!=typeof exports&&null!==exports,n.autoload=!n.NodeJS,n.allowRevert=!0,n.crossOrigin="anonymous",n.toString=function(){return"Version "+n.version.release+", Released "+n.version.date},n.remoteProxy="",n.proxyParam="camanProxyUrl",n.getAttrId=function(e){return!!n.NodeJS||("string"==typeof e&&(e=t(e)),null==e||null==e.getAttribute?null:e.getAttribute("data-caman-id"))},n.prototype.domIsLoaded=function(t){var e,i=this;return n.NodeJS?setTimeout(function(){return t.call(i)},0):"complete"===document.readyState?(f.debug("DOM initialized"),setTimeout(function(){return t.call(i)},0)):(e=function(){if("complete"===document.readyState)return f.debug("DOM initialized"),t.call(i)},document.addEventListener("readystatechange",e,!1))},n.prototype.parseArguments=function(t){var e,n,i,r;if(0===t.length)throw"Invalid arguments given";if(this.initObj=null,this.initType=null,this.imageUrl=null,this.callback=function(){},this.setInitObject(t[0]),1!==t.length){switch(typeof t[1]){case"string":this.imageUrl=t[1];break;case"function":this.callback=t[1]}if(2!==t.length&&(this.callback=t[2],4===t.length)){i=t[4],r=[];for(e in i)T.call(i,e)&&(n=i[e],r.push(this.options[e]=n));return r}}},n.prototype.setInitObject=function(e){if(n.NodeJS)return this.initObj=e,void(this.initType="node");if(this.initObj="object"==typeof e?e:t(e),null==this.initObj)throw"Could not find image or canvas for initialization.";return this.initType=this.initObj.nodeName.toLowerCase()},n.prototype.setup=function(){switch(this.initType){case"node":return this.initNode();case"img":return this.initImage();case"canvas":return this.initCanvas()}},n.prototype.initNode=function(){var t=this;return f.debug("Initializing for NodeJS"),this.image=new d,this.image.onload=function(){return f.debug("Image loaded. Width = "+t.imageWidth()+", Height = "+t.imageHeight()),t.canvas=new a(t.imageWidth(),t.imageHeight()),t.finishInit()},this.image.onerror=function(t){throw t},this.image.src=this.initObj},n.prototype.initImage=function(){return this.image=this.initObj,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),w.copyAttributes(this.image,this.canvas,{except:["src"]}),this.image.parentNode.replaceChild(this.canvas,this.image),this.imageAdjustments(),this.waitForImageLoaded()},n.prototype.initCanvas=function(){return this.canvas=this.initObj,this.context=this.canvas.getContext("2d"),null!=this.imageUrl?(this.image=document.createElement("img"),this.image.src=this.imageUrl,this.imageAdjustments(),this.waitForImageLoaded()):this.finishInit()},n.prototype.imageAdjustments=function(){if(this.needsHiDPISwap()&&(f.debug(this.image.src,"->",this.hiDPIReplacement()),this.swapped=!0,this.image.src=this.hiDPIReplacement()),h.isRemote(this.image))return this.image.src=h.proxyUrl(this.image.src),f.debug("Remote image detected, using URL = "+this.image.src)},n.prototype.waitForImageLoaded=function(){return this.isImageLoaded()?this.imageLoaded():this.image.onload=this.imageLoaded},n.prototype.isImageLoaded=function(){return!!this.image.complete&&(null==this.image.naturalWidth||0!==this.image.naturalWidth)},n.prototype.imageWidth=function(){return this.image.width||this.image.naturalWidth},n.prototype.imageHeight=function(){return this.image.height||this.image.naturalHeight},n.prototype.imageLoaded=function(){return f.debug("Image loaded. Width = "+this.imageWidth()+", Height = "+this.imageHeight()),this.swapped?(this.canvas.width=this.imageWidth()/this.hiDPIRatio(),this.canvas.height=this.imageHeight()/this.hiDPIRatio()):(this.canvas.width=this.imageWidth(),this.canvas.height=this.imageHeight()),this.finishInit()},n.prototype.finishInit=function(){var t,e,i,r,o;if(null==this.context&&(this.context=this.canvas.getContext("2d")),this.originalWidth=this.preScaledWidth=this.width=this.canvas.width,this.originalHeight=this.preScaledHeight=this.height=this.canvas.height,this.hiDPIAdjustments(),this.hasId()||this.assignId(),null!=this.image&&this.context.drawImage(this.image,0,0,this.imageWidth(),this.imageHeight(),0,0,this.preScaledWidth,this.preScaledHeight),this.reloadCanvasData(),n.allowRevert)for(this.initializedPixelData=w.dataArray(this.pixelData.length),this.originalPixelData=w.dataArray(this.pixelData.length),o=this.pixelData,t=i=0,r=o.length;i<r;t=++i)e=o[t],this.initializedPixelData[t]=e,this.originalPixelData[t]=e;return this.dimensions={width:this.canvas.width,height:this.canvas.height},x.put(this.id,this),this.callback.call(this,this),this.callback=function(){}},n.prototype.reloadCanvasData=function(){return this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data},n.prototype.resetOriginalPixelData=function(){var t,e,i,r,o;if(!n.allowRevert)throw"Revert disabled";for(this.originalPixelData=w.dataArray(this.pixelData.length),r=this.pixelData,o=[],e=0,i=r.length;e<i;e++)t=r[e],o.push(this.originalPixelData.push(t));return o},n.prototype.hasId=function(){return null!=n.getAttrId(this.canvas)},n.prototype.assignId=function(){if(!n.NodeJS&&!this.canvas.getAttribute("data-caman-id"))return this.canvas.setAttribute("data-caman-id",this.id)},n.prototype.hiDPIDisabled=function(){return null!==this.canvas.getAttribute("data-caman-hidpi-disabled")},n.prototype.hiDPIAdjustments=function(){var t;if(!n.NodeJS&&!this.hiDPIDisabled())return t=this.hiDPIRatio(),1!==t?(f.debug("HiDPI ratio = "+t),this.scaled=!0,this.preScaledWidth=this.canvas.width,this.preScaledHeight=this.canvas.height,this.canvas.width=this.preScaledWidth*t,this.canvas.height=this.preScaledHeight*t,this.canvas.style.width=this.preScaledWidth+"px",this.canvas.style.height=this.preScaledHeight+"px",this.context.scale(t,t),this.width=this.originalWidth=this.canvas.width,this.height=this.originalHeight=this.canvas.height):void 0},n.prototype.hiDPIRatio=function(){var t,e;return e=window.devicePixelRatio||1,t=this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1,e/t},n.prototype.hiDPICapable=function(){return null!=window.devicePixelRatio&&1!==window.devicePixelRatio},n.prototype.needsHiDPISwap=function(){return!(this.hiDPIDisabled()||!this.hiDPICapable())&&null!==this.hiDPIReplacement()},n.prototype.hiDPIReplacement=function(){return null==this.image?null:this.image.getAttribute("data-caman-hidpi")},n.prototype.replaceCanvas=function(t){var e;return e=this.canvas,this.canvas=t,this.context=this.canvas.getContext("2d"),e.parentNode.replaceChild(this.canvas,e),this.width=this.canvas.width,this.height=this.canvas.height,this.reloadCanvasData(),this.dimensions={width:this.canvas.width,height:this.canvas.height}},n.prototype.render=function(t){var e=this;return null==t&&(t=function(){}),c.trigger(this,"renderStart"),this.renderer.execute(function(){return e.context.putImageData(e.imageData,0,0),t.call(e)})},n.prototype.revert=function(){var t,e,i,r,o;if(!n.allowRevert)throw"Revert disabled";for(o=this.originalVisiblePixels(),t=i=0,r=o.length;i<r;t=++i)e=o[t],this.pixelData[t]=e;return this.context.putImageData(this.imageData,0,0)},n.prototype.reset=function(){var t,e,n,i,r,o,a,s,c;for(t=document.createElement("canvas"),w.copyAttributes(this.canvas,t),t.width=this.originalWidth,t.height=this.originalHeight,e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),o=i.data,c=this.initializedPixelData,n=a=0,s=c.length;a<s;n=++a)r=c[n],o[n]=r;return e.putImageData(i,0,0),this.cropCoordinates={x:0,y:0},this.resized=!1,this.replaceCanvas(t)},n.prototype.originalVisiblePixels=function(){var t,e,i,r,o,a,s,c,l,u,h,d,p,f,g,v,y,b,x,w,D;if(!n.allowRevert)throw"Revert disabled";if(u=[],d=this.cropCoordinates.x,r=d+this.width,p=this.cropCoordinates.y,o=p+this.height,this.resized){for(t=document.createElement("canvas"),t.width=this.originalWidth,t.height=this.originalHeight,i=t.getContext("2d"),s=i.getImageData(0,0,t.width,t.height),l=s.data,b=this.originalPixelData,a=g=0,y=b.length;g<y;a=++g)c=b[a],l[a]=c;i.putImageData(s,0,0),h=document.createElement("canvas"),h.width=this.width,h.height=this.height,i=h.getContext("2d"),i.drawImage(t,0,0,this.originalWidth,this.originalHeight,0,0,this.width,this.height),l=i.getImageData(0,0,this.width,this.height).data,f=this.width}else l=this.originalPixelData,f=this.originalWidth;for(a=v=0,x=l.length;v<x;a=v+=4)e=m.locationToCoordinates(a,f),d<=(w=e.x)&&w<r&&p<=(D=e.y)&&D<o&&u.push(l[a],l[a+1],l[a+2],l[a+3]);return u},n.prototype.process=function(t,e){return this.renderer.add({type:u.Type.Single,name:t,processFn:e}),this},n.prototype.processKernel=function(t,e,n,i){var r,o,a;if(!n)for(n=0,r=o=0,a=e.length;0<=a?o<a:o>a;r=0<=a?++o:--o)n+=e[r];return this.renderer.add({type:u.Type.Kernel,name:t,adjust:e,divisor:n,bias:i||0}),this},n.prototype.processPlugin=function(t,e){return this.renderer.add({type:u.Type.Plugin,plugin:t,args:e}),this},n.prototype.newLayer=function(t){var e;return e=new p(this),this.canvasQueue.push(e),this.renderer.add({type:u.Type.LayerDequeue}),t.call(e),this.renderer.add({type:u.Type.LayerFinished}),this},n.prototype.executeLayer=function(t){return this.pushContext(t)},n.prototype.pushContext=function(t){return this.layerStack.push(this.currentLayer),this.pixelStack.push(this.pixelData),this.currentLayer=t,this.pixelData=t.pixelData},n.prototype.popContext=function(){return this.pixelData=this.pixelStack.pop(),this.currentLayer=this.layerStack.pop()},n.prototype.applyCurrentLayer=function(){return this.currentLayer.applyToParent()},n}(),e=function(){function t(t){this.c=t}return t.prototype.calculateLevels=function(){var t,e,n,i,r,o,a;for(e={r:{},g:{},b:{}},t=i=0;i<=255;t=++i)e.r[t]=0,e.g[t]=0,e.b[t]=0;for(t=r=0,a=this.c.pixelData.length;r<a;t=r+=4)e.r[this.c.pixelData[t]]++,e.g[this.c.pixelData[t+1]]++,e.b[this.c.pixelData[t+2]]++;for(n=this.c.pixelData.length/4,t=o=0;o<=255;t=++o)e.r[t]/=n,e.g[t]/=n,e.b[t]/=n;return e},t}(),r.DOMUpdated=function(){var t,e,n,i,r;if(e=document.querySelectorAll("img[data-caman]"),e.length>0){for(r=[],n=0,i=e.length;n<i;n++)t=e[n],r.push(new o(t,function(){return this.parse(),this.execute()}));return r}},r.autoload&&function(){"complete"===document.readyState?r.DOMUpdated():document.addEventListener("DOMContentLoaded",r.DOMUpdated,!1)}(),o=function(){function t(t,e){this.dataStr=t.getAttribute("data-caman"),this.caman=r(t,e.bind(this))}var e;return e="(\\w+)\\((.*?)\\)",t.prototype.parse=function(){var t,n,i,r,o,a,s,c,l,u,h;if(this.ele=this.caman.canvas,a=new RegExp(e,"g"),s=this.dataStr.match(a),s.length>0){for(a=new RegExp(e),h=[],c=0,l=s.length;c<l;c++){r=s[c],u=r.match(a),u[0],n=u[1],t=u[2],o=new Function("return function() {        this."+n+"("+t+");      };");try{i=o(),h.push(i.call(this.caman))}catch(t){h.push(f.debug(t))}}return h}},t.prototype.execute=function(){var t;return t=this.ele,this.caman.render(function(){return t.parentNode.replaceChild(this.toImage(),t)})},t}(),r.Blender=n=function(){function t(){}return t.blenders={},t.register=function(t,e){return this.blenders[t]=e},t.execute=function(t,e,n){return this.blenders[t](e,n)},t}(),r.Calculate=i=function(){function t(){}return t.distance=function(t,e,n,i){return Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2))},t.randomRange=function(t,e,n){var i;return null==n&&(n=!1),i=t+Math.random()*(e-t),n?i.toFixed(n):Math.round(i)},t.luminance=function(t){return.299*t.r+.587*t.g+.114*t.b},t.bezier=function(t,e,n,i,r,o){var a,s,c,l,u,h,d,p,f,g,m,v,y,b,x,w,D,k,C,T,S,M,N,E,L,B,A;for(x=t[0],C=t[1],w=e[0],T=e[1],D=n[0],S=n[1],k=i[0],M=i[1],d={},u=parseInt(3*(w-x),10),c=3*(D-w)-u,a=k-x-u-c,h=3*(T-C),l=3*(S-T)-h,s=M-C-h-l,g=N=0;N<1e3;g=++N)b=g/1e3,p=Math.round(a*Math.pow(b,3)+c*Math.pow(b,2)+u*b+x),f=Math.round(s*Math.pow(b,3)+l*Math.pow(b,2)+h*b+C),r&&f<r?f=r:o&&f>o&&(f=o),d[p]=f;if(d.length<i[0]+1)for(g=E=0,B=i[0];0<=B?E<=B:E>=B;g=0<=B?++E:--E)if(null==d[g]){for(v=[g-1,d[g-1]],m=L=g,A=i[0];g<=A?L<=A:L>=A;m=g<=A?++L:--L)if(null!=d[m]){y=[m,d[m]];break}d[g]=v[1]+(y[1]-v[1])/(y[0]-v[0])*(g-v[0])}return null==d[i[0]]&&(d[i[0]]=d[i[0]-1]),d},t}(),s=function(){function t(){}return t.hexToRGB=function(t){var e,n,i;return"#"===t.charAt(0)&&(t=t.substr(1)),i=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),e=parseInt(t.substr(4,2),16),{r:i,g:n,b:e}},t.rgbToHSL=function(t,e,n){var i,r,o,a,s,c;return"object"==typeof t&&(e=t.g,n=t.b,t=t.r),t/=255,e/=255,n/=255,a=Math.max(t,e,n),s=Math.min(t,e,n),o=(a+s)/2,a===s?r=c=0:(i=a-s,c=o>.5?i/(2-a-s):i/(a+s),r=function(){switch(a){case t:return(e-n)/i+(e<n?6:0);case e:return(n-t)/i+2;case n:return(t-e)/i+4}}(),r/=6),{h:r,s:c,l:o}},t.hslToRGB=function(t,e,n){var i,r,o,a,s;return"object"==typeof t&&(e=t.s,n=t.l,t=t.h),0===e?s=r=i=n:(a=n<.5?n*(1+e):n+e-n*e,o=2*n-a,s=this.hueToRGB(o,a,t+1/3),r=this.hueToRGB(o,a,t),i=this.hueToRGB(o,a,t-1/3)),{r:255*s,g:255*r,b:255*i}},t.hueToRGB=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},t.rgbToHSV=function(t,e,n){var i,r,o,a,s,c;return t/=255,e/=255,n/=255,o=Math.max(t,e,n),a=Math.min(t,e,n),c=o,i=o-a,s=0===o?0:i/o,o===a?r=0:(r=function(){switch(o){case t:return(e-n)/i+(e<n?6:0);case e:return(n-t)/i+2;case n:return(t-e)/i+4}}(),r/=6),{h:r,s:s,v:c}},t.hsvToRGB=function(t,e,n){var i,r,o,a,s,c,l,u;switch(a=Math.floor(6*t),r=6*t-a,s=n*(1-e),c=n*(1-r*e),u=n*(1-(1-r)*e),a%6){case 0:l=n,o=u,i=s;break;case 1:l=c,o=n,i=s;break;case 2:l=s,o=n,i=u;break;case 3:l=s,o=c,i=n;break;case 4:l=u,o=s,i=n;break;case 5:l=n,o=s,i=c}return{r:255*l,g:255*o,b:255*i}},t.rgbToXYZ=function(t,e,n){var i,r,o;return t/=255,e/=255,n/=255,t>.04045?t=Math.pow((t+.055)/1.055,2.4):t/=12.92,e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,n>.04045?n=Math.pow((n+.055)/1.055,2.4):n/=12.92,i=.4124*t+.3576*e+.1805*n,r=.2126*t+.7152*e+.0722*n,o=.0193*t+.1192*e+.9505*n,{x:100*i,y:100*r,z:100*o}},t.xyzToRGB=function(t,e,n){var i,r,o;return t/=100,e/=100,n/=100,o=3.2406*t+-1.5372*e+-.4986*n,r=-.9689*t+1.8758*e+.0415*n,i=.0557*t+-.204*e+1.057*n,o>.0031308?o=1.055*Math.pow(o,.4166666667)-.055:o*=12.92,r>.0031308?r=1.055*Math.pow(r,.4166666667)-.055:r*=12.92,i>.0031308?i=1.055*Math.pow(i,.4166666667)-.055:i*=12.92,{r:255*o,g:255*r,b:255*i}},t.xyzToLab=function(t,e,n){var i,r,o,a,s,c;return"object"==typeof t&&(e=t.y,n=t.z,t=t.x),a=95.047,s=100,c=108.883,t/=a,e/=s,n/=c,t=t>.008856451679?Math.pow(t,.3333333333):7.787037037*t+.1379310345,e=e>.008856451679?Math.pow(e,.3333333333):7.787037037*e+.1379310345,n=n>.008856451679?Math.pow(n,.3333333333):7.787037037*n+.1379310345,o=116*e-16,i=500*(t-e),r=200*(e-n),{l:o,a:i,b:r}},t.labToXYZ=function(t,e,n){var i,r,o;return"object"==typeof t&&(e=t.a,n=t.b,t=t.l),r=(t+16)/116,i=r+e/500,o=r-n/200,i>.2068965517?i*=i*i:i=.1284185493*(i-.1379310345),r>.2068965517?r*=r*r:r=.1284185493*(r-.1379310345),o>.2068965517?o*=o*o:o=.1284185493*(o-.1379310345),{x:95.047*i,y:100*r,z:108.883*o}},t.rgbToLab=function(t,e,n){var i;return"object"==typeof t&&(e=t.g,n=t.b,t=t.r),i=this.rgbToXYZ(t,e,n),this.xyzToLab(i)},t.labToRGB=function(t,e,n){},t}(),c=function(){function t(){}return t.events={},t.types=["processStart","processComplete","renderStart","renderFinished","blockStarted","blockFinished"],t.trigger=function(t,e,n){var i,r,o,a,s;if(this.events[e]&&this.events[e].length){for(a=this.events[e],s=[],r=0,o=a.length;r<o;r++)i=a[r],null===i.target||t.id===i.target.id?s.push(i.fn.call(t,n)):s.push(void 0);return s}},t.listen=function(t,e,n){var i,r;return"string"==typeof t&&(r=t,i=e,t=null,e=r,n=i),!(S.call(this.types,e)<0)&&(this.events[e]||(this.events[e]=[]),this.events[e].push({target:t,fn:n}),!0)},t}(),r.Event=c,r.Filter=u=function(){function t(){}return t.Type={Single:1,Kernel:2,LayerDequeue:3,LayerFinished:4,LoadOverlay:5,Plugin:6},t.register=function(t,e){return r.prototype[t]=e},t}(),r.IO=h=function(){function t(){}return t.domainRegex=/(?:(?:http|https):\/\/)((?:\w+)\.(?:(?:\w|\.)+))/,t.isRemote=function(t){return null!=t&&(!this.corsEnabled(t)&&this.isURLRemote(t.src))},t.corsEnabled=function(t){var e;return null!=t.crossOrigin&&("anonymous"===(e=t.crossOrigin.toLowerCase())||"use-credentials"===e)},t.isURLRemote=function(t){var e;return!!(e=t.match(this.domainRegex))&&e[1]!==document.domain},t.remoteCheck=function(t){if(this.isURLRemote(t)){if(r.remoteProxy.length)return r.isURLRemote(r.remoteProxy)?void f.info("Cannot use a remote proxy for loading images."):r.remoteProxy+"?camanProxyUrl="+encodeURIComponent(t);f.info("Attempting to load a remote image without a configured proxy. URL: "+t)}},t.proxyUrl=function(t){return r.remoteProxy+"?"+r.proxyParam+"="+encodeURIComponent(t)},t.useProxy=function(t){var e;return e={ruby:"rb",python:"py",perl:"pl",javascript:"js"},t=t.toLowerCase(),null!=e[t]&&(t=e[t]),"proxies/caman_proxy."+t},t}(),r.prototype.save=function(){return"undefined"!=typeof exports&&null!==exports?this.nodeSave.apply(this,arguments):this.browserSave.apply(this,arguments)},r.prototype.browserSave=function(t){var e;return null==t&&(t="png"),t=t.toLowerCase(),e=this.toBase64(t).replace("image/"+t,"image/octet-stream"),document.location.href=e},r.prototype.nodeSave=function(t,e){var n;null==e&&(e=!0);try{if(n=D.statSync(t),n.isFile()&&!e)return!1}catch(e){f.debug("Creating output file "+t)}return D.writeFile(t,this.canvas.toBuffer(),function(){return f.debug("Finished writing to "+t)})},r.prototype.toImage=function(t){var e;return e=document.createElement("img"),e.src=this.toBase64(t),e.width=this.dimensions.width,e.height=this.dimensions.height,window.devicePixelRatio&&(e.width/=window.devicePixelRatio,e.height/=window.devicePixelRatio),e},r.prototype.toBase64=function(t){return null==t&&(t="png"),t=t.toLowerCase(),this.canvas.toDataURL("image/"+t)},p=function(){function e(t){this.c=t,this.filter=this.c,this.options={blendingMode:"normal",opacity:1},this.layerID=w.uniqid.get(),this.canvas="undefined"!=typeof exports&&null!==exports?new a:document.createElement("canvas"),this.canvas.width=this.c.dimensions.width,this.canvas.height=this.c.dimensions.height,this.context=this.canvas.getContext("2d"),this.context.createImageData(this.canvas.width,this.canvas.height),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.pixelData=this.imageData.data}return e.prototype.newLayer=function(t){return this.c.newLayer.call(this.c,t)},e.prototype.setBlendingMode=function(t){return this.options.blendingMode=t,this},e.prototype.opacity=function(t){return this.options.opacity=t/100,this},e.prototype.copyParent=function(){var t,e,n,i;for(e=this.c.pixelData,t=n=0,i=this.c.pixelData.length;n<i;t=n+=4)this.pixelData[t]=e[t],this.pixelData[t+1]=e[t+1],this.pixelData[t+2]=e[t+2],this.pixelData[t+3]=e[t+3];return this},e.prototype.fillColor=function(){return this.c.fillColor.apply(this.c,arguments)},e.prototype.overlayImage=function(e){return"object"==typeof e?e=e.src:"string"==typeof e&&"#"===e[0]&&(e=t(e).src),e?(this.c.renderer.renderQueue.push({type:u.Type.LoadOverlay,src:e,layer:this}),this):this},e.prototype.applyToParent=function(){var t,e,i,r,o,a,s,c,l;for(i=this.c.pixelStack[this.c.pixelStack.length-1],e=this.c.pixelData,l=[],t=s=0,c=e.length;s<c;t=s+=4)a={r:i[t],g:i[t+1],b:i[t+2],a:i[t+3]},o={r:e[t],g:e[t+1],b:e[t+2],a:e[t+3]},r=n.execute(this.options.blendingMode,o,a),r.r=w.clampRGB(r.r),r.g=w.clampRGB(r.g),r.b=w.clampRGB(r.b),null==r.a&&(r.a=o.a),i[t]=a.r-(a.r-r.r)*(this.options.opacity*(r.a/255)),i[t+1]=a.g-(a.g-r.g)*(this.options.opacity*(r.a/255)),l.push(i[t+2]=a.b-(a.b-r.b)*(this.options.opacity*(r.a/255)));return l},e}(),g=function(){function t(){var t,e,n,i;for(i=["log","info","warn","error"],e=0,n=i.length;e<n;e++)t=i[e],this[t]=function(t){return function(){var e;if(e=1<=arguments.length?M.call(arguments,0):[],r.DEBUG)try{return console[t].apply(console,e)}catch(n){return console[t](e)}}}(t);this.debug=this.log}return t}(),f=new g,m=function(){function t(t){this.c=t,this.loc=0}return t.coordinatesToLocation=function(t,e,n){return 4*(e*n+t)},t.locationToCoordinates=function(t,e){var n,i;return i=Math.floor(t/(4*e)),n=t%(4*e)/4,{x:n,y:i}},t.prototype.locationXY=function(){var t,e;return e=this.c.dimensions.height-Math.floor(this.loc/(4*this.c.dimensions.width)),t=this.loc%(4*this.c.dimensions.width)/4,{x:t,y:e}},t.prototype.getPixelRelative=function(t,e){var n;return n=this.loc+4*this.c.dimensions.width*(-1*e)+4*t,n>this.c.pixelData.length||n<0?{r:0,g:0,b:0,a:0}:{r:this.c.pixelData[n],g:this.c.pixelData[n+1],b:this.c.pixelData[n+2],a:this.c.pixelData[n+3]}},t.prototype.putPixelRelative=function(t,e,n){if(this.loc+4*this.c.dimensions.width*(-1*e)+4*t,!(newLoc>this.c.pixelData.length||newLoc<0))return this.c.pixelData[newLoc]=n.r,this.c.pixelData[newLoc+1]=n.g,this.c.pixelData[newLoc+2]=n.b,this.c.pixelData[newLoc+3]=n.a,!0},t.prototype.getPixel=function(t,e){var n;return n=this.coordinatesToLocation(t,e,this.width),{r:this.c.pixelData[n],g:this.c.pixelData[n+1],b:this.c.pixelData[n+2],a:this.c.pixelData[n+3]}},t.prototype.putPixel=function(t,e,n){var i;return i=this.coordinatesToLocation(t,e,this.width),this.c.pixelData[i]=n.r,this.c.pixelData[i+1]=n.g,this.c.pixelData[i+2]=n.b,this.c.pixelData[i+3]=n.a},t}(),v=function(){function t(){}return t.plugins={},t.register=function(t,e){return this.plugins[t]=e},t.execute=function(t,e,n){return this.plugins[e].apply(t,n)},t}(),r.Plugin=v,r.Renderer=y=function(){function t(e){var n=this;this.c=e,this.processNext=function(){return t.prototype.processNext.apply(n,arguments)},this.renderQueue=[],this.modPixelData=null}return t.Blocks=r.NodeJS?require("os").cpus().length:4,t.prototype.add=function(t){if(null!=t)return this.renderQueue.push(t)},t.prototype.processNext=function(){var t;if(0===this.renderQueue.length)return c.trigger(this,"renderFinished"),null!=this.finishedFn&&this.finishedFn.call(this.c),this;switch(this.currentJob=this.renderQueue.shift(),this.currentJob.type){case u.Type.LayerDequeue:return t=this.c.canvasQueue.shift(),this.c.executeLayer(t),this.processNext();case u.Type.LayerFinished:return this.c.applyCurrentLayer(),this.c.popContext(),this.processNext();case u.Type.LoadOverlay:return this.loadOverlay(this.currentJob.layer,this.currentJob.src);case u.Type.Plugin:return this.executePlugin();default:return this.executeFilter()}},t.prototype.execute=function(t){return this.finishedFn=t,this.modPixelData=w.dataArray(this.c.pixelData.length),this.processNext()},t.prototype.eachBlock=function(e){var n,i,o,a,s,c,u,h,d,p,f,g,m=this;for(this.blocksDone=0,h=this.c.pixelData.length,i=Math.floor(h/4/t.Blocks),n=4*i,u=n+h/4%t.Blocks*4,g=[],c=p=0,f=t.Blocks;0<=f?p<f:p>f;c=0<=f?++p:--p)d=c*n,a=d+(c===t.Blocks-1?u:n),r.NodeJS?(s=l(function(){return e.call(m,c,d,a)}),o=s.run(),g.push(this.blockFinished(o))):g.push(setTimeout(function(t,n,i){return function(){return e.call(m,t,n,i)}}(c,d,a),0));return g},t.prototype.executeFilter=function(){return c.trigger(this.c,"processStart",this.currentJob),this.currentJob.type===u.Type.Single?this.eachBlock(this.renderBlock):this.eachBlock(this.renderKernel)},t.prototype.executePlugin=function(){return f.debug("Executing plugin "+this.currentJob.plugin),v.execute(this.c,this.currentJob.plugin,this.currentJob.args),f.debug("Plugin "+this.currentJob.plugin+" finished!"),this.processNext()},t.prototype.renderBlock=function(e,n,i){var o,a,s,u,h;for(f.debug("Block #"+e+" - Filter: "+this.currentJob.name+", Start: "+n+", End: "+i),c.trigger(this.c,"blockStarted",{blockNum:e,totalBlocks:t.Blocks,startPixel:n,endPixel:i}),o={r:0,g:0,b:0,a:0},s=new m(this.c),a=h=n;h<i;a=h+=4)s.loc=a,o.r=this.c.pixelData[a],o.g=this.c.pixelData[a+1],o.b=this.c.pixelData[a+2],o.a=this.c.pixelData[a+3],u=this.currentJob.processFn.call(s,o),null==u.a&&(u.a=o.a),this.c.pixelData[a]=w.clampRGB(u.r),this.c.pixelData[a+1]=w.clampRGB(u.g),this.c.pixelData[a+2]=w.clampRGB(u.b),this.c.pixelData[a+3]=w.clampRGB(u.a);return r.NodeJS?l.yield(e):this.blockFinished(e)},t.prototype.renderKernel=function(t,e,n){var i,o,a,s,c,u,h,d,p,g,v,y,b,x,D,k,C;for(this.currentJob.name,a=this.currentJob.bias,u=this.currentJob.divisor,v=this.c.pixelData.length,i=this.currentJob.adjust,o=Math.sqrt(i.length),g=[],f.debug("Rendering kernel - Filter: "+this.currentJob.name),e=Math.max(e,4*this.c.dimensions.width*((o-1)/2)),n=Math.min(n,v-4*this.c.dimensions.width*((o-1)/2)),s=(o-1)/2,b=new m(this.c),h=D=e;D<n;h=D+=4){for(b.loc=h,c=0,d=k=-s;-s<=s?k<=s:k>=s;d=-s<=s?++k:--k)for(p=C=s;s<=-s?C<=-s:C>=-s;p=s<=-s?++C:--C)y=b.getPixelRelative(d,p),g[3*c]=y.r,g[3*c+1]=y.g,g[3*c+2]=y.b,c++;x=this.processKernel(i,g,u,a),this.modPixelData[h]=w.clampRGB(x.r),this.modPixelData[h+1]=w.clampRGB(x.g),this.modPixelData[h+2]=w.clampRGB(x.b),this.modPixelData[h+3]=this.c.pixelData[h+3]}return r.NodeJS?l.yield(t):this.blockFinished(t)},t.prototype.blockFinished=function(e){var n,i,r;if(e>=0&&f.debug("Block #"+e+" finished! Filter: "+this.currentJob.name),this.blocksDone++,c.trigger(this.c,"blockFinished",{blockNum:e,blocksFinished:this.blocksDone,totalBlocks:t.Blocks}),this.blocksDone===t.Blocks){if(this.currentJob.type===u.Type.Kernel)for(n=i=0,r=this.c.pixelData.length;0<=r?i<r:i>r;n=0<=r?++i:--i)this.c.pixelData[n]=this.modPixelData[n];return e>=0&&f.debug("Filter "+this.currentJob.name+" finished!"),c.trigger(this.c,"processComplete",this.currentJob),this.processNext()}},t.prototype.processKernel=function(t,e,n,i){var r,o,a,s;for(o={r:0,g:0,b:0},r=a=0,s=t.length;0<=s?a<s:a>s;r=0<=s?++a:--a)o.r+=t[r]*e[3*r],o.g+=t[r]*e[3*r+1],o.b+=t[r]*e[3*r+2];return o.r=o.r/n+i,o.g=o.g/n+i,o.b=o.b/n+i,o},t.prototype.loadOverlay=function(t,e){var n,i,r=this;return n=document.createElement("img"),n.onload=function(){return t.context.drawImage(n,0,0,r.c.dimensions.width,r.c.dimensions.height),t.imageData=t.context.getImageData(0,0,r.c.dimensions.width,r.c.dimensions.height),t.pixelData=t.imageData.data,r.c.pixelData=t.pixelData,r.processNext()},i=h.remoteCheck(e),n.src=null!=i?i:e},t}(),r.Store=x=function(){function t(){}return t.items={},t.has=function(t){return null!=this.items[t]},t.get=function(t){return this.items[t]},t.put=function(t,e){return this.items[t]=e},t.execute=function(t,e){var n=this;return setTimeout(function(){return e.call(n.get(t),n.get(t))},0),this.get(t)},t.flush=function(t){return null==t&&(t=!1),t?delete this.items[t]:this.items={}},t}(),n.register("normal",function(t,e){return{r:t.r,g:t.g,b:t.b}}),n.register("multiply",function(t,e){return{r:t.r*e.r/255,g:t.g*e.g/255,b:t.b*e.b/255}}),n.register("screen",function(t,e){return{r:255-(255-t.r)*(255-e.r)/255,g:255-(255-t.g)*(255-e.g)/255,b:255-(255-t.b)*(255-e.b)/255}}),n.register("overlay",function(t,e){var n;return n={},n.r=e.r>128?255-2*(255-t.r)*(255-e.r)/255:e.r*t.r*2/255,n.g=e.g>128?255-2*(255-t.g)*(255-e.g)/255:e.g*t.g*2/255,n.b=e.b>128?255-2*(255-t.b)*(255-e.b)/255:e.b*t.b*2/255,n}),n.register("difference",function(t,e){return{r:t.r-e.r,g:t.g-e.g,b:t.b-e.b}}),n.register("addition",function(t,e){return{r:e.r+t.r,g:e.g+t.g,b:e.b+t.b}}),n.register("exclusion",function(t,e){return{r:128-2*(e.r-128)*(t.r-128)/255,g:128-2*(e.g-128)*(t.g-128)/255,b:128-2*(e.b-128)*(t.b-128)/255}}),n.register("softLight",function(t,e){var n;return n={},n.r=e.r>128?255-(255-e.r)*(255-(t.r-128))/255:e.r*(t.r+128)/255,n.g=e.g>128?255-(255-e.g)*(255-(t.g-128))/255:e.g*(t.g+128)/255,n.b=e.b>128?255-(255-e.b)*(255-(t.b-128))/255:e.b*(t.b+128)/255,n}),n.register("lighten",function(t,e){return{r:e.r>t.r?e.r:t.r,g:e.g>t.g?e.g:t.g,b:e.b>t.b?e.b:t.b}}),n.register("darken",function(t,e){return{r:e.r>t.r?t.r:e.r,g:e.g>t.g?t.g:e.g,b:e.b>t.b?t.b:e.b}}),u.register("fillColor",function(){var t;return t=1===arguments.length?s.hexToRGB(arguments[0]):{r:arguments[0],g:arguments[1],b:arguments[2]},this.process("fillColor",function(e){return e.r=t.r,e.g=t.g,e.b=t.b,e.a=255,e})}),u.register("brightness",function(t){return t=Math.floor(t/100*255),this.process("brightness",function(e){return e.r+=t,e.g+=t,e.b+=t,e})}),u.register("saturation",function(t){return t*=-.01,this.process("saturation",function(e){var n;return n=Math.max(e.r,e.g,e.b),e.r!==n&&(e.r+=(n-e.r)*t),e.g!==n&&(e.g+=(n-e.g)*t),e.b!==n&&(e.b+=(n-e.b)*t),e})}),u.register("vibrance",function(t){return t*=-1,this.process("vibrance",function(e){var n,i,r;return r=Math.max(e.r,e.g,e.b),i=(e.r+e.g+e.b)/3,n=2*Math.abs(r-i)/255*t/100,e.r!==r&&(e.r+=(r-e.r)*n),e.g!==r&&(e.g+=(r-e.g)*n),e.b!==r&&(e.b+=(r-e.b)*n),e})}),u.register("greyscale",function(t){return this.process("greyscale",function(t){var e;return e=i.luminance(t),t.r=e,t.g=e,t.b=e,t})}),u.register("contrast",function(t){return t=Math.pow((t+100)/100,2),this.process("contrast",function(e){return e.r/=255,e.r-=.5,e.r*=t,e.r+=.5,e.r*=255,e.g/=255,e.g-=.5,e.g*=t,e.g+=.5,e.g*=255,e.b/=255,e.b-=.5,e.b*=t,e.b+=.5,e.b*=255,e})}),u.register("hue",function(t){return this.process("hue",function(e){var n,i,r;return i=s.rgbToHSV(e.r,e.g,e.b),n=100*i.h,n+=Math.abs(t),n%=100,n/=100,i.h=n,r=s.hsvToRGB(i.h,i.s,i.v),r.a=e.a,r})}),u.register("colorize",function(){var t,e;return 2===arguments.length?(e=s.hexToRGB(arguments[0]),t=arguments[1]):4===arguments.length&&(e={r:arguments[0],g:arguments[1],b:arguments[2]},t=arguments[3]),this.process("colorize",function(n){return n.r-=(n.r-e.r)*(t/100),n.g-=(n.g-e.g)*(t/100),n.b-=(n.b-e.b)*(t/100),n})}),u.register("invert",function(){return this.process("invert",function(t){return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,t})}),u.register("sepia",function(t){return null==t&&(t=100),t/=100,this.process("sepia",function(e){return e.r=Math.min(255,e.r*(1-.607*t)+e.g*(.769*t)+e.b*(.189*t)),e.g=Math.min(255,e.r*(.349*t)+e.g*(1-.314*t)+e.b*(.168*t)),e.b=Math.min(255,e.r*(.272*t)+e.g*(.534*t)+e.b*(1-.869*t)),e})}),u.register("gamma",function(t){return this.process("gamma",function(e){return e.r=255*Math.pow(e.r/255,t),e.g=255*Math.pow(e.g/255,t),e.b=255*Math.pow(e.b/255,t),e})}),u.register("noise",function(t){return t=2.55*Math.abs(t),this.process("noise",function(e){var n;return n=i.randomRange(-1*t,t),e.r+=n,e.g+=n,e.b+=n,e})}),u.register("clip",function(t){return t=2.55*Math.abs(t),this.process("clip",function(e){return e.r>255-t?e.r=255:e.r<t&&(e.r=0),e.g>255-t?e.g=255:e.g<t&&(e.g=0),e.b>255-t?e.b=255:e.b<t&&(e.b=0),e})}),u.register("channels",function(t){var e,n;if("object"!=typeof t)return this;for(e in t)T.call(t,e)&&(n=t[e],0!==n?t[e]/=100:delete t[e]);return 0===t.length?this:this.process("channels",function(e){return null!=t.red&&(t.red>0?e.r+=(255-e.r)*t.red:e.r-=e.r*Math.abs(t.red)),null!=t.green&&(t.green>0?e.g+=(255-e.g)*t.green:e.g-=e.g*Math.abs(t.green)),null!=t.blue&&(t.blue>0?e.b+=(255-e.b)*t.blue:e.b-=e.b*Math.abs(t.blue)),e})}),u.register("curves",function(){var t,e,n,r,o,a,s,c,l,u,h,d;if(e=arguments[0],n=2<=arguments.length?M.call(arguments,1):[],"string"==typeof e&&(e=e.split("")),"v"===e[0]&&(e=["r","g","b"]),n.length<3||n.length>4)throw"Invalid number of arguments to curves filter";if(c=n[0],r=n[1],o=4===n.length?n[2]:n[1],a=n[n.length-1],t=i.bezier(c,r,o,a,0,255),c[0]>0)for(s=l=0,h=c[0];0<=h?l<h:l>h;s=0<=h?++l:--l)t[s]=c[1];if(a[0]<255)for(s=u=d=a[0];d<=255?u<=255:u>=255;s=d<=255?++u:--u)t[s]=a[1];return this.process("curves",function(n){var i,r;for(s=i=0,r=e.length;0<=r?i<r:i>r;s=0<=r?++i:--i)n[e[s]]=t[n[e[s]]];return n})}),u.register("exposure",function(t){var e,n,i;return i=Math.abs(t)/100,e=[0,255*i],n=[255-255*i,255],t<0&&(e=e.reverse(),n=n.reverse()),this.curves("rgb",[0,0],e,n,[255,255])}),r.Plugin.register("crop",function(t,e,n,i){var r,o;return null==n&&(n=0),null==i&&(i=0),"undefined"!=typeof exports&&null!==exports?r=new a(t,e):(r=document.createElement("canvas"),w.copyAttributes(this.canvas,r),r.width=t,r.height=e),o=r.getContext("2d"),o.drawImage(this.canvas,n,i,t,e,0,0,t,e),this.cropCoordinates={x:n,y:i},this.cropped=!0,this.replaceCanvas(r)}),r.Plugin.register("resize",function(t){var e,n;return null==t&&(t=null),null===t||null==t.width&&null==t.height?void f.error("Invalid or missing dimensions given for resize"):(null==t.width?t.width=this.canvas.width*t.height/this.canvas.height:null==t.height&&(t.height=this.canvas.height*t.width/this.canvas.width),"undefined"!=typeof exports&&null!==exports?e=new a(t.width,t.height):(e=document.createElement("canvas"),w.copyAttributes(this.canvas,e),e.width=t.width,e.height=t.height),n=e.getContext("2d"),n.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,t.width,t.height),this.resized=!0,this.replaceCanvas(e))}),r.Filter.register("crop",function(){return this.processPlugin("crop",Array.prototype.slice.call(arguments,0))}),r.Filter.register("resize",function(){return this.processPlugin("resize",Array.prototype.slice.call(arguments,0))}),r.Filter.register("boxBlur",function(){return this.processKernel("Box Blur",[1,1,1,1,1,1,1,1,1])}),r.Filter.register("heavyRadialBlur",function(){return this.processKernel("Heavy Radial Blur",[0,0,1,0,0,0,1,1,1,0,1,1,1,1,1,0,1,1,1,0,0,0,1,0,0])}),r.Filter.register("gaussianBlur",function(){return this.processKernel("Gaussian Blur",[1,4,6,4,1,4,16,24,16,4,6,24,36,24,6,4,16,24,16,4,1,4,6,4,1])}),r.Filter.register("motionBlur",function(t){var e;return e=0===t||180===t?[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]:t>0&&t<90||t>180&&t<270?[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]:90===t||270===t?[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0]:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],this.processKernel("Motion Blur",e)}),r.Filter.register("sharpen",function(t){return null==t&&(t=100),t/=100,this.processKernel("Sharpen",[0,-t,0,-t,4*t+1,-t,0,-t,0])}),C={brightness:function(t,e,n){return t.r=t.r-t.r*e*n.strength,t.g=t.g-t.g*e*n.strength,t.b=t.b-t.b*e*n.strength,t},gamma:function(t,e,n){return t.r=255*Math.pow(t.r/255,Math.max(10*e*n.strength,1)),t.g=255*Math.pow(t.g/255,Math.max(10*e*n.strength,1)),t.b=255*Math.pow(t.b/255,Math.max(10*e*n.strength,1)),t},colorize:function(t,e,n){return t.r-=(t.r-n.color.r)*e,t.g-=(t.g-n.color.g)*e,t.b-=(t.b-n.color.b)*e,t}},u.register("vignette",function(t,e){var n,r,o,a;return null==e&&(e=60),"string"==typeof t&&"%"===t.substr(-1)&&(t=this.dimensions.height>this.dimensions.width?this.dimensions.width*(parseInt(t.substr(0,t.length-1),10)/100):this.dimensions.height*(parseInt(t.substr(0,t.length-1),10)/100)),e/=100,r=[this.dimensions.width/2,this.dimensions.height/2],a=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)),o=a-t,n=i.bezier([0,1],[30,30],[70,60],[100,80]),this.process("vignette",function(a){var s,c,l;return l=this.locationXY(),s=i.distance(l.x,l.y,r[0],r[1]),s>o&&(c=Math.max(1,n[Math.round((s-o)/t*100)]/10*e),a.r=255*Math.pow(a.r/255,c),a.g=255*Math.pow(a.g/255,c),a.b=255*Math.pow(a.b/255,c)),a})}),u.register("rectangularVignette",function(t){var e,n,o,a,c,l,u;if(e={strength:50,cornerRadius:0,method:"brightness",color:{r:0,g:0,b:0}},t=w.extend(e,t),!t.size)return this;if("string"==typeof t.size)o=parseInt(t.size,10)/100,t.size={width:this.dimensions.width*o,height:this.dimensions.height*o};else if("object"==typeof t.size)for(u=["width","height"],c=0,l=u.length;c<l;c++)n=u[c],"string"==typeof t.size[n]&&(t.size[n]=this.dimensions[n]*(parseInt(t.size[n],10)/100));else"number"===t.size&&(a=t.size,t.size={width:a,height:a});return"string"==typeof t.cornerRadius&&(t.cornerRadius=t.size.width/2*(parseInt(t.cornerRadius,10)/100)),t.strength/=100,t.size.width=Math.floor(t.size.width),t.size.height=Math.floor(t.size.height),t.image={width:this.dimensions.width,height:this.dimensions.height},"colorize"===t.method&&"string"==typeof t.color&&(t.color=s.hexToRGB(t.color)),t.coords={left:(this.dimensions.width-t.size.width)/2,right:this.dimensions.width-t.coords.left,bottom:(this.dimensions.height-t.size.height)/2,top:this.dimensions.height-t.coords.bottom},t.corners=[{x:t.coords.left+t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.top-t.cornerRadius},{x:t.coords.right-t.cornerRadius,y:t.coords.bottom+t.cornerRadius},{x:t.coords.left+t.cornerRadius,y:t.coords.bottom+t.cornerRadius}],t.maxDist=i.distance(0,0,t.corners[3].x,t.corners[3].y)-t.cornerRadius,this.process("rectangularVignette",function(e){var n,i,o;return i=this.locationXY(),i.x>t.corners[0].x&&i.x<t.corners[1].x&&i.y>t.coords.bottom&&i.y<t.coords.top?e:i.x>t.coords.left&&i.x<t.coords.right&&i.y>t.corners[3].y&&i.y<t.corners[2].y?e:(i.x>t.corners[0].x&&i.x<t.corners[1].x&&i.y>t.coords.top?n=(i.y-t.coords.top)/t.maxDist:i.y>t.corners[2].y&&i.y<t.corners[1].y&&i.x>t.coords.right?n=(i.x-t.coords.right)/t.maxDist:i.x>t.corners[0].x&&i.x<t.corners[1].x&&i.y<t.coords.bottom?n=(t.coords.bottom-i.y)/t.maxDist:i.y>t.corners[2].y&&i.y<t.corners[1].y&&i.x<t.coords.left?n=(t.coords.left-i.x)/t.maxDist:i.x<=t.corners[0].x&&i.y>=t.corners[0].y?(o=r.distance(i.x,i.y,t.corners[0].x,t.corners[0].y),n=(o-t.cornerRadius)/t.maxDist):i.x>=t.corners[1].x&&i.y>=t.corners[1].y?(o=r.distance(i.x,i.y,t.corners[1].x,t.corners[1].y),n=(o-t.cornerRadius)/t.maxDist):i.x>=t.corners[2].x&&i.y<=t.corners[2].y?(o=r.distance(i.x,i.y,t.corners[2].x,t.corners[2].y),n=(o-t.cornerRadius)/t.maxDist):i.x<=t.corners[3].x&&i.y<=t.corners[3].y&&(o=r.distance(i.x,i.y,t.corners[3].x,t.corners[3].y),n=(o-t.cornerRadius)/t.maxDist),n<0?e:C[t.method](e,n,t))})}),function(){var t,e,n,i,o;i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],o=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],e=function(t,e,n,i,r,o,s){var c,l,u,h,d,p,f;return c="undefined"!=typeof exports&&null!==exports?new a:document.createElement("canvas"),c.width=t,c.height=e,h=n+Math.cos(r)*o*.5,p=i+Math.sin(r)*o*.5,d=n-Math.cos(r)*o*.5,f=i-Math.sin(r)*o*.5,l=c.getContext("2d"),u=l.createLinearGradient(h,p,d,f),s?(u.addColorStop(0,"white"),u.addColorStop(.5,"black"),u.addColorStop(1,"white")):(u.addColorStop(0,"white"),u.addColorStop(1,"black")),l.fillStyle=u,l.fillRect(0,0,t,e),l.getImageData(0,0,t,e)},n=function(t,e,n,i,r,o){var s,c,l;return s="undefined"!=typeof exports&&null!==exports?new a:document.createElement("canvas"),s.width=t,s.height=e,c=s.getContext("2d"),l=c.createRadialGradient(n,i,r,n,i,o),l.addColorStop(1,"white"),l.addColorStop(0,"black"),c.fillStyle=l,c.fillRect(0,0,t,e),c.getImageData(0,0,t,e)},t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},r.Plugin.register("compoundBlur",function(e,n,r,a){var s,c,l,u,h,d,p,f,g,m,v,y,b,x,w,D,k,C,T,S,M,N,E,L,B,A,R,H,j,P,O,I,F,_,z,W,q,X,$,U,Y,J,G,K,V,Q,Z,tt,et,nt,it,rt,ot,at,st,ct,lt;for(Y=this.dimensions.width,m=this.dimensions.height,w=this.pixelData,H=e.data,$=Y*m,U=$<<2,E=[],y=tt=0;0<=U?tt<U:tt>U;y=0<=U?++tt:--tt)E[y]=w[y];for(h=0,q=a,a-=1;q-- >=0;)if(0!==(k=n+.5|0)){for(k>256&&(k=256),d=k+k+1,Y<<2,J=Y-1,v=m-1,j=k+1,X=j*(j+1)/2,W=new t,F=void 0,I=W,y=et=1;1<=d?et<d:et>d;y=1<=d?++et:--et)I=I.next=new t,y===j&&(F=I);for(I.next=W,_=null,z=null,Z=V=0,T=i[k],O=o[k],K=nt=0;0<=m?nt<m:nt>m;K=0<=m?++nt:--nt){for(B=p=s=R=g=l=0,A=j*(L=E[V]),f=j*(N=E[V+1]),c=j*(M=E[V+2]),R+=X*L,g+=X*N,l+=X*M,I=W,y=it=0;0<=j?it<j:it>j;y=0<=j?++it:--it)I.r=L,I.g=N,I.b=M,I=I.next;for(y=rt=1;1<=j?rt<j:rt>j;y=1<=j?++rt:--rt)S=V+((J<y?J:y)<<2),R+=(I.r=L=E[S])*(P=j-y),g+=(I.g=N=E[S+1])*P,l+=(I.b=M=E[S+2])*P,B+=L,p+=N,s+=M,I=I.next;for(_=W,z=F,G=ot=0;0<=Y?ot<Y:ot>Y;G=0<=Y?++ot:--ot)E[V]=R*T>>O,E[V+1]=g*T>>O,E[V+2]=l*T>>O,R-=A,g-=f,l-=c,A-=_.r,f-=_.g,c-=_.b,S=Z+((S=G+j)<J?S:J)<<2,B+=_.r=E[S],p+=_.g=E[S+1],s+=_.b=E[S+2],R+=B,g+=p,l+=s,_=_.next,A+=L=z.r,f+=N=z.g,c+=M=z.b,B-=L,p-=N,s-=M,z=z.next,V+=4;Z+=Y}for(G=at=0;0<=Y?at<Y:at>Y;G=0<=Y?++at:--at){for(p=s=B=g=l=R=0,V=G<<2,A=j*(L=E[V]),f=j*(N=E[V+1]),c=j*(M=E[V+2]),R+=X*L,g+=X*N,l+=X*M,I=W,y=st=0;0<=j?st<j:st>j;y=0<=j?++st:--st)I.r=L,I.g=N,I.b=M,I=I.next;for(Q=Y,y=ct=1;1<=j?ct<j:ct>j;y=1<=j?++ct:--ct)V=Q+G<<2,R+=(I.r=L=E[V])*(P=j-y),g+=(I.g=N=E[V+1])*P,l+=(I.b=M=E[V+2])*P,B+=L,p+=N,s+=M,I=I.next,y<v&&(Q+=Y);for(V=G,_=W,z=F,K=lt=0;0<=m?lt<m:lt>m;K=0<=m?++lt:--lt)S=V<<2,E[S]=R*T>>O,E[S+1]=g*T>>O,E[S+2]=l*T>>O,R-=A,g-=f,l-=c,A-=_.r,f-=_.g,c-=_.b,S=G+((S=K+j)<v?S:v)*Y<<2,R+=B+=_.r=E[S],g+=p+=_.g=E[S+1],l+=s+=_.b=E[S+2],_=_.next,A+=L=z.r,f+=N=z.g,c+=M=z.b,B-=L,p-=N,s-=M,z=z.next,V+=Y}for(n*=r,y=$;--y>-1;)x=y<<2,C=(255&H[x+2])/255*a,D=0|C,D===h?(u=256*(C-(0|C)),b=256-u,w[x]=w[x]*b+E[x]*u>>8,w[x+1]=w[x+1]*b+E[x+1]*u>>8,w[x+2]=w[x+2]*b+E[x+2]*u>>8):D===h+1&&(w[x]=E[x],w[x+1]=E[x+1],w[x+2]=E[x+2]);h++}return this}),r.Filter.register("tiltShift",function(t){var n,i;return n={center:{x:this.dimensions.width/2,y:this.dimensions.height/2},angle:45,focusWidth:200,startRadius:3,radiusFactor:1.5,steps:3},t=w.extend(n,t),t.angle*=Math.PI/180,i=e(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,t.angle,t.focusWidth,!0),this.processPlugin("compoundBlur",[i,t.startRadius,t.radiusFactor,t.steps])}),r.Filter.register("radialBlur",function(t){var e,i,r,o;return e={size:50,center:{x:this.dimensions.width/2,y:this.dimensions.height/2},startRadius:3,radiusFactor:1.5,steps:3,radius:null},t=w.extend(e,t),t.radius||(t.radius=this.dimensions.width<this.dimensions.height?this.dimensions.height:this.dimensions.width),r=t.radius/2-t.size,o=t.radius/2,i=n(this.dimensions.width,this.dimensions.height,t.center.x,t.center.y,r,o),this.processPlugin("compoundBlur",[i,t.startRadius,t.radiusFactor,t.steps])})}(),r.Filter.register("edgeEnhance",function(){return this.processKernel("Edge Enhance",[0,0,0,-1,1,0,0,0,0])}),r.Filter.register("edgeDetect",function(){return this.processKernel("Edge Detect",[-1,-1,-1,-1,8,-1,-1,-1,-1])}),r.Filter.register("emboss",function(){return this.processKernel("Emboss",[-2,-1,0,-1,1,1,0,1,2])}),r.Filter.register("posterize",function(t){var e,n;return e=256/t,n=255/(t-1),this.process("posterize",function(t){return t.r=Math.floor(Math.floor(t.r/e)*n),t.g=Math.floor(Math.floor(t.g/e)*n),t.b=Math.floor(Math.floor(t.b/e)*n),t})}),r.Filter.register("vintage",function(t){if(null==t&&(t=!0),this.greyscale(),this.contrast(5),this.noise(3),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.87),t)return this.vignette("40%",30)}),r.Filter.register("lomo",function(t){return null==t&&(t=!0),this.brightness(15),this.exposure(15),this.curves("rgb",[0,0],[200,0],[155,255],[255,255]),this.saturation(-20),this.gamma(1.8),t&&this.vignette("50%",60),this.brightness(5)}),r.Filter.register("clarity",function(t){return null==t&&(t=!1),this.vibrance(20),this.curves("rgb",[5,0],[130,150],[190,220],[250,255]),this.sharpen(15),this.vignette("45%",20),t&&(this.greyscale(),this.contrast(4)),this}),r.Filter.register("sinCity",function(){return this.contrast(100),this.brightness(15),this.exposure(10),this.posterize(80),this.clip(30),this.greyscale()}),r.Filter.register("sunrise",function(){return this.exposure(3.5),this.saturation(-5),this.vibrance(50),this.sepia(60),this.colorize("#e87b22",10),this.channels({red:8,blue:8}),this.contrast(5),this.gamma(1.2),this.vignette("55%",25)}),r.Filter.register("crossProcess",function(){return this.exposure(5),this.colorize("#e87b22",4),this.sepia(20),this.channels({blue:8,red:3}),this.curves("b",[0,0],[100,150],[180,180],[255,255]),this.contrast(15),this.vibrance(75),this.gamma(1.6)}),r.Filter.register("orangePeel",function(){return this.curves("rgb",[0,0],[100,50],[140,200],[255,255]),this.vibrance(-30),this.saturation(-30),this.colorize("#ff9000",30),this.contrast(-5),this.gamma(1.4)}),r.Filter.register("love",function(){return this.brightness(5),this.exposure(8),this.contrast(4),this.colorize("#c42007",30),this.vibrance(50),this.gamma(1.3)}),r.Filter.register("grungy",function(){return this.gamma(1.5),this.clip(25),this.saturation(-60),this.contrast(5),this.noise(5),this.vignette("50%",30)}),r.Filter.register("jarques",function(){return this.saturation(-35),this.curves("b",[20,0],[90,120],[186,144],[255,230]),this.curves("r",[0,0],[144,90],[138,120],[255,255]),this.curves("g",[10,0],[115,105],[148,100],[255,248]),this.curves("rgb",[0,0],[120,100],[128,140],[255,255]),this.sharpen(20)}),r.Filter.register("pinhole",function(){return this.greyscale(),this.sepia(10),this.exposure(10),this.contrast(15),this.vignette("60%",35)}),r.Filter.register("oldBoot",function(){return this.saturation(-20),this.vibrance(-50),this.gamma(1.1),this.sepia(30),this.channels({red:-10,blue:5}),this.curves("rgb",[0,0],[80,50],[128,230],[255,255]),this.vignette("60%",30)}),r.Filter.register("glowingSun",function(t){if(null==t&&(t=!0),this.brightness(10),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.gamma(.8),this.filter.contrast(50),this.filter.exposure(10)}),this.newLayer(function(){return this.setBlendingMode("softLight"),this.opacity(80),this.fillColor("#f49600")}),this.exposure(20),this.gamma(.8),t)return this.vignette("45%",20)}),r.Filter.register("hazyDays",function(){return this.gamma(1.2),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(60),this.copyParent(),this.filter.channels({red:5}),this.filter.stackBlur(15)}),this.newLayer(function(){return this.setBlendingMode("addition"),this.opacity(40),this.fillColor("#6899ba")}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(35),this.copyParent(),this.filter.brightness(40),this.filter.vibrance(40),this.filter.exposure(30),this.filter.contrast(15),this.filter.curves("r",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("g",[0,40],[128,128],[128,128],[255,215]),this.filter.curves("b",[0,40],[128,128],[128,128],[255,215]),this.filter.stackBlur(5)}),this.curves("r",[20,0],[128,158],[128,128],[235,255]),this.curves("g",[20,0],[128,128],[128,128],[235,255]),this.curves("b",[20,0],[128,108],[128,128],[235,255]),this.vignette("45%",20)}),r.Filter.register("herMajesty",function(){return this.brightness(40),this.colorize("#ea1c5d",10),this.curves("b",[0,10],[128,180],[190,190],[255,255]),this.newLayer(function(){return this.setBlendingMode("overlay"),this.opacity(50),this.copyParent(),this.filter.gamma(.7),this.newLayer(function(){return this.setBlendingMode("normal"),this.opacity(60),this.fillColor("#ea1c5d")})}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(60),this.copyParent(),this.filter.saturation(50),this.filter.hue(90),this.filter.contrast(10)}),this.gamma(1.4),this.vibrance(-30),this.newLayer(function(){return this.opacity(10),this.fillColor("#e5f0ff")}),this}),r.Filter.register("nostalgia",function(){return this.saturation(20),this.gamma(1.4),this.greyscale(),this.contrast(5),this.sepia(100),this.channels({red:8,blue:2,green:4}),this.gamma(.8),this.contrast(5),this.exposure(10),this.newLayer(function(){return this.setBlendingMode("overlay"),this.copyParent(),this.opacity(55),this.filter.stackBlur(10)}),this.vignette("50%",30)}),r.Filter.register("hemingway",function(){return this.greyscale(),this.contrast(10),this.gamma(.9),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(40),this.copyParent(),this.filter.exposure(15),this.filter.contrast(15),this.filter.channels({green:10,red:5})}),this.sepia(30),this.curves("rgb",[0,10],[120,90],[180,200],[235,255]),this.channels({red:5,green:-2}),this.exposure(15)}),r.Filter.register("concentrate",function(){return this.sharpen(40),this.saturation(-50),this.channels({red:3}),this.newLayer(function(){return this.setBlendingMode("multiply"),this.opacity(80),this.copyParent(),this.filter.sharpen(5),this.filter.contrast(50),this.filter.exposure(10),this.filter.channels({blue:5})}),this.brightness(10)}),function(){var t,e,n;e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],t=function(){return this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},r.Plugin.register("stackBlur",function(i){var r,o,a,s,c,l,u,h,d,p,f,g,m,v,y,b,x,w,D,k,C,T,S,M,N,E,L,B,A,R,H,j,P,O,I,F,_,z,W,q,X,$,U,Y;if(!(isNaN(i)||i<1)){for(i|=0,y=this.pixelData,A=this.dimensions.width,h=this.dimensions.height,s=i+i+1,A<<2,R=A-1,d=h-1,k=i+1,B=k*(k+1)/2,L=new t,S=L,p=F=1;1<=s?F<s:F>s;p=1<=s?++F:--F)S=S.next=new t,p===k&&(M=S);for(S.next=L,N=null,E=null,I=P=0,f=e[i],T=n[i],j=_=0;0<=h?_<h:_>h;j=0<=h?++_:--_){for(x=c=r=D=u=a=0,w=k*(b=y[P]),l=k*(v=y[P+1]),o=k*(m=y[P+2]),D+=B*b,u+=B*v,a+=B*m,S=L,p=z=0;0<=k?z<k:z>k;p=0<=k?++z:--z)S.r=b,S.g=v,S.b=m,S=S.next;for(p=W=1;1<=k?W<k:W>k;p=1<=k?++W:--W)g=P+((R<p?R:p)<<2),D+=(S.r=b=y[g])*(C=k-p),u+=(S.g=v=y[g+1])*C,a+=(S.b=m=y[g+2])*C,x+=b,c+=v,r+=m,S=S.next;for(N=L,E=M,H=q=0;0<=A?q<A:q>A;H=0<=A?++q:--q)y[P]=D*f>>T,y[P+1]=u*f>>T,y[P+2]=a*f>>T,D-=w,u-=l,a-=o,w-=N.r,l-=N.g,o-=N.b,g=I+((g=H+i+1)<R?g:R)<<2,x+=N.r=y[g],c+=N.g=y[g+1],r+=N.b=y[g+2],D+=x,u+=c,a+=r,N=N.next,w+=b=E.r,l+=v=E.g,o+=m=E.b,x-=b,c-=v,r-=m,E=E.next,P+=4;I+=A}for(H=X=0;0<=A?X<A:X>A;H=0<=A?++X:--X){for(c=r=x=u=a=D=0,P=H<<2,w=k*(b=y[P]),l=k*(v=y[P+1]),o=k*(m=y[P+2]),D+=B*b,u+=B*v,a+=B*m,S=L,p=$=0;0<=k?$<k:$>k;p=0<=k?++$:--$)S.r=b,S.g=v,S.b=m,S=S.next;for(O=A,p=U=1;1<=i?U<=i:U>=i;p=1<=i?++U:--U)P=O+H<<2,D+=(S.r=b=y[P])*(C=k-p),u+=(S.g=v=y[P+1])*C,a+=(S.b=m=y[P+2])*C,x+=b,c+=v,r+=m,S=S.next,p<d&&(O+=A);for(P=H,N=L,E=M,j=Y=0;0<=h?Y<h:Y>h;j=0<=h?++Y:--Y)g=P<<2,y[g]=D*f>>T,y[g+1]=u*f>>T,y[g+2]=a*f>>T,D-=w,u-=l,a-=o,w-=N.r,l-=N.g,o-=N.b,g=H+((g=j+k)<d?g:d)*A<<2,D+=x+=N.r=y[g],u+=c+=N.g=y[g+1],a+=r+=N.b=y[g+2],N=N.next,w+=b=E.r,l+=v=E.g,o+=m=E.b,x-=b,c-=v,r-=m,E=E.next,P+=A}return this}}),r.Filter.register("stackBlur",function(t){return this.processPlugin("stackBlur",[t])})}(),r.Filter.register("threshold",function(t){return this.process("threshold",function(e){var n;return n=.2126*e.r+.7152*e.g+.0722*e.b,n<t?(e.r=0,e.g=0,e.b=0):(e.r=255,e.g=255,e.b=255),e})})}.call(this),Sketchpad.prototype._cursorPosition=function(t){return{x:t.pageX-$(this.canvas).offset().left,y:t.pageY-$(this.canvas).offset().top}},Sketchpad.prototype._draw=function(t,e,n,i){this._stroke(t,e,n,i,"source-over")},Sketchpad.prototype._erase=function(t,e,n,i){this._stroke(t,e,n,i,"destination-out")},Sketchpad.prototype._stroke=function(t,e,n,i,r){this.context.save(),this.context.lineJoin="round",this.context.lineCap="round",this.context.strokeStyle=n,this.context.lineWidth=i,this.context.globalCompositeOperation=r,this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(e.x,e.y),this.context.closePath(),this.context.stroke(),this.context.restore()},Sketchpad.prototype._mouseDown=function(t){this._lastPosition=this._cursorPosition(t),this._currentStroke.color=this.color,this._currentStroke.size=this.penSize,this._currentStroke.lines=[],this._sketching=!0,this.canvas.addEventListener("mousemove",this._mouseMove)},Sketchpad.prototype._mouseUp=function(t){this._sketching&&(this.strokes.push($.extend(!0,{},this._currentStroke)),this._sketching=!1),this.canvas.removeEventListener("mousemove",this._mouseMove)},Sketchpad.prototype._mouseMove=function(t){var e=this._cursorPosition(t);this._draw(this._lastPosition,e,this.color,this.penSize),this._currentStroke.lines.push({start:$.extend(!0,{},this._lastPosition),end:$.extend(!0,{},e)}),this._lastPosition=e},Sketchpad.prototype._touchStart=function(t){t.preventDefault(),this._sketching||(this._lastPosition=this._cursorPosition(t.changedTouches[0]),this._currentStroke.color=this.color,this._currentStroke.size=this.penSize,this._currentStroke.lines=[],this._sketching=!0,this.canvas.addEventListener("touchmove",this._touchMove,!1))},Sketchpad.prototype._touchEnd=function(t){t.preventDefault(),this._sketching&&(this.strokes.push($.extend(!0,{},this._currentStroke)),this._sketching=!1),this.canvas.removeEventListener("touchmove",this._touchMove)},Sketchpad.prototype._touchCancel=function(t){t.preventDefault(),this._sketching&&(this.strokes.push($.extend(!0,{},this._currentStroke)),this._sketching=!1),this.canvas.removeEventListener("touchmove",this._touchMove)},Sketchpad.prototype._touchLeave=function(t){t.preventDefault(),this._sketching&&(this.strokes.push($.extend(!0,{},this._currentStroke)),this._sketching=!1),this.canvas.removeEventListener("touchmove",this._touchMove)},Sketchpad.prototype._touchMove=function(t){t.preventDefault();var e=this._cursorPosition(t.changedTouches[0]);this._draw(this._lastPosition,e,this.color,this.penSize),this._currentStroke.lines.push({start:$.extend(!0,{},this._lastPosition),end:$.extend(!0,{},e)}),this._lastPosition=e},Sketchpad.prototype.reset=function(){this.canvas=this.element[0],this.canvas.width=this._width,this.canvas.height=this._height,this.context=this.canvas.getContext("2d"),this.redraw(this.strokes),this.readOnly||(this.canvas.addEventListener("mousedown",this._mouseDown),this.canvas.addEventListener("mouseout",this._mouseUp),this.canvas.addEventListener("mouseup",this._mouseUp),this.canvas.addEventListener("touchstart",this._touchStart),this.canvas.addEventListener("touchend",this._touchEnd),this.canvas.addEventListener("touchcancel",this._touchCancel),this.canvas.addEventListener("touchleave",this._touchLeave))},Sketchpad.prototype.drawStroke=function(t){for(var e=0;e<t.lines.length;e++){var n=t.lines[e];this._draw(n.start,n.end,t.color,t.size)}},Sketchpad.prototype.redraw=function(t){for(var e=0;e<t.length;e++)this.drawStroke(t[e])},Sketchpad.prototype.toObject=function(){return{width:this.canvas.width,height:this.canvas.height,strokes:this.strokes,undoHistory:this.undoHistory}},Sketchpad.prototype.toJSON=function(){return JSON.stringify(this.toObject())},Sketchpad.prototype.animate=function(t,e,n){this.clear();for(var i=t,r=null,o=0;o<this.strokes.length;o++)for(var a=this.strokes[o],s=0;s<a.lines.length;s++){var c=a.lines[s];r=this._draw.bind(this,c.start,c.end,a.color,a.size),this.animateIds.push(setTimeout(r,i)),i+=t}e&&(n=n||0,r=this.animate.bind(this,t,e,n),this.animateIds.push(setTimeout(r,i+n)))},Sketchpad.prototype.cancelAnimation=function(){for(var t=0;t<this.animateIds.length;t++)clearTimeout(this.animateIds[t])},Sketchpad.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Sketchpad.prototype.undo=function(){this.clear();var t=this.strokes.pop();t&&(this.undoHistory.push(t),this.redraw(this.strokes))},Sketchpad.prototype.redo=function(){var t=this.undoHistory.pop();t&&(this.strokes.push(t),this.drawStroke(t))};